## 关系型和非关系型数据库的区别

关系型数据库是简单的表结构，优点：易于维护，使用方便，直接用sql语句进行查询，支持复杂的多表的连接查询；缺点：读写性能差，尤其是面对海量数据的高效率读写；固定的表结构，灵活性差；高并发读写需求，面临硬盘I/O的瓶颈

非关系型数据库：（包括四种：键值存储数据库Redis，列存储数据库HBase，文档数据库MongoDB CoachDB，图形数据库IinforGrid）优点：格式灵活，支持以上四种格式；速度快；扩展性好；容易部署。缺点：不支持事务，不支持sql，不利于对复杂的查询

## 数据库三范式是什么?

第一范式（1NF）：字段具有原子性,不可再分。(所有关系型数据库系统都满足第一范式，数据库表中的字段都是单一属性的，不可再分)

第二范式（2NF）是在第一范式（1NF）的基础上建立起来的，即满足第二范式（2NF）必须先满足第一范式（1NF）。要求数据库表中的每个实例或行必须可以被惟一地区分。通常需要为表加上一个列，以存储各个实例的惟一标识。这个惟一属性列被称为主关键字或主
键。

满足第三范式（3NF）必须先满足第二范式（2NF）。简而言之，第三范式（3NF）要求一个数据库表中不包含已在其它表中已包含的非主关键字信息。 

所以第三范式具有如下特征：

- 每一列只有一个值
- 每一行都能区分。
- 每一个表都不包含其他表已经包含的非主关键字信息。

## 范式和反范式的优缺点

**反范式：**违反范式规则的数据库设计理念

范式的优点和缺点：

- 范式化的更新操作通常比反范式化要快
- 当数据较好的范式化时，就只有很少或没有重复数据，所有只需要修改更少的数据
- 范式化的表通常更小，可以更好的存放在内存中，所以执行操作会更快
- 很少有多余的数据意味着检索列表数据时更少需要distinct或者group by 语句
- 范式化的缺点是通常表需要关联，稍微复杂一些的查询语句在符合范式的表上都可能需要至少一次的关联，可能会更多。这不但代价昂贵，也可能是一些索引策略无效。

反范式的优点和缺点：

- 反范式化的表因为所有的数据都在一张表中，可以很好的避免关联
- 如果不需要关联表，则对大部分查询最差的情况－即使表没有使用索引－是全表扫描。当数据比内存大时这可能比关联要快得多，因为这样避免了随机I/O。
- 关联会使的，在执行数据库语句时，使得需要在一个索引中又排序又过滤。如果采用反范式化组织数据将两张表的字段合并一下，并且增加一个索引，就可以不通过关联写出这个查询。
- 表格内的冗余较多，删除数据时候会造成表有些有用的信息丢失。

混用范式化和反范式化

- 完全范式和完全反范式在实际的开发中几乎不存在。
- 最常见的反范式化数据的方法是复制或者缓存，在不同的表中存储相同的特定列。在MySQL5.0和更新版中，可以使用触发器更新缓存值，这使得实现这样的方案变得更简单。
- 另一个从父表冗余一些数据到子表的理由是排序的需要
- 缓存衍生值也是有用的；就是说对于一些数量统计显示，可以单独设定一个子查询来计算并显示或者在主表中建立一个统计字段保存和更新这个值

## myisam 和 innodb 的区别？

1. **事务支持：** MyISAM 强调的是性能，每次查询具有原子性,其执行数度比InnoDB类型更快，但是不提供事务支持。InnoDB 提供事务支持事务，外部键等高级数据库功能。 具有事务(commit)、回滚(rollback)和崩溃修复能力(crash recovery capabilities)的事务安全
   (transaction-safe (ACID compliant))型表。
2. **行级锁支持：** InnoDB支持行级锁，而MyISAM支持表级锁.。用户在操作myisam表时，select，update，delete，insert语句都会给表自动加锁，如果加锁以后的表满足insert并发的情况下，可以在表的尾部插入新的数据。
3. InnoDB支持MVCC, 而MyISAM不支持
4. InnoDB支持外键，而MyISAM不支持
5. 表主键：  MyISAM 允许没有任何索引和主键的表存在，索引都是保存行的地址。InnoDB：如果没有设定主键或者非空唯一索引，就会自动生成一个6字节的主键(用户不可见)，数据是主索引的一部分，附加索引保存的是主索引的值。
6. 存储结构 > MyISAM：每个MyISAM在磁盘上存储成三个文件。第一个文件的名字以表的名字开始，扩展名指出文件类型。.frm文件存储表定义。数据文件的扩展名为.MYD
   (MYData)。索引文件的扩展名是.MYI (MYIndex)。 InnoDB：所有的表都保存在同一个数据文件中（也可能是多个文件，或者是独立的表空间文件），InnoDB表的大小只受限于操作系统文件的大小，一般为2GB。

## 数据库连接池的作用

**为什么会出现连接池：** 在操作数据库的时候，可能会出现频繁的建立连接、关闭连接的情况。这样会大大降低系统的性能。

**连接池：** 资源池是为了解决资源频繁分配和释放所造成的问题而出现的，应用在数据库管理领域就是建立一个数据库的连接池，当需要建立连接时，调用getConnection方法获得连接；当使用完毕时，通过releaseConnection方法直接返回，并不是释放连接，只是由连接池收回，以便下一次使用。

**作用：**

- 资源复用：数据库的连接得到了重用，避免了频繁的创建连接、释放连接引起的性能开销。在减少系统消耗的基础上，也增进了系统运行环境的平稳性。
- 更快的响应速度：数据库连接池在初始化的过程中，往往已经建立了若干数据库连接置于池中备用。此时连接的初始化工作已经完成。对于业务请求而言，直接利用现有的可用连接，避免了数据库连接初始化和释放过程的时间，从而缩短了系统整体响应的时间。
- 统一的连接管理，避免了数据库连接泄漏：在较完备的数据库连接池实现中，可以根据预先的连接占用超时设定，强制收回被占用的连接。从而避免了常规数据库连接操作中可能出现的资源泄露。

## 关于数据库自增ID

一张表，里面有 ID 自增主键，当 insert 了 17 条记录之后，删除了第 15,16,17 条记录， 再把 Mysql 重启，再 insert 一条记录，这条记录的 ID 是 18 还是 15 ？

- 如果表的类型是 MyISAM，那么是 18 因为 MyISAM 表会把自增主键的最大 ID 记录到数据文件里，重启 MySQL 自增主键的最大 ID 也不会丢失 
- 如果表的类型是 InnoDB，那么是 15 InnoDB 表只是把自增主键的最大 ID 记录到内存中，所以重启数据库或者是对表进行 OPTIMIZE 操作，都会导致最大 ID 丢失

## 与 Oracle 相比，Mysql 有什么优势？ 

- Mysql 是开源软件，随时可用，无需付费。 
- Mysql 是便携式的。操作简单、部署方便
- 带有命令提示符的 GUI。 
- Mysql 的引擎是插件式

## mysql中float、double、decimal的区别

浮点数以 8 位精度存储在 FLOAT 中，并且有四个字节。 

浮点数存储在 DOUBLE 中，精度为 18 位，有八个字节。

float类型表示单精度浮点数值，double类型表示双精度浮点数值，float和double都是浮点型，而decimal是定点型；

MySQL 浮点型和定点型可以用类型名称后加（M，D）来表示，M表示该值的总共长度，D表示小数点后面的长度，M和D又称为精度和标度，如float(5,2)的 可显示为999.99，MySQL保存值时会进行四舍五入，如果插入999.009，则结果为999.01。

float和double在不指定精度时，默认会按照实际的精度来显示，而DECIMAL在不指定精度时，默认整数为10，小数为0。

float和double求SUM的结果都是不精确的，只有decimal求SUM得到的是精准数值：

所以，decimal 类型是适合财务和货币计算的128位数据类型。

## LENGTH()与CHAR_LENGTH()区别

无论是LENGTH()还是CHAR_LENGTH()都是为了统计字符串的长度。只不过，LENGTH()是按照字节来统计的，CHAR_LENGTH()是按照字符来统计的。例如：一个包含5个字符且每个字符占两个字节的字符串而言，LENGTH()返回长度10，CHAR_LENGTH()返回长度是5；如果对于单字节的字符，则两者返回结果相同。