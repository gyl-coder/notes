


<!DOCTYPE html>
<html lang="en" class="with-v3-banner">
  <head>
    <title>Notes</title>
    <meta charset="utf-8">
    <meta name="description" content="Notes - Personal review warehouse">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="alternate" hreflang="x-default" href="https://vuejs.org/data/Java/java_collection.html">
    <link rel="alternate" hreflang="zh" href="https://cn.vuejs.org/data/Java/java_collection.html">
    <link rel="alternate" hreflang="ja" href="https://jp.vuejs.org/data/Java/java_collection.html">
    <link rel="alternate" hreflang="ru" href="https://ru.vuejs.org/data/Java/java_collection.html">
    <link rel="alternate" hreflang="ko" href="https://kr.vuejs.org/data/Java/java_collection.html">
    <link rel="alternate" hreflang="pt-BR" href="https://br.vuejs.org/data/Java/java_collection.html">
    <link rel="alternate" hreflang="fr" href="https://fr.vuejs.org/data/Java/java_collection.html">
    <link rel="alternate" hreflang="es" href="https://es.vuejs.org/data/Java/java_collection.html">

    <meta property="og:type" content="article">
    <meta property="og:title" content="Notes">
    <meta property="og:description" content="Notes - Personal review warehouse">
    <meta property="og:image" content="https://vuejs.org//images/logo.png">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Notes">
    <meta name="twitter:description" content="Notes - Personal review warehouse">
    <meta name="twitter:image" content="https://vuejs.org/images/logo.png">

    <link rel="apple-touch-icon" sizes="57x57" href="/images/icons/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/images/icons/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/images/icons/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/images/icons/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/images/icons/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/images/icons/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/images/icons/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/images/icons/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/icons/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/images/icons/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/images/icons/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/icons/favicon-16x16.png">
    <meta name="msapplication-TileImage" content="/images/icons/ms-icon-144x144.png">
    <link rel="icon" href="/images/logo.png" type="image/png">

    <meta name="msapplication-TileColor" content="#4fc08d">
    <meta name="theme-color" content="#4fc08d">

    <meta name="msapplication-config" content="browserconfig.xml">
    <link rel="manifest" href="/manifest.json">

    <link href="https://fonts.googleapis.com" rel="preconnect" crossorigin>
    <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
    <link href="https://maxcdn.bootstrapcdn.com" rel="preconnect" crossorigin>

    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600|Roboto Mono&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Dosis:500&text=Vue.js&display=swap" rel="stylesheet">

    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

    <!-- main page styles -->
    
<link rel="stylesheet" href="/css/page.css">


    <!-- this needs to be loaded before guide's inline scripts -->
    <script src="/js/vue.js"></script>

    

    <script>
      Vue.config.productionTip = false
      window.PAGE_TYPE = ""
    </script>

    <!-- ga -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-46852172-1', 'vuejs.org');
      ga('send', 'pageview');
    </script>

    <!-- vimeo analytics -->
    <script type="text/javascript" defer="defer" src="https://extend.vimeocdn.com/ga/72160148.js"></script>
  <meta name="generator" content="Hexo 5.4.0"></head>
  <body class="docs">
    <div id="mobile-bar" >
      <a class="menu-button"></a>
      <a class="logo" href="/"></a>
    </div>
    <div>
  <div id="v3-banner">
    <span class="hidden-sm">Welcome to yanliang's notes</span>
  </div>

  <header id="header">
    <a id="logo" href="/">
      <img src="/images/logo.png" alt="vue logo">
      <span>Notes - personal review warehouse</span>
    </a>
    <ul id="nav">
      <li>
  <form id="search-form">
    <input type="text" id="search-query-nav" class="search-query st-default-search-input" aria-label="Search">
  </form>
</li>
<li class="nav-dropdown-container learn">
  <a class="nav-link">‚≠êÔ∏èJava</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><h4>Documentation</h4></li>
    <li>
      <ul>
        <li><a href="/java/oop/" class="nav-link">OOP</a></li>
        <li><a href="/v2/api/" class="nav-link">API</a></li>
        <li><a href="/v2/style-guide/" class="nav-link">Style Guide</a></li>
        <li><a href="/v2/examples/" class="nav-link">Examples</a></li>
        <li><a href="/v2/cookbook/" class="nav-link">Cookbook</a></li>
      </ul>
    </li>
    <li><h4>Video Courses</h4></li>
    <li>
      <ul>
        <li>
          <a href="https://www.vuemastery.com/courses/" class="nav-link" target="_blank" rel="sponsored noopener">
            Vue Mastery
          </a>
        </li>
        <li>
          <a
            href="https://vueschool.io/?friend=vuejs&utm_source=Vuejs.org&utm_medium=Link&utm_content=Navbar%20Dropdown"
            class="nav-link"
            target="_blank" rel="sponsored noopener"
          >
            Vue School
          </a>
        </li>
      </ul>
    </li>
  </ul>
</li>

<li class="nav-dropdown-container learn">
  <a class="nav-link">ÁΩëÁªú</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <!-- <li><h4>Documentation</h4></li> -->
    <li>
      <ul>
        <li><a href="/network">Review List</a></li>
        <li><a href="/network/tcp/">üî•TCP</a></li>
        <li><a href="/network/http/">HTTP</a></li>
        <li><a href="/network/ip/">IP</a></li>
      </ul>
    </li>
    <li><h4>Video Courses</h4></li>
    <li>
      <ul>
        <li>
          <a href="https://www.vuemastery.com/courses/" class="nav-link" target="_blank" rel="sponsored noopener">
            Vue Mastery
          </a>
        </li>
        <li>
          <a
            href="https://vueschool.io/?friend=vuejs&utm_source=Vuejs.org&utm_medium=Link&utm_content=Navbar%20Dropdown"
            class="nav-link"
            target="_blank" rel="sponsored noopener"
          >
            Vue School
          </a>
        </li>
      </ul>
    </li>
  </ul>
</li>

<li>
  <a href="/os/">Êìç‰ΩúÁ≥ªÁªü</a>
</li>
<li>
  <a href="/mysql/">üíºÊï∞ÊçÆÂ∫ì</a>
</li>
<li>
  <a target="_blank" rel="noopener" href="https://codetop.cc/#/home">‚ù§Ô∏èÁÆóÊ≥ï</a>
</li>
<li class="nav-dropdown-container resources">
  <a href="#" class="nav-link">Resources</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="/resources/partners.html" class="nav-link">Partners</a></li>
    <li><a href="/resources/themes.html" class="nav-link">Themes</a></li>
    <li><a href="https://github.com/vuejs/awesome-vue" class="nav-link" target="_blank" rel="noopener">Awesome Vue</a></li>
    <li><a href="https://awesomejs.dev/for/vue/" class="nav-link" target="_blank" rel="noopener">Browse packages for Vue</a></li>
  </ul>
</li>

<!-- <li>
  <a href="/partners" class="nav-link ">Partners</a>
</li> -->
<li class="nav-dropdown-container support-vue">
  <a href="/support-vuejs/" class="nav-link">Support Vue</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="/support-vuejs/#One-time-Donations" class="nav-link">One-time Donations</a></li>
    <li><a href="/support-vuejs/#Recurring-Pledges" class="nav-link">Recurring Pledges</a></li>
    <li><a href="https://vue.threadless.com" target="_blank" rel="noopener" class="nav-link">T-Shirt Shop</a></li>
  </ul>
</li>

<li class="nav-dropdown-container language">
  <a class="nav-link">Translations</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a target="_blank" rel="noopener" href="https://cn.vuejs.org/data/Java/java_collection.html" class="nav-link">‰∏≠Êñá</a></li>
    <li><a target="_blank" rel="noopener" href="https://jp.vuejs.org/data/Java/java_collection.html" class="nav-link">Êó•Êú¨Ë™û</a></li>
    <li><a target="_blank" rel="noopener" href="https://ru.vuejs.org/data/Java/java_collection.html" class="nav-link">–†—É—Å—Å–∫–∏–π</a></li>
    <li><a target="_blank" rel="noopener" href="https://kr.vuejs.org/data/Java/java_collection.html" class="nav-link">ÌïúÍµ≠Ïñ¥</a></li>
    <li><a target="_blank" rel="noopener" href="https://br.vuejs.org/data/Java/java_collection.html" class="nav-link">Portugu√™s</a></li>
    <li><a target="_blank" rel="noopener" href="https://fr.vuejs.org/data/Java/java_collection.html" class="nav-link">Fran√ßais</a></li>
    <li><a target="_blank" rel="noopener" href="https://vi.vuejs.org/data/Java/java_collection.html" class="nav-link">Ti·∫øng Vi·ªát</a></li>
    <li><a target="_blank" rel="noopener" href="https://es.vuejs.org/data/Java/java_collection.html" class="nav-link">Espa√±ol</a></li>
    <li><a target="_blank" rel="noopener" href="https://docs.vuejs.id/data/Java/java_collection.html" class="nav-link">Bahasa Indonesia</a></li>
  </ul>
</li>


    </ul>
  </header>
</div>

    
      <div id="main" class="fix-sidebar">
        
  <div class="sidebar">
    <ul class="main-menu">
      <li>
  <form id="search-form">
    <input type="text" id="search-query-sidebar" class="search-query st-default-search-input" aria-label="Search">
  </form>
</li>
<li class="nav-dropdown-container learn">
  <a class="nav-link">‚≠êÔ∏èJava</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><h4>Documentation</h4></li>
    <li>
      <ul>
        <li><a href="/java/oop/" class="nav-link">OOP</a></li>
        <li><a href="/v2/api/" class="nav-link">API</a></li>
        <li><a href="/v2/style-guide/" class="nav-link">Style Guide</a></li>
        <li><a href="/v2/examples/" class="nav-link">Examples</a></li>
        <li><a href="/v2/cookbook/" class="nav-link">Cookbook</a></li>
      </ul>
    </li>
    <li><h4>Video Courses</h4></li>
    <li>
      <ul>
        <li>
          <a href="https://www.vuemastery.com/courses/" class="nav-link" target="_blank" rel="sponsored noopener">
            Vue Mastery
          </a>
        </li>
        <li>
          <a
            href="https://vueschool.io/?friend=vuejs&utm_source=Vuejs.org&utm_medium=Link&utm_content=Navbar%20Dropdown"
            class="nav-link"
            target="_blank" rel="sponsored noopener"
          >
            Vue School
          </a>
        </li>
      </ul>
    </li>
  </ul>
</li>

<li class="nav-dropdown-container learn">
  <a class="nav-link">ÁΩëÁªú</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <!-- <li><h4>Documentation</h4></li> -->
    <li>
      <ul>
        <li><a href="/network">Review List</a></li>
        <li><a href="/network/tcp/">üî•TCP</a></li>
        <li><a href="/network/http/">HTTP</a></li>
        <li><a href="/network/ip/">IP</a></li>
      </ul>
    </li>
    <li><h4>Video Courses</h4></li>
    <li>
      <ul>
        <li>
          <a href="https://www.vuemastery.com/courses/" class="nav-link" target="_blank" rel="sponsored noopener">
            Vue Mastery
          </a>
        </li>
        <li>
          <a
            href="https://vueschool.io/?friend=vuejs&utm_source=Vuejs.org&utm_medium=Link&utm_content=Navbar%20Dropdown"
            class="nav-link"
            target="_blank" rel="sponsored noopener"
          >
            Vue School
          </a>
        </li>
      </ul>
    </li>
  </ul>
</li>

<li>
  <a href="/os/">Êìç‰ΩúÁ≥ªÁªü</a>
</li>
<li>
  <a href="/mysql/">üíºÊï∞ÊçÆÂ∫ì</a>
</li>
<li>
  <a target="_blank" rel="noopener" href="https://codetop.cc/#/home">‚ù§Ô∏èÁÆóÊ≥ï</a>
</li>
<li class="nav-dropdown-container resources">
  <a href="#" class="nav-link">Resources</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="/resources/partners.html" class="nav-link">Partners</a></li>
    <li><a href="/resources/themes.html" class="nav-link">Themes</a></li>
    <li><a href="https://github.com/vuejs/awesome-vue" class="nav-link" target="_blank" rel="noopener">Awesome Vue</a></li>
    <li><a href="https://awesomejs.dev/for/vue/" class="nav-link" target="_blank" rel="noopener">Browse packages for Vue</a></li>
  </ul>
</li>

<!-- <li>
  <a href="/partners" class="nav-link ">Partners</a>
</li> -->
<li class="nav-dropdown-container support-vue">
  <a href="/support-vuejs/" class="nav-link">Support Vue</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="/support-vuejs/#One-time-Donations" class="nav-link">One-time Donations</a></li>
    <li><a href="/support-vuejs/#Recurring-Pledges" class="nav-link">Recurring Pledges</a></li>
    <li><a href="https://vue.threadless.com" target="_blank" rel="noopener" class="nav-link">T-Shirt Shop</a></li>
  </ul>
</li>

<li class="nav-dropdown-container language">
  <a class="nav-link">Translations</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a target="_blank" rel="noopener" href="https://cn.vuejs.org/data/Java/java_collection.html" class="nav-link">‰∏≠Êñá</a></li>
    <li><a target="_blank" rel="noopener" href="https://jp.vuejs.org/data/Java/java_collection.html" class="nav-link">Êó•Êú¨Ë™û</a></li>
    <li><a target="_blank" rel="noopener" href="https://ru.vuejs.org/data/Java/java_collection.html" class="nav-link">–†—É—Å—Å–∫–∏–π</a></li>
    <li><a target="_blank" rel="noopener" href="https://kr.vuejs.org/data/Java/java_collection.html" class="nav-link">ÌïúÍµ≠Ïñ¥</a></li>
    <li><a target="_blank" rel="noopener" href="https://br.vuejs.org/data/Java/java_collection.html" class="nav-link">Portugu√™s</a></li>
    <li><a target="_blank" rel="noopener" href="https://fr.vuejs.org/data/Java/java_collection.html" class="nav-link">Fran√ßais</a></li>
    <li><a target="_blank" rel="noopener" href="https://vi.vuejs.org/data/Java/java_collection.html" class="nav-link">Ti·∫øng Vi·ªát</a></li>
    <li><a target="_blank" rel="noopener" href="https://es.vuejs.org/data/Java/java_collection.html" class="nav-link">Espa√±ol</a></li>
    <li><a target="_blank" rel="noopener" href="https://docs.vuejs.id/data/Java/java_collection.html" class="nav-link">Bahasa Indonesia</a></li>
  </ul>
</li>


    </ul>
  </div>

<div class="content  ">
  <p class="tip warning v3-warning">
    Welcome to yanliang's notes.
  </p>

  
  
  
    <p>[TOC]</p>
<h2 id="Java-ÂÆπÂô®ÊúâÂì™‰∫õÔºü-Âì™‰∫õÊòØÂêåÊ≠•ÂÆπÂô®Ôºü-Âì™‰∫õÊòØÂπ∂ÂèëÂÆπÂô®Ôºü"><a href="#Java-ÂÆπÂô®ÊúâÂì™‰∫õÔºü-Âì™‰∫õÊòØÂêåÊ≠•ÂÆπÂô®Ôºü-Âì™‰∫õÊòØÂπ∂ÂèëÂÆπÂô®Ôºü" class="headerlink" title="Java ÂÆπÂô®ÊúâÂì™‰∫õÔºü Âì™‰∫õÊòØÂêåÊ≠•ÂÆπÂô®Ôºü Âì™‰∫õÊòØÂπ∂ÂèëÂÆπÂô®Ôºü"></a>Java ÂÆπÂô®ÊúâÂì™‰∫õÔºü Âì™‰∫õÊòØÂêåÊ≠•ÂÆπÂô®Ôºü Âì™‰∫õÊòØÂπ∂ÂèëÂÆπÂô®Ôºü</h2><p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903954719965192">https://juejin.cn/post/6844903954719965192</a></p>
<p>Java ÂÆπÂô®‰∏ªË¶ÅÂàÜ‰∏§ÁßçÔºöCollection Âíå MapÔºåCollection ÊòØÁî®‰∫éÂ≠òÂÇ®ÂØπË±°ÁöÑÈõÜÂêàÔºåMap ÊòØÁî®‰∫éÂ≠òÂÇ®ÈîÆÂÄºÂØπÁöÑÈõÜÂêà„ÄÇ ÂÖ∂‰∏≠CollectionÂèàÂèØ‰ª•ÂàÜ‰∏∫List Âíå Set‰∏§ÁßçÈõÜÂêà„ÄÇ</p>
<ul>
<li><p>ÂÆûÁé∞ListÊé•Âè£ÁöÑÈõÜÂêà‰∏ªË¶ÅÊúâÔºöArrayListÔºåLinkedListÔºåVectorÔºàStackÔºâ</p>
</li>
<li><p>ÂÆûÁé∞SetÊé•Âè£ÁöÑÈõÜÂêà‰∏ªË¶ÅÊúâÔºöHashSetÔºåLinkedSetÔºåTreeSet</p>
</li>
<li><p>ÂÆûÁé∞mapÊé•Âè£ÁöÑÈõÜÂêà‰∏ªË¶ÅÊúâÔºöHashMapÔºåLinkedHashMapÔºåTreeMapÔºåHashTable</p>
</li>
</ul>
<p>ÂÖ∂‰∏≠Â±û‰∫é <strong>ÂêåÊ≠•ÂÆπÂô®</strong> ÁöÑÊúâÔºöVectorÔºåStackÔºåHashTableÔºåÂè¶Â§ñ Collections Êèê‰æõ‰∫Ü‰ª•‰∏ãÂá†ÁßçÊñπÊ≥ïÂèØ‰ª•Â∞ÜÈùûÂêåÊ≠•ÂÆπÂô®ËΩ¨Âåñ‰∏∫ÂêåÊ≠•ÂÆπÂô®</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">List list = Collections.synchronizedList(<span class="keyword">new</span> ArrayList());</span><br><span class="line">Set set = Collections.synchronizedSet(<span class="keyword">new</span> HashSet());</span><br><span class="line">Map map = Collections.synchronizedMap(<span class="keyword">new</span> HashMap());</span><br></pre></td></tr></table></figure>

<p><strong>Âπ∂ÂèëÂÆπÂô®</strong></p>
<ol>
<li><p>CopyOnWriteArrayList</p>
</li>
<li><p>CopyOnWriteArraySet</p>
</li>
<li><p>ConcurrentHashMap</p>
</li>
<li><p>ConcurrentSkipListMap</p>
</li>
<li><p>ConcurrentSkipListSet</p>
</li>
</ol>
<h2 id="ÈõÜÂêàÊ°ÜÊû∂ÊúâÂì™‰∫õ‰ºòÁÇπ"><a href="#ÈõÜÂêàÊ°ÜÊû∂ÊúâÂì™‰∫õ‰ºòÁÇπ" class="headerlink" title="ÈõÜÂêàÊ°ÜÊû∂ÊúâÂì™‰∫õ‰ºòÁÇπ"></a>ÈõÜÂêàÊ°ÜÊû∂ÊúâÂì™‰∫õ‰ºòÁÇπ</h2><ul>
<li>‰ΩøÁî®Ê†∏ÂøÉÈõÜÂêàÁ±ªÈôç‰ΩéÂºÄÂèëÊàêÊú¨ÔºåËÄåÈùûÂÆûÁé∞Êàë‰ª¨Ëá™Â∑±ÁöÑÈõÜÂêàÁ±ª„ÄÇ</li>
<li>ÈöèÁùÄ‰ΩøÁî®ÁªèËøá‰∏•Ê†ºÊµãËØïÁöÑÈõÜÂêàÊ°ÜÊû∂Á±ªÔºå‰ª£Á†ÅË¥®Èáè‰ºöÂæóÂà∞ÊèêÈ´ò„ÄÇ</li>
<li>ÈÄöËøá‰ΩøÁî® JDK ÈôÑÂ∏¶ÁöÑÈõÜÂêàÁ±ªÔºåÂèØ‰ª•Èôç‰Ωé‰ª£Á†ÅÁª¥Êä§ÊàêÊú¨„ÄÇ</li>
<li>Â§çÁî®ÊÄßÂíåÂèØÊìç‰ΩúÊÄß„ÄÇ</li>
</ul>
<h2 id="‰∏∫‰ªÄ‰πàÈõÜÂêàÁ±ªÊ≤°ÊúâÂÆûÁé∞-Cloneable-Âíå-Serializable-Êé•Âè£Ôºü"><a href="#‰∏∫‰ªÄ‰πàÈõÜÂêàÁ±ªÊ≤°ÊúâÂÆûÁé∞-Cloneable-Âíå-Serializable-Êé•Âè£Ôºü" class="headerlink" title="‰∏∫‰ªÄ‰πàÈõÜÂêàÁ±ªÊ≤°ÊúâÂÆûÁé∞ Cloneable Âíå Serializable Êé•Âè£Ôºü"></a>‰∏∫‰ªÄ‰πàÈõÜÂêàÁ±ªÊ≤°ÊúâÂÆûÁé∞ Cloneable Âíå Serializable Êé•Âè£Ôºü</h2><p>ÂÖãÈöÜÔºàcloningÔºâÊàñËÄÖÂ∫èÂàóÂåñÔºàserializationÔºâÁöÑËØ≠‰πâÂíåÂê´‰πâÊòØË∑üÂÖ∑‰ΩìÁöÑÂÆûÁé∞Áõ∏ÂÖ≥ÁöÑ„ÄÇÂõ†Ê≠§Â∫îËØ•Áî±ÈõÜÂêàÁ±ªÁöÑÂÖ∑‰ΩìÂÆûÁé∞Á±ªÊù•ÂÜ≥ÂÆöÂ¶Ç‰ΩïË¢´ÂÖãÈöÜÊàñËÄÖÂ∫èÂàóÂåñ</p>
<h3 id="ÈõÜÂêàÊ°ÜÊû∂‰∏≠ÁöÑÊ≥õÂûãÊúâ‰ªÄ‰πà‰ºòÁÇπÔºü"><a href="#ÈõÜÂêàÊ°ÜÊû∂‰∏≠ÁöÑÊ≥õÂûãÊúâ‰ªÄ‰πà‰ºòÁÇπÔºü" class="headerlink" title="ÈõÜÂêàÊ°ÜÊû∂‰∏≠ÁöÑÊ≥õÂûãÊúâ‰ªÄ‰πà‰ºòÁÇπÔºü"></a>ÈõÜÂêàÊ°ÜÊû∂‰∏≠ÁöÑÊ≥õÂûãÊúâ‰ªÄ‰πà‰ºòÁÇπÔºü</h3><p>Java5 ÂºïÂÖ•‰∫ÜÊ≥õÂûãÔºåÊâÄÊúâÁöÑÈõÜÂêàÊé•Âè£ÂíåÂÆûÁé∞ÈÉΩÂ§ßÈáèÂú∞‰ΩøÁî®ÂÆÉ„ÄÇÊ≥õÂûãÂÖÅËÆ∏Êàë‰ª¨‰∏∫ÈõÜÂêàÊèê‰æõ‰∏Ä‰∏™ÂèØ‰ª•ÂÆπÁ∫≥ÁöÑÂØπË±°Á±ªÂûã„ÄÇÂõ†Ê≠§ÔºåÂ¶ÇÊûú‰Ω†Ê∑ªÂä†ÂÖ∂ÂÆÉÁ±ªÂûãÁöÑ‰ªª‰ΩïÂÖÉÁ¥†ÔºåÂÆÉ‰ºöÂú®ÁºñËØëÊó∂Êä•Èîô„ÄÇËøôÈÅøÂÖç‰∫ÜÂú®ËøêË°åÊó∂Âá∫Áé∞ ClassCastExceptionÔºåÂõ†‰∏∫‰Ω†Â∞Ü‰ºöÂú®ÁºñËØëÊó∂ÂæóÂà∞Êä•Èîô‰ø°ÊÅØ„ÄÇ</p>
<p>Ê≥õÂûã‰πü‰ΩøÂæó‰ª£Á†ÅÊï¥Ê¥ÅÔºåÊàë‰ª¨‰∏çÈúÄË¶Å‰ΩøÁî®ÊòæÂºèËΩ¨Êç¢Âíå instanceOf Êìç‰ΩúÁ¨¶„ÄÇÂÆÉ‰πüÁªôËøêË°åÊó∂Â∏¶Êù•Â•ΩÂ§ÑÔºåÂõ†‰∏∫‰∏ç‰ºö‰∫ßÁîüÁ±ªÂûãÊ£ÄÊü•ÁöÑÂ≠óËäÇÁ†ÅÊåá‰ª§„ÄÇ</p>
<ul>
<li>ÁºñËØëÊó∂Á±ªÂûãÊ£ÄÊü•</li>
<li>‰Ωø‰ª£Á†ÅÊï¥Ê¥Å</li>
<li><strong>ËøêË°åÊó∂‰∏ç‰ºö‰∫ßÁîüÁ±ªÂûãÊ£ÄÊü•Áõ∏ÂÖ≥ÁöÑÂ≠óËäÇÁ†ÅÊåá‰ª§</strong></li>
</ul>
<h2 id="Collection-Âíå-Collections-ÁöÑÂå∫Âà´Ôºü"><a href="#Collection-Âíå-Collections-ÁöÑÂå∫Âà´Ôºü" class="headerlink" title="Collection Âíå Collections ÁöÑÂå∫Âà´Ôºü"></a>Collection Âíå Collections ÁöÑÂå∫Âà´Ôºü</h2><ul>
<li>Collection ÔºåÊòØÈõÜÂêàÁ±ªÁöÑ‰∏äÁ∫ßÊé•Âè£ÔºåÁªßÊâø‰∏é‰ªñÁöÑÊé•Âè£‰∏ªË¶ÅÊúâ Set ÂíåList „ÄÇ</li>
<li>Collections ÔºåÊòØÈíàÂØπÈõÜÂêàÁ±ªÁöÑ‰∏Ä‰∏™Â∑•ÂÖ∑Á±ªÔºåÂÆÉÊèê‰æõ‰∏ÄÁ≥ªÂàóÈùôÊÄÅÊñπÊ≥ïÂÆûÁé∞ÂØπÂêÑÁßçÈõÜÂêàÁöÑÊêúÁ¥¢„ÄÅÊéíÂ∫è„ÄÅÁ∫øÁ®ãÂÆâÂÖ®ÂåñÁ≠âÊìç‰Ωú„ÄÇ</li>
</ul>
<h2 id="‰ªÄ‰πàÊòØËø≠‰ª£Âô®-Iterator-Ôºü"><a href="#‰ªÄ‰πàÊòØËø≠‰ª£Âô®-Iterator-Ôºü" class="headerlink" title="‰ªÄ‰πàÊòØËø≠‰ª£Âô®(Iterator)Ôºü"></a>‰ªÄ‰πàÊòØËø≠‰ª£Âô®(Iterator)Ôºü</h2><p>Iterator Êé•Âè£Êèê‰æõ‰∫ÜÂæàÂ§öÂØπÈõÜÂêàÂÖÉÁ¥†ËøõË°åËø≠‰ª£ÁöÑÊñπÊ≥ï„ÄÇÊØè‰∏Ä‰∏™ÈõÜÂêàÁ±ªÈÉΩÂåÖÂê´‰∫ÜÂèØ‰ª•ËøîÂõûËø≠‰ª£Âô®ÂÆû‰æãÁöÑ Ëø≠‰ª£ÊñπÊ≥ï„ÄÇËø≠‰ª£Âô®ÂèØ‰ª•Âú®Ëø≠‰ª£ÁöÑËøáÁ®ã‰∏≠Âà†Èô§Â∫ïÂ±ÇÈõÜÂêàÁöÑÂÖÉÁ¥†„ÄÇ</p>
<h3 id="IteratorÂíåListIteratorÁöÑÂå∫Âà´ÊòØ‰ªÄ‰πàÔºü"><a href="#IteratorÂíåListIteratorÁöÑÂå∫Âà´ÊòØ‰ªÄ‰πàÔºü" class="headerlink" title="IteratorÂíåListIteratorÁöÑÂå∫Âà´ÊòØ‰ªÄ‰πàÔºü"></a>IteratorÂíåListIteratorÁöÑÂå∫Âà´ÊòØ‰ªÄ‰πàÔºü</h3><p>‰∏ãÈù¢ÂàóÂá∫‰∫Ü‰ªñ‰ª¨ÁöÑÂå∫Âà´Ôºö</p>
<ul>
<li>Iterator ÂèØÁî®Êù•ÈÅçÂéÜ Set Âíå List ÈõÜÂêàÔºå‰ΩÜÊòØ ListIterator Âè™ËÉΩÁî®Êù•ÈÅçÂéÜ List „ÄÇ</li>
<li>Iterator ÂØπÈõÜÂêàÂè™ËÉΩÊòØÂâçÂêëÈÅçÂéÜÔºåListIterator Êó¢ÂèØ‰ª•ÂâçÂêë‰πüÂèØ‰ª•ÂêéÂêë„ÄÇ</li>
<li>ListIterator ÂÆûÁé∞‰∫Ü Iterator Êé•Âè£ÔºåÂπ∂ÂåÖÂê´ÂÖ∂‰ªñÁöÑÂäüËÉΩÔºåÊØîÂ¶ÇÔºöÂ¢ûÂä†ÂÖÉÁ¥†ÔºåÊõøÊç¢ÂÖÉÁ¥†ÔºåËé∑ÂèñÂâç‰∏Ä‰∏™ÂíåÂêé‰∏Ä‰∏™ÂÖÉÁ¥†ÁöÑÁ¥¢ÂºïÔºåÁ≠âÁ≠â„ÄÇ</li>
</ul>
<h2 id="fail-fast"><a href="#fail-fast" class="headerlink" title="fail-fast"></a>fail-fast</h2><p>fail-fast Êú∫Âà∂ÊòØ<strong>JavaÈõÜÂêà</strong>(Collection)‰∏≠ÁöÑ‰∏ÄÁßç<strong>ÈîôËØØÊú∫Âà∂</strong>„ÄÇ Âú®Áî®Ëø≠‰ª£Âô®ÈÅçÂéÜ‰∏Ä‰∏™ÈõÜÂêàÂØπË±°Êó∂ÔºåÂ¶ÇÊûúÈÅçÂéÜËøáÁ®ã‰∏≠ÂØπÈõÜÂêàÂØπË±°ÁöÑÁªìÊûÑËøõË°å‰∫Ü‰øÆÊîπÔºàÂ¢ûÂä†„ÄÅÂà†Èô§ÔºâÔºåÂàô‰ºöÊäõÂá∫<strong>Concurrent Modification Exception</strong>ÔºàÂπ∂Âèë‰øÆÊîπÂºÇÂ∏∏Ôºâ„ÄÇ</p>
<p><strong>ÂéüÁêÜÔºö</strong>Ëø≠‰ª£Âô®Âú®ÈÅçÂéÜÊó∂Áõ¥Êé•ËÆøÈóÆÈõÜÂêà‰∏≠ÁöÑÂÜÖÂÆπÔºåÂπ∂‰∏îÂú®ÈÅçÂéÜËøáÁ®ã‰∏≠‰ΩøÁî®‰∏Ä‰∏™ modCount ÂèòÈáè„ÄÇÈõÜÂêàÂú®Ë¢´ÈÅçÂéÜÊúüÈó¥Â¶ÇÊûúÂÜÖÂÆπÂèëÁîüÂèòÂåñÔºåÂ∞±‰ºöÊîπÂèòmodCountÁöÑÂÄº„ÄÇÊØèÂΩìËø≠‰ª£Âô®‰ΩøÁî®hashNext()/next()ÈÅçÂéÜ‰∏ã‰∏Ä‰∏™ÂÖÉÁ¥†‰πãÂâçÔºåÈÉΩ‰ºöÊ£ÄÊµãmodCountÂèòÈáèÊòØÂê¶‰∏∫expectedmodCountÂÄºÔºåÊòØÁöÑËØùÂ∞±ËøîÂõûÈÅçÂéÜÔºõÂê¶ÂàôÊäõÂá∫ÂºÇÂ∏∏ÔºåÁªàÊ≠¢ÈÅçÂéÜ„ÄÇ<br>Ê≥®ÊÑèÔºöËøôÈáåÂºÇÂ∏∏ÁöÑÊäõÂá∫Êù°‰ª∂ÊòØÊ£ÄÊµãÂà∞ modCountÔºÅ=expectedmodCount Ëøô‰∏™Êù°‰ª∂„ÄÇÂ¶ÇÊûúÈõÜÂêàÂèëÁîüÂèòÂåñÊó∂‰øÆÊîπmodCountÂÄºÂàöÂ•ΩÂèàËÆæÁΩÆ‰∏∫‰∫ÜexpectedmodCountÂÄºÔºåÂàôÂºÇÂ∏∏‰∏ç‰ºöÊäõÂá∫„ÄÇÂõ†Ê≠§Ôºå‰∏çËÉΩ‰æùËµñ‰∫éËøô‰∏™ÂºÇÂ∏∏ÊòØÂê¶ÊäõÂá∫ËÄåËøõË°åÂπ∂ÂèëÊìç‰ΩúÁöÑÁºñÁ®ãÔºåËøô‰∏™ÂºÇÂ∏∏Âè™Âª∫ËÆÆÁî®‰∫éÊ£ÄÊµãÂπ∂Âèë‰øÆÊîπÁöÑbug„ÄÇ<br>Âú∫ÊôØÔºöjava.utilÂåÖ‰∏ãÁöÑÈõÜÂêàÁ±ªÈÉΩÊòØÂø´ÈÄüÂ§±Ë¥•ÁöÑÔºå‰∏çËÉΩÂú®Â§öÁ∫øÁ®ã‰∏ãÂèëÁîüÂπ∂Âèë‰øÆÊîπÔºàËø≠‰ª£ËøáÁ®ã‰∏≠Ë¢´‰øÆÊîπÔºâ„ÄÇ</p>
<p><strong>Â¶Ç‰ΩïÈÅøÂÖçfail-fastÊäõÂºÇÂ∏∏Ôºü</strong></p>
<p>1.Â¶ÇÊûúÈùûË¶ÅÂú®ÈÅçÂéÜÁöÑÊó∂ÂÄô‰øÆÊîπÈõÜÂêàÔºåÈÇ£‰πàÂª∫ËÆÆÁî®Ëø≠‰ª£Âô®ÁöÑremoveÁ≠âÊñπÊ≥ïÔºåËÄå‰∏çÊòØÁî®ÈõÜÂêàÁöÑremoveÁ≠âÊñπÊ≥ï„ÄÇ(ËÄÅÂÆûÈÅµÂÆàÈòøÈáåÂ∑¥Â∑¥javaÂºÄÂèëËßÑËåÉ‚Ä¶‚Ä¶)</p>
<p>2.Â¶ÇÊûúÊòØÂπ∂ÂèëÁöÑÁéØÂ¢ÉÔºåÈÇ£ËøòË¶ÅÂØπIteratorÂØπË±°Âä†ÈîÅÔºõ‰πüÂèØ‰ª•Áõ¥Êé•‰ΩøÁî®Collections.synchronizedList„ÄÇ</p>
<p>3.CopyOnWriteArrayListÔºàÈááÁî®fail-safeÔºâ</p>
<p><strong>ÂÆâÂÖ®Â§±Ë¥•Ôºàfail‚ÄîsafeÔºâ</strong><br>ÈááÁî®ÂÆâÂÖ®Â§±Ë¥•Êú∫Âà∂ÁöÑÈõÜÂêàÂÆπÂô®ÔºåÂú®ÈÅçÂéÜÊó∂‰∏çÊòØÁõ¥Êé•Âú®ÈõÜÂêàÂÜÖÂÆπ‰∏äËÆøÈóÆÁöÑÔºåËÄåÊòØÂÖàÂ§çÂà∂ÂéüÊúâÈõÜÂêàÂÜÖÂÆπÔºåÂú®Êã∑Ë¥ùÁöÑÈõÜÂêà‰∏äËøõË°åÈÅçÂéÜ„ÄÇ</p>
<p><strong>ÂéüÁêÜÔºö</strong>Áî±‰∫éËø≠‰ª£Êó∂ÊòØÂØπÂéüÈõÜÂêàÁöÑÊã∑Ë¥ùËøõË°åÈÅçÂéÜÔºåÊâÄ‰ª•Âú®ÈÅçÂéÜËøáÁ®ã‰∏≠ÂØπÂéüÈõÜÂêàÊâÄ‰ΩúÁöÑ‰øÆÊîπÂπ∂‰∏çËÉΩË¢´Ëø≠‰ª£Âô®Ê£ÄÊµãÂà∞ÔºåÊâÄ‰ª•‰∏ç‰ºöËß¶ÂèëConcurrent Modification Exception„ÄÇËôΩÁÑ∂fail-safe‰∏ç‰ºöÊäõÂá∫ÂºÇÂ∏∏Ôºå‰ΩÜÂ≠òÂú®‰ª•‰∏ãÁº∫ÁÇπ</p>
<ol>
<li>Â§çÂà∂Êó∂ÈúÄË¶ÅÈ¢ùÂ§ñÁöÑÁ©∫Èó¥ÂíåÊó∂Èó¥‰∏äÁöÑÂºÄÈîÄ„ÄÇ</li>
<li>‰∏çËÉΩ‰øùËØÅÈÅçÂéÜÁöÑÊòØÊúÄÊñ∞ÂÜÖÂÆπ„ÄÇ</li>
</ol>
<p>Âú∫ÊôØÔºöjava.util.concurrentÂåÖ‰∏ãÁöÑÂÆπÂô®ÈÉΩÊòØÂÆâÂÖ®Â§±Ë¥•ÔºåÂèØ‰ª•Âú®Â§öÁ∫øÁ®ã‰∏ãÂπ∂Âèë‰ΩøÁî®ÔºåÂπ∂Âèë‰øÆÊîπ„ÄÇ</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/Kato_op/article/details/80356618">https://blog.csdn.net/Kato_op/article/details/80356618</a></p>
<h2 id="Âø´ÈÄüÂ§±Ë¥•-fail-fast-ÂíåÂÆâÂÖ®Â§±Ë¥•-fail-safe-ÁöÑÂå∫Âà´ÊòØ‰ªÄ‰πàÔºü"><a href="#Âø´ÈÄüÂ§±Ë¥•-fail-fast-ÂíåÂÆâÂÖ®Â§±Ë¥•-fail-safe-ÁöÑÂå∫Âà´ÊòØ‰ªÄ‰πàÔºü" class="headerlink" title="Âø´ÈÄüÂ§±Ë¥•(fail-fast)ÂíåÂÆâÂÖ®Â§±Ë¥•(fail-safe)ÁöÑÂå∫Âà´ÊòØ‰ªÄ‰πàÔºü"></a>Âø´ÈÄüÂ§±Ë¥•(fail-fast)ÂíåÂÆâÂÖ®Â§±Ë¥•(fail-safe)ÁöÑÂå∫Âà´ÊòØ‰ªÄ‰πàÔºü</h2><p>Iterator ÁöÑÂÆâÂÖ®Â§±Ë¥•ÊòØÂü∫‰∫éÂØπÂ∫ïÂ±ÇÈõÜÂêàÂÅöÊã∑Ë¥ùÔºåÂõ†Ê≠§ÔºåÂÆÉ‰∏çÂèóÊ∫êÈõÜÂêà‰∏ä‰øÆÊîπÁöÑÂΩ±Âìç„ÄÇ</p>
<p>java.util ÂåÖ‰∏ãÈù¢ÁöÑÊâÄÊúâÁöÑÈõÜÂêàÁ±ªÈÉΩÊòØÂø´ÈÄüÂ§±Ë¥•ÁöÑÔºåËÄå java.util.concurrent ÂåÖ‰∏ãÈù¢ÁöÑÊâÄÊúâÁöÑÁ±ªÈÉΩÊòØÂÆâÂÖ®Â§±Ë¥•ÁöÑ„ÄÇÂø´ÈÄüÂ§±Ë¥•ÁöÑËø≠‰ª£Âô®‰ºöÊäõÂá∫ ConcurrentModificationException ÂºÇÂ∏∏ÔºåËÄåÂÆâÂÖ®Â§±Ë¥•ÁöÑËø≠‰ª£Âô®Ê∞∏Ëøú‰∏ç‰ºöÊäõÂá∫ËøôÊ†∑ÁöÑÂºÇÂ∏∏„ÄÇ</p>
<h2 id="Enumeration-Êé•Âè£Âíå-Iterator-Êé•Âè£ÁöÑÂå∫Âà´ÊúâÂì™‰∫õÔºü"><a href="#Enumeration-Êé•Âè£Âíå-Iterator-Êé•Âè£ÁöÑÂå∫Âà´ÊúâÂì™‰∫õÔºü" class="headerlink" title="Enumeration Êé•Âè£Âíå Iterator Êé•Âè£ÁöÑÂå∫Âà´ÊúâÂì™‰∫õÔºü"></a>Enumeration Êé•Âè£Âíå Iterator Êé•Âè£ÁöÑÂå∫Âà´ÊúâÂì™‰∫õÔºü</h2><p>Enumeration ÈÄüÂ∫¶ÊòØ Iterator ÁöÑ2ÂÄçÔºåÂêåÊó∂Âç†Áî®Êõ¥Â∞ëÁöÑÂÜÖÂ≠ò„ÄÇ‰ΩÜÊòØÔºåIterator ËøúËøúÊØî Enumeration ÂÆâÂÖ®ÔºåÂõ†‰∏∫ÂÖ∂‰ªñÁ∫øÁ®ã‰∏çËÉΩÂ§ü‰øÆÊîπÊ≠£Âú®Ë¢´ iterator ÈÅçÂéÜÁöÑÈõÜÂêàÈáåÈù¢ÁöÑÂØπË±°„ÄÇÂêåÊó∂ÔºåIterator ÂÖÅËÆ∏Ë∞ÉÁî®ËÄÖÂà†Èô§Â∫ïÂ±ÇÈõÜÂêàÈáåÈù¢ÁöÑÂÖÉÁ¥†ÔºåËøôÂØπ Enumeration Êù•ËØ¥ÊòØ‰∏çÂèØËÉΩÁöÑ„ÄÇ</p>
<h2 id="comparable-Âíå-Comparator-ÁöÑÂå∫Âà´"><a href="#comparable-Âíå-Comparator-ÁöÑÂå∫Âà´" class="headerlink" title="comparable Âíå Comparator ÁöÑÂå∫Âà´"></a>comparable Âíå Comparator ÁöÑÂå∫Âà´</h2><p>ComparableÂíåComparatorÈÉΩÊòØÁî®Êù•ÂÆûÁé∞ÈõÜÂêà‰∏≠ÂÖÉÁ¥†ÁöÑÊØîËæÉ„ÄÅÊéíÂ∫èÁöÑ„ÄÇ</p>
<ul>
<li><p>ComparableÊòØÂú®ÈõÜÂêàÂÜÖÈÉ®ÂÆö‰πâÁöÑÊñπÊ≥ïÂÆûÁé∞ÁöÑÊéíÂ∫èÔºå‰Ωç‰∫éjava.lang ‰∏ã„ÄÇ</p>
</li>
<li><p>ComparatorÊòØÂú®ÈõÜÂêàÂ§ñÈÉ®ÂÆûÁé∞ÁöÑÊéíÂ∫èÔºå‰Ωç‰∫éjava.util ‰∏ã„ÄÇ</p>
</li>
</ul>
<p>ComparableÊòØ‰∏Ä‰∏™ÂØπË±°Êú¨Ë∫´Â∞±Â∑≤ÁªèÊîØÊåÅËá™ÊØîËæÉÊâÄÈúÄË¶ÅÂÆûÁé∞ÁöÑÊé•Âè£ÔºåÂ¶ÇString„ÄÅIntegerËá™Â∑±Â∞±ÂÆûÁé∞‰∫ÜComparableÊé•Âè£ÔºåÂèØÂÆåÊàêÊØîËæÉÂ§ßÂ∞èÊìç‰Ωú„ÄÇËá™ÂÆö‰πâÁ±ªË¶ÅÂú®Âä†ÂÖ•listÂÆπÂô®‰∏≠ÂêéËÉΩÂ§üÊéíÂ∫èÔºå‰πüÂèØ‰ª•ÂÆûÁé∞ComparableÊé•Âè£ÔºåÂú®Áî®CollectionsÁ±ªÁöÑsortÊñπÊ≥ïÊéíÂ∫èÊó∂Ëã•‰∏çÊåáÂÆöComparatorÔºåÈÇ£Â∞±‰ª•Ëá™ÁÑ∂È°∫Â∫èÊéíÂ∫è„ÄÇÊâÄË∞ìËá™ÁÑ∂È°∫Â∫èÂ∞±ÊòØÂÆûÁé∞ComparableÊé•Âè£ËÆæÂÆöÁöÑÊéíÂ∫èÊñπÂºè„ÄÇ</p>
<p>ComparatorÊòØ‰∏Ä‰∏™‰∏ìÁî®ÁöÑÊØîËæÉÂô®ÔºåÂΩìËøô‰∏™ÂØπË±°‰∏çÊîØÊåÅËá™ÊØîËæÉÊàñËÄÖËá™ÊØîËæÉÂáΩÊï∞‰∏çËÉΩÊª°Ë∂≥Ë¶ÅÊ±ÇÊó∂ÔºåÂèØÂÜô‰∏Ä‰∏™ÊØîËæÉÂô®Êù•ÂÆåÊàê‰∏§‰∏™ÂØπË±°‰πãÈó¥Â§ßÂ∞èÁöÑÊØîËæÉ„ÄÇComparator‰ΩìÁé∞‰∫Ü‰∏ÄÁßçÁ≠ñÁï•Ê®°Âºè(strategy design pattern)ÔºåÂ∞±ÊòØ‰∏çÊîπÂèòÂØπË±°Ëá™Ë∫´ÔºåËÄåÁî®‰∏Ä‰∏™Á≠ñÁï•ÂØπË±°(strategy object)Êù•ÊîπÂèòÂÆÉÁöÑË°å‰∏∫„ÄÇÊÄªËÄåË®Ä‰πãComparableÊòØËá™Â∑≤ÂÆåÊàêÊØîËæÉÔºåComparatorÊòØÂ§ñÈÉ®Á®ãÂ∫èÂÆûÁé∞ÊØîËæÉ„ÄÇ</p>
<p>ÈìæÊé•Ôºö<a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903603258261518">https://juejin.cn/post/6844903603258261518</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line">ArrayList&lt;Integer&gt; arrayList = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line">arrayList.add(-<span class="number">1</span>);</span><br><span class="line">arrayList.add(<span class="number">3</span>);</span><br><span class="line">arrayList.add(<span class="number">3</span>);</span><br><span class="line">arrayList.add(-<span class="number">5</span>);</span><br><span class="line">arrayList.add(<span class="number">7</span>);</span><br><span class="line">arrayList.add(<span class="number">4</span>);</span><br><span class="line">arrayList.add(-<span class="number">9</span>);</span><br><span class="line">arrayList.add(-<span class="number">7</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;ÂéüÂßãÊï∞ÁªÑ:&quot;</span>);</span><br><span class="line">System.out.println(arrayList);</span><br><span class="line"><span class="comment">// void reverse(List list)ÔºöÂèçËΩ¨</span></span><br><span class="line">Collections.reverse(arrayList);</span><br><span class="line">System.out.println(<span class="string">&quot;Collections.reverse(arrayList):&quot;</span>);</span><br><span class="line">System.out.println(arrayList);</span><br><span class="line"></span><br><span class="line"><span class="comment">// void sort(List list),ÊåâËá™ÁÑ∂ÊéíÂ∫èÁöÑÂçáÂ∫èÊéíÂ∫è</span></span><br><span class="line">Collections.sort(arrayList);</span><br><span class="line">System.out.println(<span class="string">&quot;Collections.sort(arrayList):&quot;</span>);</span><br><span class="line">System.out.println(arrayList);</span><br><span class="line"><span class="comment">// ÂÆöÂà∂ÊéíÂ∫èÁöÑÁî®Ê≥ï</span></span><br><span class="line">Collections.sort(arrayList, <span class="keyword">new</span> Comparator&lt;Integer&gt;() &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Integer o1, Integer o2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> o2.compareTo(o1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">System.out.println(<span class="string">&quot;ÂÆöÂà∂ÊéíÂ∫èÂêéÔºö&quot;</span>);</span><br><span class="line">System.out.println(arrayList);</span><br><span class="line"></span><br><span class="line">OutPut :</span><br><span class="line"></span><br><span class="line">ÂéüÂßãÊï∞ÁªÑ:</span><br><span class="line">[-<span class="number">1</span>, <span class="number">3</span>, <span class="number">3</span>, -<span class="number">5</span>, <span class="number">7</span>, <span class="number">4</span>, -<span class="number">9</span>, -<span class="number">7</span>]</span><br><span class="line">Collections.reverse(arrayList):</span><br><span class="line">[-<span class="number">7</span>, -<span class="number">9</span>, <span class="number">4</span>, <span class="number">7</span>, -<span class="number">5</span>, <span class="number">3</span>, <span class="number">3</span>, -<span class="number">1</span>]</span><br><span class="line">Collections.sort(arrayList):</span><br><span class="line">[-<span class="number">9</span>, -<span class="number">7</span>, -<span class="number">5</span>, -<span class="number">1</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">7</span>]</span><br><span class="line">ÂÆöÂà∂ÊéíÂ∫èÂêéÔºö</span><br><span class="line">[<span class="number">7</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">3</span>, -<span class="number">1</span>, -<span class="number">5</span>, -<span class="number">7</span>, -<span class="number">9</span>]</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="comment">// personÂØπË±°Ê≤°ÊúâÂÆûÁé∞ComparableÊé•Âè£ÔºåÊâÄ‰ª•ÂøÖÈ°ªÂÆûÁé∞ÔºåËøôÊ†∑Êâç‰∏ç‰ºöÂá∫ÈîôÔºåÊâçÂèØ‰ª•‰Ωøtreemap‰∏≠ÁöÑÊï∞ÊçÆÊåâÈ°∫Â∫èÊéíÂàó</span></span><br><span class="line"><span class="comment">// ÂâçÈù¢‰∏Ä‰∏™‰æãÂ≠êÁöÑStringÁ±ªÂ∑≤ÁªèÈªòËÆ§ÂÆûÁé∞‰∫ÜComparableÊé•Âè£ÔºåËØ¶ÁªÜÂèØ‰ª•Êü•ÁúãStringÁ±ªÁöÑAPIÊñáÊ°£ÔºåÂè¶Â§ñÂÖ∂‰ªñ</span></span><br><span class="line"><span class="comment">// ÂÉèIntegerÁ±ªÁ≠âÈÉΩÂ∑≤ÁªèÂÆûÁé∞‰∫ÜComparableÊé•Âè£ÔºåÊâÄ‰ª•‰∏çÈúÄË¶ÅÂè¶Â§ñÂÆûÁé∞‰∫Ü</span></span><br><span class="line"><span class="keyword">public</span>  <span class="class"><span class="keyword">class</span> <span class="title">Person</span> <span class="keyword">implements</span> <span class="title">Comparable</span>&lt;<span class="title">Person</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name, <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * TÈáçÂÜôcompareToÊñπÊ≥ïÂÆûÁé∞ÊåâÂπ¥ÈæÑÊù•ÊéíÂ∫è</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Person o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.age &gt; o.getAge()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.age &lt; o.getAge()) &#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        TreeMap&lt;Person, String&gt; pdata = <span class="keyword">new</span> TreeMap&lt;Person, String&gt;();</span><br><span class="line">        pdata.put(<span class="keyword">new</span> Person(<span class="string">&quot;Âº†‰∏â&quot;</span>, <span class="number">30</span>), <span class="string">&quot;zhangsan&quot;</span>);</span><br><span class="line">        pdata.put(<span class="keyword">new</span> Person(<span class="string">&quot;ÊùéÂõõ&quot;</span>, <span class="number">20</span>), <span class="string">&quot;lisi&quot;</span>);</span><br><span class="line">        pdata.put(<span class="keyword">new</span> Person(<span class="string">&quot;Áéã‰∫î&quot;</span>, <span class="number">10</span>), <span class="string">&quot;wangwu&quot;</span>);</span><br><span class="line">        pdata.put(<span class="keyword">new</span> Person(<span class="string">&quot;Â∞èÁ∫¢&quot;</span>, <span class="number">5</span>), <span class="string">&quot;xiaohong&quot;</span>);</span><br><span class="line">        <span class="comment">// ÂæóÂà∞keyÁöÑÂÄºÁöÑÂêåÊó∂ÂæóÂà∞keyÊâÄÂØπÂ∫îÁöÑÂÄº</span></span><br><span class="line">        Set&lt;Person&gt; keys = pdata.keySet();</span><br><span class="line">        <span class="keyword">for</span> (Person key : keys) &#123;</span><br><span class="line">            System.out.println(key.getAge() + <span class="string">&quot;-&quot;</span> + key.getName());</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">OutPut :</span><br><span class="line"></span><br><span class="line"><span class="number">5</span>-Â∞èÁ∫¢</span><br><span class="line"><span class="number">10</span>-Áéã‰∫î</span><br><span class="line"><span class="number">20</span>-ÊùéÂõõ</span><br><span class="line"><span class="number">30</span>-Âº†‰∏â</span><br></pre></td></tr></table></figure>

<h2 id="List"><a href="#List" class="headerlink" title="List"></a>List</h2><h3 id="ArrayList"><a href="#ArrayList" class="headerlink" title="ArrayList"></a>ArrayList</h3><p><strong>ÈªòËÆ§ÂàùÂßãÂÆπÈáè‰∏∫0ÔºàÊó†ÂèÇÊûÑÈÄ†ÔºåÊáíÂàùÂßãÂåñÔºåÈ¶ñÊ¨°ÂàùÂßãÂåñ10ÔºâÔºå Êâ©ÂÆπÊó∂ÔºåÊâ©ÂÆπÂ§ßÂ∞è‰∏∫‰πãÂâçÁöÑ1.5ÂÄç</strong></p>
<p>ArrayList ÊòØ List Êé•Âè£ÁöÑÂèØÂèòÊï∞ÁªÑÁöÑÂÆûÁé∞„ÄÇÂ∫ïÂ±Ç‰ΩøÁî® Object[] Êù•Â≠òÂÇ®ÂØπË±°„ÄÇÂêåÊó∂ÊòØÁ∫øÁ®ã‰∏çÂÆâÂÖ®ÁöÑÈõÜÂêà„ÄÇ</p>
<p>ÊØè‰∏™ArrayListÂÆû‰æãÈÉΩÊúâ‰∏Ä‰∏™ÂÆπÈáèÔºåËØ•ÂÆπÈáèÊòØÊåáÁî®Êù•Â≠òÂÇ®ÂàóË°®ÂÖÉÁ¥†ÁöÑÊï∞ÁªÑÁöÑÂ§ßÂ∞è„ÄÇÈöèÁùÄÂêëArrayList‰∏≠‰∏çÊñ≠Ê∑ªÂä†ÂÖÉÁ¥†ÔºåÂÖ∂ÂÆπÈáè‰πüËá™Âä®Â¢ûÈïø„ÄÇËá™Âä®Â¢ûÈïø‰ºöÂ∏¶Êù•Êï∞ÊçÆÂêëÊñ∞Êï∞ÁªÑÁöÑÈáçÊñ∞Êã∑Ë¥ùÔºåÂõ†Ê≠§ÔºåÂ¶ÇÊûúÂèØÈ¢ÑÁü•Êï∞ÊçÆÈáèÁöÑÂ§ßÂ∞èÔºåÂ∞±ÂèØÂú®ÊûÑÈÄ†ArrayListÂÆû‰æãÊó∂ÊåáÂÆöÂÖ∂ÂÆπÈáè„ÄÇ</p>
<p>Âú®Ê∑ªÂä†Â§ßÈáèÂÖÉÁ¥†ÂâçÔºåÂ∫îÁî®Á®ãÂ∫è‰πüÂèØ‰ª•‰ΩøÁî®ensureCapacityÊìç‰ΩúÊù•Â¢ûÂä†ArrayListÂÆû‰æãÁöÑÂÆπÈáèÔºåËøôÂèØ‰ª•ÂáèÂ∞ëÈÄíÂ¢ûÂºèÂÜçÂàÜÈÖçÁöÑÊï∞Èáè„ÄÇ</p>
<ul>
<li><p>ÁªßÊâøËá™ AbstractListÔºåËøôÊòØ‰∏Ä‰∏™ÊäΩË±°Á±ªÂØπ‰∏Ä‰∫õÂü∫Á°ÄÁöÑlistÊìç‰ΩúÂÅö‰∫Ü‰∏Ä‰∫õÂ∞ÅË£Ö„ÄÇ</p>
</li>
<li><p>ÂÆûÁé∞‰∫ÜRandomAccess Ê†áËÆ∞Êé•Âè£ÔºåË°®ÊòéÂèØ‰ª•ÂÆûÁé∞Âø´ÈÄüÈöèÊú∫ËÆøÈóÆ„ÄÇ</p>
</li>
<li><p>ÂÆûÁé∞‰∫ÜCloneableÊé•Âè£ÁöÑÂÆûÁé∞Ë°®Á§∫ËØ•ÂÆπÂô®ÂÖ∑ÊúâCloneÂáΩÊï∞Êìç‰ΩúÔºåSerializableÊòØÂ∫èÂàóÂåñ„ÄÇ</p>
</li>
</ul>
<h4 id="RandomAccess-Êé•Âè£ÁöÑ‰ΩúÁî®"><a href="#RandomAccess-Êé•Âè£ÁöÑ‰ΩúÁî®" class="headerlink" title="RandomAccess Êé•Âè£ÁöÑ‰ΩúÁî®"></a>RandomAccess Êé•Âè£ÁöÑ‰ΩúÁî®</h4><p>**<code>ArrayList</code> <strong>ÂÆûÁé∞‰∫Ü</strong> <code>RandomAccess</code> <strong>Êé•Âè£ÔºåÂ∞±Ë°®Êòé‰∫Ü‰ªñÂÖ∑ÊúâÂø´ÈÄüÈöèÊú∫ËÆøÈóÆÂäüËÉΩ„ÄÇ</strong> <code>RandomAccess</code> <strong>Êé•Âè£Âè™ÊòØÊ†áËØÜÔºåÂπ∂‰∏çÊòØËØ¥</strong> <code>ArrayList</code> <strong>ÂÆûÁé∞</strong> <code>RandomAccess</code>  Êé•Âè£ÊâçÂÖ∑ÊúâÂø´ÈÄüÈöèÊú∫ËÆøÈóÆÂäüËÉΩÁöÑÔºÅ</p>
<h4 id="‰∏∫‰ªÄ‰πàArrayListËá™Âä®ÂÆπÈáèÊâ©ÂÖÖÈÄâÊã©Êâ©ÂÖÖ1-5ÂÄçÔºü"><a href="#‰∏∫‰ªÄ‰πàArrayListËá™Âä®ÂÆπÈáèÊâ©ÂÖÖÈÄâÊã©Êâ©ÂÖÖ1-5ÂÄçÔºü" class="headerlink" title="‰∏∫‰ªÄ‰πàArrayListËá™Âä®ÂÆπÈáèÊâ©ÂÖÖÈÄâÊã©Êâ©ÂÖÖ1.5ÂÄçÔºü"></a>‰∏∫‰ªÄ‰πàArrayListËá™Âä®ÂÆπÈáèÊâ©ÂÖÖÈÄâÊã©Êâ©ÂÖÖ1.5ÂÄçÔºü</h4><p>ËøôÁßçÁÆóÊ≥ïÊûÑÈÄ†Âá∫Êù•ÁöÑÊñ∞ÁöÑÊï∞ÁªÑÈïøÂ∫¶ÁöÑÂ¢ûÈáèÈÉΩ‰ºöÊØî‰∏ä‰∏ÄÊ¨°Â§ß( ËÄå‰∏îÊòØË∂äÊù•Ë∂äÂ§ß) ÔºåÈÅøÂÖçÈ¢ëÁπÅnewInstance ÁöÑÊÉÖÂÜµ„ÄÇ</p>
<h4 id="‰∏∫‰ªÄ‰πàArrayList-‰∏çÈÄÇÂêàÈ¢ëÁπÅÊèíÂÖ•ÂíåÂà†Èô§Êìç‰ΩúÔºü"><a href="#‰∏∫‰ªÄ‰πàArrayList-‰∏çÈÄÇÂêàÈ¢ëÁπÅÊèíÂÖ•ÂíåÂà†Èô§Êìç‰ΩúÔºü" class="headerlink" title="‰∏∫‰ªÄ‰πàArrayList ‰∏çÈÄÇÂêàÈ¢ëÁπÅÊèíÂÖ•ÂíåÂà†Èô§Êìç‰ΩúÔºü"></a>‰∏∫‰ªÄ‰πàArrayList ‰∏çÈÄÇÂêàÈ¢ëÁπÅÊèíÂÖ•ÂíåÂà†Èô§Êìç‰ΩúÔºü</h4><p>ArrayList‰∏≠ÁªèÂ∏∏‰ºöË∞ÉÁî® System.arraycopy Ëøô‰∏™ÊïàÁéáÂæà‰ΩéÁöÑÊìç‰ΩúÊù•Â§çÂà∂Êï∞ÁªÑÔºåÊâÄ‰ª•ÂØºËá¥ArrayListÂú®ÊèíÂÖ•ÂíåÂà†Èô§Êìç‰Ωú‰∏≠ÊïàÁéá‰∏çÈ´ò„ÄÇ</p>
<h4 id="jdk1-6‰∏≠Êâ©ÂÆπÁÆóÊ≥ïÁöÑÁº∫Èô∑"><a href="#jdk1-6‰∏≠Êâ©ÂÆπÁÆóÊ≥ïÁöÑÁº∫Èô∑" class="headerlink" title="jdk1.6‰∏≠Êâ©ÂÆπÁÆóÊ≥ïÁöÑÁº∫Èô∑"></a>jdk1.6‰∏≠Êâ©ÂÆπÁÆóÊ≥ïÁöÑÁº∫Èô∑</h4><p>ÔºàÁî±‰∫éjdk1.7Âíåjdk1.8Âú®Êâ©ÂÆπÁÆóÊ≥ïÊñπÈù¢Â∑ÆÂà´‰∏çÂ§ßÔºåÊâÄ‰ª•‰∏ãÈù¢Ê≤°Êúâ‰∏•Ê†ºÂå∫ÂàÜÔºâ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">jdk1<span class="number">.6</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ensureCapacity</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;  </span><br><span class="line">    modCount++;  </span><br><span class="line">    <span class="keyword">int</span> oldCapacity = elementData.length;  </span><br><span class="line">    <span class="keyword">if</span> (minCapacity &gt; oldCapacity) &#123;  </span><br><span class="line">        Object oldData[] = elementData;  </span><br><span class="line">        <span class="keyword">int</span> newCapacity = (oldCapacity * <span class="number">3</span>)/<span class="number">2</span> + <span class="number">1</span>;  </span><br><span class="line">        <span class="keyword">if</span> (newCapacity &lt; minCapacity)  </span><br><span class="line">            newCapacity = minCapacity;  </span><br><span class="line">        <span class="comment">// minCapacity is usually close to size, so this is a win:  </span></span><br><span class="line">        elementData = Arrays.copyOf(elementData, newCapacity);  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>‰ªé‰∏äÈù¢ÁöÑ‰ª£Á†ÅÂèØ‰ª•ÁúãÂá∫jdk1.6ÁöÑensureCapacityÊñπÊ≥ïÂè™ÊòØÁÆÄÂçïËøõË°å‰∫ÜÈÄªËæë‰∏äÁöÑÊìç‰ΩúÔºåÊ≤°ÊúâËøáÂ§öËÄÉËôëintÂûãÊ∫¢Âá∫ÁöÑÈóÆÈ¢òÔºå‰ªé1.7ÂºÄÂßãÂØπËøô‰∏™ËøõË°å‰∫ÜÂÆåÂñÑ„ÄÇ</p>
<p>ËÄå‰∏îÊ≤°ËÄÉËôëÂÖ•ÂèÇminCapacityÂèØËÉΩÂõ†‰∏∫intÊ∫¢Âá∫Âèò‰∏∫Ë¥üÊï∞„ÄÇËøô‰∏™ÊñπÊ≥ïÂèØ‰ª•Â§ñÈÉ®ÊâãÂä®Ë∞ÉÁî®ÔºåÊâãÂä®Êâ©ÂÆπ‰º†ÂÖ•Ë¥üÊï∞Ëøô‰∏™ËÇØÂÆöÊòØÂ∫îËØ•Êã¶Êà™ÊéâÁöÑ„ÄÇ‰ΩÜÊòØËá™Âä®Êâ©ÂÆπ‰ºöÂõ†‰∏∫intÊ∫¢Âá∫‰∫ßÁîüË¥üÊï∞ÔºåÁ¢∞Âà∞ËøôÁßçÊÉÖÂÜµÊó∂Â∫îËØ•ÁâπÊÆäÂ§ÑÁêÜÔºåËÄå‰∏çÊòØ‰ªÄ‰πàÈÉΩ‰∏çÂÅöÔºåÁ≠âÁùÄÂêéÈù¢ÊäõÂá∫‰∏Ä‰∏™ArrayIndexOutOfBoundsException„ÄÇ</p>
<p>ËøòÊúâÂ∞±ÊòØ‰∏ãÈù¢ËøôÂè•‰ª£Á†Å‰ºöÈÄ†ÊàêËøáÊó©Ê∫¢Âá∫</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> newCapacity = (oldCapacity * <span class="number">3</span>)/<span class="number">2</span> + <span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<p>ËôΩÁÑ∂‰∏äÈù¢ËøôË°å‰ª£Á†ÅÂíå1.7ÂºÄÂßãÁöÑoldCapacity + (oldCapacity &gt;&gt; 1) Â∑Æ‰∏çÂ§öÔºåÈÉΩÊòØÁõ∏ÂΩì‰∫é1.5ÂÄçÔºå‰ΩÜÂÆûÈôÖ‰∏äÊòØÊúâÂå∫Âà´ÁöÑ„ÄÇ</p>
<p><strong>ËøôÈáå‰∏ªË¶ÅÊúâ‰∏§‰∏™Âå∫Âà´</strong></p>
<p><strong>Á¨¨‰∏Ä‰∏™Âå∫Âà´</strong>ÊòØjdk1.6ÁöÑ‰πòÈô§ËøêÁÆóÁöÑÊï∞Â≠¶ÁªìÊûúÊØîÂêéÈù¢‰∏Ä‰∏™Â§ß1ÊØîÂ¶ÇoldCapacity=10Ôºå1.6ÁöÑÁÆóÊ≥ïÂæóÂà∞16Ôºå1.7ÂºÄÂßãÁöÑÁÆóÊ≥ïÂæóÂà∞15ÔºåËøô‰∏™ÂΩ±Âìç‰∏çÂ§ßÔºõ</p>
<p><strong>Á¨¨‰∫å‰∏™Âå∫Âà´</strong>Â∞±ÊòØ‰∏§ËÄÖÂú®Êï∞Â≠óÊØîËæÉÂ§ßÊó∂ËøêÁÆóÁªìÊûú‰∏ç‰∏ÄÊ†∑ÔºåÊØîÂ¶ÇoldCapacity=10^9ÔºåËøô‰∏™Êï∞ÂíåInteger.MAX_VALUE‰ΩçÊï∞‰∏ÄÊ†∑ÔºåÁî®1.6ÁöÑÁÆóÊ≥ïÂæóÂà∞ÁöÑ‰ºöÊòØÈîôËØØÁöÑ-647483647ÔºåÁî®1.7ÁöÑÂàôÊòØÊ≠£Á°ÆÁöÑ1500000000ÔºåËøôÊó∂ÂÄôÊòéÊòéÂèØ‰ª•1.5ÂÄçÊâ©ÂÆπÔºå‰ΩÜÊòØjdk1.6Âç¥Áî®ÁöÑÊòØÊåâÈúÄÊâ©ÂÆπ„ÄÇ</p>
<p>ensureCapacityÔºàÁß∞‰πã‰∏∫ÊâãÂä®ÔºåÊòØÂõ†‰∏∫Ê≠§ÊñπÊ≥ïÊòØpublicÁöÑÔºåÂèØ‰ª•Â§ñÈÉ®ÊâãÂä®Ë∞ÉÁî®Ôºâ„ÄÇÂú®1.6ÁâàÊú¨ÊòØÂè™ÊúâËøô‰∏™ÊâãÂä®ÁöÑÊñπÊ≥ïÔºåÂÜÖÈÉ®Ëá™Âä®Êìç‰Ωú‰πüÊòØË∞ÉÁî®Ëøô‰∏™ÊñπÊ≥ïÔºå1.7ÂºÄÂßãËøõË°å‰∫ÜÂå∫ÂàÜÔºåÂπ∂‰∏îËøõ‰∏ÄÊ≠•ÊîπËøõ‰∫ÜÊâ©ÂÆπÊìç‰Ωú„ÄÇ</p>
<ul>
<li><p>‰ªé1.7ÂºÄÂßãÂ∞ÜÂÜÖÈÉ®Êâ©ÂÆπÂíåÂ§ñÈÉ®ÂèØ‰ª•Ë∞ÉÁî®ÁöÑÊâ©ÂÆπÊñπÊ≥ïÂàÜÂºÄ‰∫ÜÔºåÈÄöËøáÊ∫êÁ†ÅÂèØ‰ª•ÁúãÂá∫ÔºöÂ§ñÈÉ®Ë∞ÉÁî®ÁöÑÊâãÂä®Êâ©ÂÆπÊñπÊ≥ïensureCapacityË¶ÅÂ§ö‰∏Ä‰∏™Âà§Êñ≠Êù°‰ª∂ minCapacity &gt;  minExpandÔºåËøô‰∏™Âà§Êñ≠Êù°‰ª∂Êã¶Êà™ÊéâË¥üÊï∞ÁöÑminCapacityÔºåËøôÊ†∑Ë∞ÉÁî®ÂÜÖÈÉ®Êâ©ÂÆπensureCapacityInternalÊñπÊ≥ïÊó∂ÔºåminCapacity‰∏ÄÂÆöÊòØÊ≠£Êï∞ÔºõÂÜÖÈÉ®Êâ©ÂÆπÊñπÊ≥ïÁõ¥Êé•Â∞±Áî®minCapacity - elementData.length &gt; 0Âà§Êñ≠ÔºåÊ≠§Êù°‰ª∂ÂèØ‰ª•Ê£ÄÊµãÂá∫intÂûãÊ∫¢Âá∫ÔºåÁ¢∞Âà∞Ê∫¢Âá∫ÊúÄÂêé‰ºöÊäõÂá∫‰∏Ä‰∏™OOMÈîôËØØ„ÄÇjdk1.7Áî®OOMÔºåËøôÊØîjdk1.6Áî®ArrayIndexOutOfBoundsExceptionÊõ¥Â•ΩÔºåÂõ†‰∏∫Ê≠§Êó∂Êï∞ÁªÑÂ§ßÂ∞èË∂ÖÂá∫‰∫ÜËôöÊãüÊú∫ÂØπÊï∞ÁªÑÁöÑÈôêÂà∂ÔºåËôöÊãüÊú∫Êó†Ê≥ïÂ§ÑÁêÜËøôÁßçÊÉÖÂÜµ‰∫ÜÔºåÊäõÂá∫‰∏Ä‰∏™ERRORÊòØÂêàÁêÜÁöÑ„ÄÇ</p>
</li>
<li><p>‰ΩøÁî®ËøôË°å‰ª£Á†Å</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">newCapacity = oldCapacity + (oldCapacity &gt;&gt; <span class="number">1</span>);</span><br></pre></td></tr></table></figure>

<p>ËøôË°å‰ª£Á†Å‰∏ç‰ªÖ‰ªÖÊòØ‰ΩøÁî®‰ΩçËøêÁÆóÂä†Âø´ÊâßË°åÈÄüÂ∫¶Ôºå‰∏äÈù¢ËØ¥‰∫ÜÔºåËøôÁßçÂÅöÊ≥ïÊâçÊòØÂØπÁöÑÔºåÊòØÁúüÊ≠£ÁöÑ1.5ÂÄç„ÄÇ‰∏ç‰ªÖ‰ªÖÂõ†‰∏∫ÈÇ£‰∏Ä‰∏™Â§ßÂ∞èÁöÑÂ∑ÆÂà´ÔºåÊõ¥ÈáçË¶ÅÁöÑÊòØÈÅøÂÖçËøáÊó©Âá∫Áé∞intÊ∫¢Âá∫ÁöÑÊÉÖÂÜµÔºå‰øùËØÅ‰∫ÜÂÜÖÈÉ®Ëá™Âä®Êâ©ÂÆπ‰ºöÂ∞ΩÈáèÊåâËßÑÂÆöÁöÑÁ≠ñÁï•ÊâßË°å„ÄÇÂêåÊó∂Êï¥‰∏™Êâ©ÂÆπÂ§ÑÁêÜÊµÅÁ®ã‰∏≠Â§öÂ¢ûÂä†‰∫ÜÂá†Â§ÑifÂà§Êñ≠ÔºåÂØπÂêÑÁßçÊÉÖÂÜµÂ§ÑÁêÜÊõ¥Âä†ÂÆåÂñÑ„ÄÇ</p>
<h4 id="Integer-MAX-VALUE-8-ËøôÈáå‰∏∫‰ªÄ‰πàË¶ÅÂáèÂéª8Ôºü"><a href="#Integer-MAX-VALUE-8-ËøôÈáå‰∏∫‰ªÄ‰πàË¶ÅÂáèÂéª8Ôºü" class="headerlink" title="Integer.MAX_VALUE - 8  ËøôÈáå‰∏∫‰ªÄ‰πàË¶ÅÂáèÂéª8Ôºü"></a>Integer.MAX_VALUE - 8  ËøôÈáå‰∏∫‰ªÄ‰πàË¶ÅÂáèÂéª8Ôºü</h4><p>‰∏ªË¶ÅÊòØËÄÉËôëÂà∞‰∏çÂêåÁöÑJVM,ÊúâÁöÑVM‰ºöÂú®Âä†ÂÖ•‰∏Ä‰∫õÊï∞ÊçÆÂ§¥,ÂΩìÊâ©ÂÆπÂêéÁöÑÂÆπÈáèÂ§ß‰∫éMAX_ARRAY_SIZE,Êàë‰ª¨‰ºöÂ∞ÜÊúÄÂ∞èÈúÄË¶ÅÂÆπÈáèÂíåMAX_ARRAY_SIZEÂÅöÊØîËæÉ,Â¶ÇÊûúÊØîÂÆÉÂ§ß, Âè™ËÉΩÂèñInteger.MAX_VALUE,Âê¶ÂàôÊòØInteger.MAX_VALUE -8„ÄÇ<strong>Ëøô‰∏™ÊòØ‰ªéjdk1.7ÂºÄÂßãÊâçÊúâÁöÑ</strong></p>
<h4 id="modCountÂ±ûÊÄßÁöÑ‰ΩúÁî®Ôºü"><a href="#modCountÂ±ûÊÄßÁöÑ‰ΩúÁî®Ôºü" class="headerlink" title="modCountÂ±ûÊÄßÁöÑ‰ΩúÁî®Ôºü"></a>modCountÂ±ûÊÄßÁöÑ‰ΩúÁî®Ôºü</h4><p><code>modCount</code>Â±ûÊÄß‰ª£Ë°®‰∏∫ÁªìÊûÑÊÄß‰øÆÊîπÔºà ÊîπÂèòlistÁöÑsizeÂ§ßÂ∞è„ÄÅ‰ª•ÂÖ∂‰ªñÊñπÂºèÊîπÂèò‰ªñÂØºËá¥Ê≠£Âú®ËøõË°åËø≠‰ª£Êó∂Âá∫Áé∞ÈîôËØØÁöÑÁªìÊûúÔºâÁöÑÊ¨°Êï∞ÔºåËØ•Â±ûÊÄßË¢´<code>Iterato</code>r‰ª•Âèä<code>ListIterator</code>ÁöÑÂÆûÁé∞Á±ªÊâÄ‰ΩøÁî®Ôºå‰∏îÂæàÂ§öÈùûÁ∫øÁ®ãÂÆâÂÖ®‰ΩøÁî®<code>modCount</code>Â±ûÊÄß„ÄÇ</p>
<p> ÂàùÂßãÂåñËø≠‰ª£Âô®Êó∂‰ºöÁªôËøô‰∏™modCountËµãÂÄºÔºåÂ¶ÇÊûúÂú®ÈÅçÂéÜÁöÑËøáÁ®ã‰∏≠Ôºå‰∏ÄÊó¶ÂèëÁé∞Ëøô‰∏™ÂØπË±°ÁöÑmodCountÂíåËø≠‰ª£Âô®Â≠òÂÇ®ÁöÑmodCount‰∏ç‰∏ÄÊ†∑Ôºå<code>Iterator</code>ÊàñËÄÖ<code>ListIterator</code> Â∞ÜÊäõÂá∫<code>ConcurrentModificationException</code>ÂºÇÂ∏∏Ôºå</p>
<p>ËøôÊòØjdkÂú®Èù¢ÂØπËø≠‰ª£ÈÅçÂéÜÁöÑÊó∂ÂÄô‰∏∫‰∫ÜÈÅøÂÖç‰∏çÁ°ÆÂÆöÊÄßËÄåÈááÂèñÁöÑ fail-fastÔºàÂø´ÈÄüÂ§±Ë¥•ÔºâÂéüÂàôÔºö</p>
<p>Âú®Á∫øÁ®ã‰∏çÂÆâÂÖ®ÁöÑÈõÜÂêà‰∏≠ÔºåÂ¶ÇÊûú‰ΩøÁî®Ëø≠‰ª£Âô®ÁöÑËøáÁ®ã‰∏≠ÔºåÂèëÁé∞ÈõÜÂêàË¢´‰øÆÊîπÔºå‰ºöÊäõÂá∫<code>ConcurrentModificationExceptions</code>ÈîôËØØÔºåËøôÂ∞±ÊòØfail-fastÊú∫Âà∂„ÄÇÂØπÈõÜÂêàËøõË°åÁªìÊûÑÊÄß‰øÆÊîπÊó∂Ôºå<code>modCount</code>ÈÉΩ‰ºöÂ¢ûÂä†ÔºåÂú®ÂàùÂßãÂåñËø≠‰ª£Âô®Êó∂Ôºå<code>modCount</code>ÁöÑÂÄº‰ºöËµãÁªô<code>expectedModCount</code>ÔºåÂú®Ëø≠‰ª£ÁöÑËøáÁ®ã‰∏≠ÔºåÂè™Ë¶Å<code>modCount</code>ÊîπÂèò‰∫ÜÔºå<code>int expectedModCount = modCount</code>Á≠âÂºèÂ∞±‰∏çÊàêÁ´ã‰∫ÜÔºåËø≠‰ª£Âô®Ê£ÄÊµãÂà∞Ëøô‰∏ÄÁÇπÔºåÂ∞±‰ºöÊäõÂá∫ÈîôËØØÔºö<code>urrentModificationExceptions</code>„ÄÇ</p>
<h4 id="jdk1-8ÁöÑÊó†ÂèÇÊûÑÈÄ†ÂáΩÊï∞Âíå‰πãÂâçÁâàÊú¨ÁöÑÊûÑÈÄ†ÂáΩÊï∞Êúâ‰ªÄ‰πàÂå∫Âà´"><a href="#jdk1-8ÁöÑÊó†ÂèÇÊûÑÈÄ†ÂáΩÊï∞Âíå‰πãÂâçÁâàÊú¨ÁöÑÊûÑÈÄ†ÂáΩÊï∞Êúâ‰ªÄ‰πàÂå∫Âà´" class="headerlink" title="jdk1.8ÁöÑÊó†ÂèÇÊûÑÈÄ†ÂáΩÊï∞Âíå‰πãÂâçÁâàÊú¨ÁöÑÊûÑÈÄ†ÂáΩÊï∞Êúâ‰ªÄ‰πàÂå∫Âà´?"></a>jdk1.8ÁöÑÊó†ÂèÇÊûÑÈÄ†ÂáΩÊï∞Âíå‰πãÂâçÁâàÊú¨ÁöÑÊûÑÈÄ†ÂáΩÊï∞Êúâ‰ªÄ‰πàÂå∫Âà´?</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">jdk1<span class="number">.6</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ArrayList</span><span class="params">()</span> </span>&#123;    </span><br><span class="line">    <span class="keyword">this</span>(<span class="number">10</span>);    </span><br><span class="line">&#125; </span><br><span class="line">jdk1<span class="number">.7</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ArrayList</span><span class="params">()</span> </span>&#123;    </span><br><span class="line">    <span class="keyword">super</span>();    </span><br><span class="line">    <span class="keyword">this</span>.elementData = EMPTY_ELEMENTDATA;    </span><br><span class="line">&#125;</span><br><span class="line">jdk1<span class="number">.8</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ArrayList</span><span class="params">()</span> </span>&#123;    </span><br><span class="line">    <span class="keyword">this</span>.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ÂØπÊØî‰∏ãÂèØ‰ª•ÁúãÂá∫Ôºöjdk1.6ÁöÑÊó†ÂèÇÊûÑÈÄ†ÊñπÊ≥ïÔºàÈªòËÆ§ÊûÑÈÄ†ÊñπÊ≥ïÔºâÊûÑÈÄ†ÁöÑArrayListÁöÑÂ∫ïÂ±ÇÊï∞ÁªÑelementDataÂ§ßÂ∞èÔºàÂÆπÈáèÔºâÈªòËÆ§‰∏∫10Ôºõ‰ªé1.7ÂºÄÂßãÔºåÊó†ÂèÇÊûÑÈÄ†ÊñπÊ≥ïÊûÑÈÄ†ÁöÑArrayListÁöÑÂ∫ïÂ±ÇÊï∞ÁªÑelementDataÂ§ßÂ∞èÈªòËÆ§‰∏∫0„ÄÇ</p>
<p>javaÈõÜÂêàÁ±ªÂú®jdk1.7ÁâàÊú¨Âü∫Êú¨‰∏äÈÉΩÊúâ‰∏ÄÁßçÊîπÂä®ÔºöÊáíÂàùÂßãÂåñ„ÄÇÊáíÂàùÂßãÂåñÊåáÁöÑÊòØÈªòËÆ§ÊûÑÈÄ†ÊñπÊ≥ïÊûÑÈÄ†ÁöÑÈõÜÂêàÁ±ªÔºåÂç†ÊçÆÂ∞ΩÂèØËÉΩÂ∞ëÁöÑÂÜÖÂ≠òÁ©∫Èó¥ÔºàÂØπ‰∫éArrayListÊù•ËØ¥Ôºå‰ΩøÁî®Á©∫Êï∞ÁªÑÊù•Âç†ÊçÆÂ∞ΩÈáèÂ∞ëÁöÑÁ©∫Èó¥Ôºå‰∏ç‰ΩøÁî®nullÊòØ‰∏∫‰∫ÜÈÅøÂÖçnullÂà§Êñ≠ÔºâÔºåÂú®Á¨¨‰∏ÄÊ¨°ËøõË°åÂåÖÂê´ÊúâÊ∑ªÂä†ËØ≠‰πâÁöÑÊìç‰ΩúÊó∂ÔºåÊâçËøõË°åÁúüÊ≠£ÁöÑ<strong>ÂàùÂßãÂåñ</strong>Â∑•‰Ωú„ÄÇ</p>
<p>1.7ÂºÄÂßãÁöÑArrayListÔºåÈªòËÆ§ÊûÑÈÄ†ÊñπÊ≥ïÊûÑÈÄ†ÁöÑÂÆû‰æãÔºåÂ∫ïÂ±ÇÊï∞ÁªÑÊòØÁ©∫Êï∞ÁªÑÔºåÂÆπÈáè‰∏∫0ÔºåÂú®ËøõË°åÁ¨¨‰∏ÄÊ¨°add/addAllÁ≠âÊìç‰ΩúÊó∂Êâç‰ºöÁúüÊ≠£ÁªôÂ∫ïÂ±ÇÊï∞ÁªÑËµãÈùûemptyÁöÑÂÄº„ÄÇÂ¶ÇÊûúadd/addAllÊ∑ªÂä†ÁöÑÂÖÉÁ¥†Â∞è‰∫é10ÔºåÂàôÊääelementDataÊï∞ÁªÑÊâ©ÂÆπ‰∏∫10‰∏™ÂÖÉÁ¥†Â§ßÂ∞èÔºåÂê¶Âàô‰ΩøÁî®ÂàöÂ•ΩÂêàÈÄÇÁöÑÂ§ßÂ∞èÔºà‰æãÂ¶ÇÔºåÁ¨¨‰∏ÄÊ¨°addAllÊ∑ªÂä†6‰∏™ÔºåÈÇ£‰πàÊâ©ÂÆπ‰∏∫10‰∏™ÔºåÁ¨¨‰∏ÄÊ¨°Ê∑ªÂä†Â§ß‰∫é10‰∏™ÁöÑÔºåÊØîÂ¶Ç24‰∏™ÔºåÊâ©ÂÆπ‰∏∫24‰∏™ÔºåÂàöÂ•ΩÂêàÈÄÇÔºâ</p>
<p>1.8ÁâàÊú¨ÔºåÈªòËÆ§ÊûÑÈÄ†ÁöÑÂÆû‰æãËøô‰∏™Ë°å‰∏∫Ê≤°ÊúâÊîπÂèòÔºåÂè™ÊòØÁî®ÁöÑÊï∞ÁªÑÂêçÂ≠óÂèò‰∫Ü„ÄÇ</p>
<h3 id="ArrayList-Âíå-LinkedList-ÁöÑÊèíÂÖ•ÂíåËÆøÈóÆÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶"><a href="#ArrayList-Âíå-LinkedList-ÁöÑÊèíÂÖ•ÂíåËÆøÈóÆÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶" class="headerlink" title="ArrayList Âíå LinkedList ÁöÑÊèíÂÖ•ÂíåËÆøÈóÆÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶"></a>ArrayList Âíå LinkedList ÁöÑÊèíÂÖ•ÂíåËÆøÈóÆÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶</h3><p>ArrayList Â∫ïÂ±ÇÊòØÂü∫‰∫é Object[] Êù•ËøõË°åÊï∞ÊçÆÂ≠òÂÇ®ÁöÑÔºåÈíàÂØπÊï∞ÊçÆÁöÑÊèíÂÖ•ÂíåÂà†Èô§ÈúÄË¶ÅËøõË°åÊï∞ÊçÆÁöÑÁßªÂä®Âõ†Ê≠§Êó∂Èó¥Â§çÊùÇÂ∫¶Â§ßËá¥‰∏∫OÔºànÔºâÔºåÊï∞ÊçÆÊîØÊåÅÊåâÁÖß‰∏ãÊ†áËøõË°åÈöèÊú∫ËÆøÈóÆÔºåÂõ†Ê≠§ËÆøÈóÆÊó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫OÔºà1Ôºâ</p>
<p>LinkedList Â∫ïÂ±ÇÊòØÂü∫‰∫éÂèåÂêëÈìæË°®Êù•ËøõË°åÊï∞ÊçÆÂ≠òÂÇ®ÁöÑÔºåÈíàÂØπÊï∞ÊçÆÁöÑÊèíÂÖ•ÂíåÂà†Èô§Âè™ÈúÄË¶ÅÊõøÊç¢ÂìçÂ∫îÁöÑÊåáÈíàÂç≥ÂèØÔºåÂõ†Ê≠§ÊèíÂÖ•ÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫OÔºà1ÔºâÔºåÁî±‰∫éÈìæË°®ÁªìÊûÑ‰∏çÊîØÊåÅÈöèÊú∫ËÆøÈóÆÊü•ÊâæÂÖÉÁ¥†Âè™ËÉΩËøõË°åÈÅçÂéÜÔºåÂõ†Ê≠§ËÆøÈóÆÊó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫OÔºànÔºâ</p>
<h3 id="ArrayListÂíåLinkedListÁöÑÂå∫Âà´„ÄÅ‰ºòÁº∫ÁÇπ‰ª•ÂèäÂ∫îÁî®Âú∫ÊôØ"><a href="#ArrayListÂíåLinkedListÁöÑÂå∫Âà´„ÄÅ‰ºòÁº∫ÁÇπ‰ª•ÂèäÂ∫îÁî®Âú∫ÊôØ" class="headerlink" title="ArrayListÂíåLinkedListÁöÑÂå∫Âà´„ÄÅ‰ºòÁº∫ÁÇπ‰ª•ÂèäÂ∫îÁî®Âú∫ÊôØ"></a>ArrayListÂíåLinkedListÁöÑÂå∫Âà´„ÄÅ‰ºòÁº∫ÁÇπ‰ª•ÂèäÂ∫îÁî®Âú∫ÊôØ</h3><p><strong>Âå∫Âà´Ôºö</strong></p>
<ul>
<li><code>ArrayList</code>ÊòØÂÆûÁé∞‰∫ÜÂü∫‰∫éÂä®ÊÄÅÊï∞ÁªÑÁöÑÊï∞ÊçÆÁªìÊûÑÔºå<code>LinkedList</code>ÊòØÂü∫‰∫éÈìæË°®ÁªìÊûÑ„ÄÇ</li>
<li>ÂØπ‰∫éÈöèÊú∫ËÆøÈóÆÁöÑ<code>get</code>Âíå<code>set</code>ÊñπÊ≥ïÊü•ËØ¢ÂÖÉÁ¥†Ôºå<code>ArrayList</code>Ë¶Å‰ºò‰∫é<code>LinkedList</code>ÔºåÂõ†‰∏∫<code>LinkedList</code>Âæ™ÁéØÈìæË°®ÂØªÊâæÂÖÉÁ¥†„ÄÇ</li>
<li>ÂØπ‰∫éÊñ∞Â¢ûÂíåÂà†Èô§Êìç‰Ωú<code>add</code>Âíå<code>remove</code>Ôºå<code>LinkedList</code>ÊØîËæÉÈ´òÊïàÔºåÂõ†‰∏∫<code>ArrayList</code>Ë¶ÅÁßªÂä®Êï∞ÊçÆ„ÄÇ</li>
</ul>
<p><strong>‰ºòÁº∫ÁÇπÔºö</strong></p>
<ul>
<li>ÂØπ<code>ArrayList</code>Âíå<code>LinkedList</code>ËÄåË®ÄÔºåÂú®Êú´Â∞æÂ¢ûÂä†‰∏Ä‰∏™ÂÖÉÁ¥†ÊâÄËä±ÁöÑÂºÄÈîÄÈÉΩÊòØÂõ∫ÂÆöÁöÑ„ÄÇÂØπ<code>ArrayList</code>ËÄåË®ÄÔºå‰∏ªË¶ÅÊòØÂú®ÂÜÖÈÉ®Êï∞ÁªÑ‰∏≠Â¢ûÂä†‰∏ÄÈ°πÔºåÊåáÂêëÊâÄÊ∑ªÂä†ÁöÑÂÖÉÁ¥†ÔºåÂÅ∂Â∞îÂèØËÉΩ‰ºöÂØºËá¥ÂØπÊï∞ÁªÑÈáçÊñ∞ËøõË°åÂàÜÈÖçÔºõËÄåÂØπ<code>LinkedList</code>ËÄåË®ÄÔºåËøô‰∏™ÂºÄÈîÄÊòØ Áªü‰∏ÄÁöÑÔºåÂàÜÈÖç‰∏Ä‰∏™ÂÜÖÈÉ®<code>Entry</code>ÂØπË±°„ÄÇ</li>
<li>Âú®<code>ArrayList</code>ÈõÜÂêà‰∏≠Ê∑ªÂä†ÊàñËÄÖÂà†Èô§‰∏Ä‰∏™ÂÖÉÁ¥†Êó∂ÔºåÂΩìÂâçÁöÑÂàóË°®ÁßªÂä®ÂÖÉÁ¥†ÂêéÈù¢ÊâÄÊúâÁöÑÂÖÉÁ¥†ÈÉΩ‰ºöË¢´ÁßªÂä®„ÄÇËÄå<code>LinkedList</code>ÈõÜÂêà‰∏≠Ê∑ªÂä†ÊàñËÄÖÂà†Èô§‰∏Ä‰∏™ÂÖÉÁ¥†ÁöÑÂºÄÈîÄÊòØÂõ∫ÂÆöÁöÑ„ÄÇ</li>
<li><code>LinkedList</code>ÈõÜÂêà‰∏çÊîØÊåÅ È´òÊïàÁöÑÈöèÊú∫ÈöèÊú∫ËÆøÈóÆÔºà<code>RandomAccess</code>ÔºâÔºåÂõ†‰∏∫ÂèØËÉΩ‰∫ßÁîü‰∫åÊ¨°È°πÁöÑË°å‰∏∫„ÄÇ</li>
<li><code>ArrayList</code>ÁöÑÁ©∫Èó¥Êµ™Ë¥π‰∏ªË¶Å‰ΩìÁé∞Âú®Âú®listÂàóË°®ÁöÑÁªìÂ∞æÈ¢ÑÁïô‰∏ÄÂÆöÁöÑÂÆπÈáèÁ©∫Èó¥ÔºåËÄå<code>LinkedList</code>ÁöÑÁ©∫Èó¥Ëä±Ë¥πÂàô‰ΩìÁé∞Âú®ÂÆÉÁöÑÊØè‰∏Ä‰∏™ÂÖÉÁ¥†ÈÉΩÈúÄË¶ÅÊ∂àËÄóÁõ∏ÂΩìÁöÑÁ©∫Èó¥</li>
</ul>
<p><strong>Â∫îÁî®Âú∫ÊôØ:</strong></p>
<p><code>ArrayList</code>‰ΩøÁî®Âú®Êü•ËØ¢ÊØîËæÉÂ§öÔºå‰ΩÜÊòØÊèíÂÖ•ÂíåÂà†Èô§ÊØîËæÉÂ∞ëÁöÑÊÉÖÂÜµÔºåËÄå<code>LinkedList</code>Áî®Âú®Êü•ËØ¢ÊØîËæÉÂ∞ëËÄåÊèíÂÖ•Âà†Èô§ÊØîËæÉÂ§öÁöÑÊÉÖÂÜµ</p>
<h3 id="VectorÂíåArrayList"><a href="#VectorÂíåArrayList" class="headerlink" title="VectorÂíåArrayList"></a>VectorÂíåArrayList</h3><p><strong>Áõ∏ÂêåÁÇπÔºö</strong>Ëøô‰∏§‰∏™Á±ªÈÉΩÂÆûÁé∞‰∫ÜListÊé•Âè£Ôºå‰ªñ‰ª¨ÈÉΩÊòØÊúâÂ∫èÁöÑÈõÜÂêàÔºàÂÇ®Â≠òÊúâÂ∫èÔºâÔºåÂ∫ïÂ±ÇÈÉΩÁî®Êï∞ÁªÑÂÆûÁé∞„ÄÇÂèØ‰ª•ÈÄöËøáÁ¥¢ÂºïÊù•Ëé∑ÂèñÊüê‰∏™ÂÖÉÁ¥†„ÄÇÂÖÅËÆ∏ÂÖÉÁ¥†ÈáçÂ§çÂíåÂá∫Áé∞nullÂÄº„ÄÇArrayListÂíåVectorÁöÑËø≠‰ª£Âô®ÂÆûÁé∞ÈÉΩÊòØfail-fastÁöÑ„ÄÇ</p>
<p><strong>‰∏çÂêåÁÇπÔºö</strong>vectorÊòØÁ∫øÁ®ãÂêåÊ≠•ÁöÑÔºåÊâÄ‰ª•ÂÆÉ‰πüÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºåËÄåarraylistÊòØÁ∫øÁ®ãÂºÇÊ≠•ÁöÑÔºåÊòØ‰∏çÂÆâÂÖ®ÁöÑ„ÄÇÂ¶ÇÊûú‰∏çËÄÉËôëÂà∞Á∫øÁ®ãÁöÑÂÆâÂÖ®Âõ†Á¥†Ôºå‰∏ÄËà¨Áî®arraylistÊïàÁéáÊØîËæÉÈ´ò„ÄÇ</p>
<p>Êâ©ÂÆπÊó∂ÔºåarraylistÊâ©ÂÆπ1.5ÂÄçÔºåvectorÊâ©ÂÆπ2ÂÄçÔºàÊàñËÄÖÊâ©ÂÆπÊåáÂÆöÁöÑÂ§ßÂ∞èÔºâ</p>
<p>ArrayList ÂíåVectorÊòØÈááÁî®Êï∞ÁªÑÊñπÂºèÂ≠òÂÇ®Êï∞ÊçÆÔºåÊ≠§Êï∞ÁªÑÂÖÉÁ¥†Êï∞Â§ß‰∫éÂÆûÈôÖÂ≠òÂÇ®ÁöÑÊï∞ÊçÆ‰ª•‰æøÂ¢ûÂä†ÂíåÊèíÂÖ•ÂÖÉÁ¥†ÔºåÈÉΩÂÖÅËÆ∏Áõ¥Êé•Â∫èÂè∑Á¥¢ÂºïÂÖÉÁ¥†Ôºå‰ΩÜÊòØÊèíÂÖ•Êï∞ÊçÆË¶ÅËÆæËÆ°Âà∞Êï∞ÁªÑÂÖÉÁ¥†ÁßªÂä®Á≠âÂÜÖÂ≠òÊìç‰ΩúÔºåÊâÄ‰ª•Á¥¢ÂºïÊï∞ÊçÆÂø´ÊèíÂÖ•Êï∞ÊçÆÊÖ¢ÔºåVectorÁî±‰∫é‰ΩøÁî®‰∫ÜsynchronizedÊñπÊ≥ïÔºàÁ∫øÁ®ãÂÆâÂÖ®ÔºâÊâÄ‰ª•ÊÄßËÉΩ‰∏äÊØîArrayListË¶ÅÂ∑ÆÔºåLinkedList‰ΩøÁî®ÂèåÂêëÈìæË°®ÂÆûÁé∞Â≠òÂÇ®ÔºåÊåâÂ∫èÂè∑Á¥¢ÂºïÊï∞ÊçÆÈúÄË¶ÅËøõË°åÂêëÂâçÊàñÂêëÂêéÈÅçÂéÜÔºå‰ΩÜÊòØÊèíÂÖ•Êï∞ÊçÆÊó∂Âè™ÈúÄË¶ÅËÆ∞ÂΩïÊú¨È°πÁöÑÂâçÂêéÈ°πÂç≥ÂèØÔºåÊâÄ‰ª•ÊèíÂÖ•Êï∞Â∫¶ËæÉÂø´ÔºÅ</p>
<h3 id="LinkedList"><a href="#LinkedList" class="headerlink" title="LinkedList"></a>LinkedList</h3><p>LinkedListÊòØ‰∏Ä‰∏™ÂÆûÁé∞‰∫ÜListÊé•Âè£ÂíåDequeÊé•Âè£ÁöÑÂèåÁ´ØÈìæË°®„ÄÇ LinkedListÂ∫ïÂ±ÇÁöÑÈìæË°®ÁªìÊûÑ‰ΩøÂÆÉÊîØÊåÅÈ´òÊïàÁöÑÊèíÂÖ•ÂíåÂà†Èô§Êìç‰ΩúÔºåÂè¶Â§ñÂÆÉÂÆûÁé∞‰∫ÜDequeÊé•Âè£Ôºå‰ΩøÂæóLinkedListÁ±ª‰πüÂÖ∑ÊúâÈòüÂàóÁöÑÁâπÊÄß;ÂÖÅËÆ∏ÂåÖÂê´nullÂÄº„ÄÇ LinkedList‰∏çÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºåÂ¶ÇÊûúÊÉ≥‰ΩøLinkedListÂèòÊàêÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºåÂèØ‰ª•Ë∞ÉÁî®ÈùôÊÄÅÁ±ªCollectionsÁ±ª‰∏≠ÁöÑsynchronizedListÊñπÊ≥ïÔºö</p>
<p>List list=Collections.synchronizedList(new LinkedList(‚Ä¶));</p>
<p>LinkedListÊòØ‰∏ÄÁßçÂèØ‰ª•Âú®‰ªª‰Ωï‰ΩçÁΩÆËøõË°åÈ´òÊïàÂú∞ÊèíÂÖ•ÂíåÁßªÈô§Êìç‰ΩúÁöÑÊúâÂ∫èÂ∫èÂàóÔºåÂÆÉÊòØÂü∫‰∫éÂèåÂêëÈìæË°®ÂÆûÁé∞ÁöÑ„ÄÇÂÜÖÈÉ®Êúâ‰∏â‰∏™ÂèòÈáèÔºåsizeË°®Á§∫ÈìæË°®‰∏≠ÂÖÉÁ¥†ÁöÑ‰∏™Êï∞Ôºå firstÊåáÂêëÈìæË°®Â§¥ÈÉ®ÔºålastÊåáÂêëÈìæË°®Â∞æÈÉ®„ÄÇ</p>
<h3 id="Vector"><a href="#Vector" class="headerlink" title="Vector"></a>Vector</h3><p><code>Vector</code>Ôºå‰∏Ä‰∏™ÂèØÂèòÈïøÁöÑÊï∞ÁªÑÔºåÂ∫ïÂ±ÇÂÆûÁé∞‰∏é ArrayList Â§ßÂêåÂ∞èÂºÇÔºå‰ΩÜ<code>Vector</code>ÊòØÂêåÊ≠•ÁöÑÔºàÁ∫øÁ®ãÂÆâÂÖ®ÔºâÔºå<code>Vector</code>ÁöÑÂæàÂ§öÊñπÊ≥ï‰πãÂâçÈÉΩÂä†‰∫ÜÂÖ≥ÈîÆÂ≠ó<code>synchronized</code>ÔºåÊâÄ‰ª•ÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑ„ÄÇ</p>
<p>ÂàùÂßãÂÆπÈáè‰∏∫10Ôºå ÈªòËÆ§Êâ©Â±ï2ÂÄç</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> newCapacity = oldCapacity + ((capacityIncrement &gt; <span class="number">0</span>) ?</span><br><span class="line">                                  capacityIncrement : oldCapacity);</span><br></pre></td></tr></table></figure>

<h2 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h2><p>SetÊé•Âè£ÁªßÊâø‰∫ÜCollectionÊé•Âè£„ÄÇSetÈõÜÂêà‰∏≠‰∏çËÉΩÂåÖÂê´ÈáçÂ§çÁöÑÂÖÉÁ¥†ÔºåÊØè‰∏™ÂÖÉÁ¥†ÂøÖÈ°ªÊòØÂîØ‰∏ÄÁöÑ„ÄÇ‰Ω†Âè™ÈúÄÂ∞ÜÂÖÉÁ¥†Âä†ÂÖ•set‰∏≠ÔºåÈáçÂ§çÁöÑÂÖÉÁ¥†‰ºöËá™Âä®ÁßªÈô§„ÄÇÊúâ‰∏âÁßçÂ∏∏ËßÅÁöÑSetÂÆûÁé∞‚Äî‚ÄîHashSet, TreeSetÂíåLinkedHashSet„ÄÇÂ¶ÇÊûú‰Ω†ÈúÄË¶Å‰∏Ä‰∏™ËÆøÈóÆÂø´ÈÄüÁöÑSetÔºå‰Ω†Â∫îËØ•‰ΩøÁî®HashSetÔºõÂΩì‰Ω†ÈúÄË¶Å‰∏Ä‰∏™ÊéíÂ∫èÁöÑSetÔºå‰Ω†Â∫îËØ•‰ΩøÁî®TreeSetÔºõÂΩì‰Ω†ÈúÄË¶ÅËÆ∞ÂΩï‰∏ãÊèíÂÖ•Êó∂ÁöÑÈ°∫Â∫èÊó∂Ôºå‰Ω†Â∫îËØ•‰ΩøÁî®LinedHashSet„ÄÇ</p>
<h3 id="HashSet"><a href="#HashSet" class="headerlink" title="HashSet"></a>HashSet</h3><p>HashSetÊòØÊòØÂü∫‰∫é HashMap ÂÆûÁé∞ÁöÑÔºåÂ∫ïÂ±ÇÈááÁî® HashMap Êù•‰øùÂ≠òÂÖÉÁ¥†,ÊâÄ‰ª•ÂÆÉ‰∏ç‰øùËØÅset ÁöÑËø≠‰ª£È°∫Â∫èÔºõÁâπÂà´ÊòØÂÆÉ‰∏ç‰øùËØÅËØ•È°∫Â∫èÊÅí‰πÖ‰∏çÂèò„ÄÇadd()„ÄÅremove()‰ª•Âèäcontains()Á≠âÊñπÊ≥ïÈÉΩÊòØÂ§çÊùÇÂ∫¶‰∏∫O(1)ÁöÑÊñπÊ≥ï„ÄÇÁî±‰∫éHashMap‰∏≠key‰∏çÂèØÈáçÂ§çÔºåÊâÄ‰ª•HashSetÂÖÉÁ¥†‰∏çÂèØÈáçÂ§ç„ÄÇÂèØ‰ª•Â≠òÂÇ®nullÂÖÉÁ¥†ÔºåÊòØÁ∫øÁ®ã‰∏çÂÆâÂÖ®ÁöÑ„ÄÇ</p>
<h3 id="TreeSet"><a href="#TreeSet" class="headerlink" title="TreeSet"></a>TreeSet</h3><p>TreeSetÊòØ‰∏Ä‰∏™ÊúâÂ∫èÈõÜÔºåÂü∫‰∫éTreeMapÂÆûÁé∞ÔºåÊòØÁ∫øÁ®ã‰∏çÂÆâÂÖ®ÁöÑ„ÄÇ</p>
<p>TreeSetÂ∫ïÂ±ÇÈááÁî®TreeMapÂ≠òÂÇ®ÔºåÊûÑÈÄ†Âô®ÂêØÂä®Êó∂Êñ∞Âª∫TreeMap„ÄÇTreeSetÂ≠òÂÇ®ÂÖÉÁ¥†ÂÆûÈôÖ‰∏∫TreeMapÂ≠òÂÇ®ÁöÑÈîÆÂÄºÂØπ‰∏∫&lt;key,PRESENT&gt;ÁöÑkey;ÔºåPRESENT‰∏∫Âõ∫ÂÆöÂØπË±°Ôºöprivate static final Object PRESENT = new Object().</p>
<p>TreeSetÊîØÊåÅ‰∏§Áßç‰∏§ÁßçÊéíÂ∫èÊñπÂºèÔºàËá™ÁÑ∂ÊéíÂ∫èÂíåÂÆöÂà∂ÊéíÂ∫èÔºâÔºåÈÄöËøá‰∏çÂêåÊûÑÈÄ†Âô®Ë∞ÉÁî®ÂÆûÁé∞„ÄÇ</p>
<h3 id="LinkedHashSet"><a href="#LinkedHashSet" class="headerlink" title="LinkedHashSet"></a>LinkedHashSet</h3><p>LinkedHashSet‰ªã‰∫éHashSetÂíåTreeSet‰πãÈó¥„ÄÇÂìàÂ∏åË°®ÂíåÈìæÊé•ÂàóË°®ÂÆûÁé∞„ÄÇÂü∫Êú¨ÊñπÊ≥ïÁöÑÂ§çÊùÇÂ∫¶‰∏∫O(1)„ÄÇ</p>
<p>LinkedHashSet ÊòØ Set ÁöÑ‰∏Ä‰∏™ÂÖ∑‰ΩìÂÆûÁé∞ÔºåÂÖ∂Áª¥Êä§ÁùÄ‰∏Ä‰∏™ËøêË°å‰∫éÊâÄÊúâÊù°ÁõÆÁöÑÂèåÈáçÈìæÊé•ÂàóË°®„ÄÇÊ≠§ÈìæÊé•ÂàóË°®ÂÆö‰πâ‰∫ÜËø≠‰ª£È°∫Â∫èÔºåËØ•Ëø≠‰ª£È°∫Â∫èÂèØ‰∏∫ÊèíÂÖ•È°∫Â∫èÊàñÊòØËÆøÈóÆÈ°∫Â∫è„ÄÇ</p>
<p>LinkedHashSet ÁªßÊâø‰∫é HashSetÔºåÂπ∂‰∏îÂÖ∂ÂÜÖÈÉ®ÊòØÈÄöËøá LinkedHashMap Êù•ÂÆûÁé∞ÁöÑ„ÄÇÊúâÁÇπÁ±ª‰ºº‰∫éÊàë‰ª¨‰πãÂâçËØ¥ÁöÑLinkedHashMap ÂÖ∂ÂÜÖÈÉ®ÊòØÂü∫‰∫é Hashmap ÂÆûÁé∞ÁöÑ‰∏ÄÊ†∑„ÄÇ</p>
<p>Â¶ÇÊûúÊàë‰ª¨ÈúÄË¶ÅËø≠‰ª£ÁöÑÈ°∫Â∫è‰∏∫ÊèíÂÖ•È°∫Â∫èÊàñËÄÖËÆøÈóÆÈ°∫Â∫èÔºåÈÇ£‰πà LinkedHashSet ÊòØÈúÄË¶Å‰Ω†È¶ñÂÖàËÄÉËôëÁöÑ„ÄÇ</p>
<p>LinkedHashSet Â∫ïÂ±Ç‰ΩøÁî® LinkedHashMap Êù•‰øùÂ≠òÊâÄÊúâÂÖÉÁ¥†ÔºåÂõ†‰∏∫ÁªßÊâø‰∫é HashSetÔºåÊâÄÊúâÁöÑÊñπÊ≥ïÊìç‰Ωú‰∏äÂèà‰∏é HashSet Áõ∏ÂêåÔºåÂõ†Ê≠§ LinkedHashSet ÁöÑÂÆûÁé∞‰∏äÈùûÂ∏∏ÁÆÄÂçïÔºåÂè™Êèê‰æõ‰∫ÜÂõõ‰∏™ÊûÑÈÄ†ÊñπÊ≥ïÔºåÂπ∂ÈÄöËøá‰º†ÈÄí‰∏Ä‰∏™Ê†áËØÜÂèÇÊï∞ÔºåË∞ÉÁî®Áà∂Á±ªÁöÑÊûÑÈÄ†Âô®ÔºåÂ∫ïÂ±ÇÊûÑÈÄ†‰∏Ä‰∏™ LinkedHashMap Êù•ÂÆûÁé∞ÔºåÂú®Áõ∏ÂÖ≥Êìç‰Ωú‰∏ä‰∏éÁà∂Á±ª HashSet ÁöÑÊìç‰ΩúÁõ∏ÂêåÔºåÁõ¥Êé•Ë∞ÉÁî®Áà∂Á±ª HashSet ÁöÑÊñπÊ≥ïÂç≥ÂèØ„ÄÇ</p>
<h3 id="Êó†Â∫èÊÄßÂíå‰∏çÂèØÈáçÂ§çÊÄßÁöÑÂê´‰πâÊòØ‰ªÄ‰πà"><a href="#Êó†Â∫èÊÄßÂíå‰∏çÂèØÈáçÂ§çÊÄßÁöÑÂê´‰πâÊòØ‰ªÄ‰πà" class="headerlink" title="Êó†Â∫èÊÄßÂíå‰∏çÂèØÈáçÂ§çÊÄßÁöÑÂê´‰πâÊòØ‰ªÄ‰πà"></a>Êó†Â∫èÊÄßÂíå‰∏çÂèØÈáçÂ§çÊÄßÁöÑÂê´‰πâÊòØ‰ªÄ‰πà</h3><p>1„ÄÅ‰ªÄ‰πàÊòØÊó†Â∫èÊÄßÔºüÊó†Â∫èÊÄß‰∏çÁ≠â‰∫éÈöèÊú∫ÊÄß ÔºåÊó†Â∫èÊÄßÊòØÊåáÂ≠òÂÇ®ÁöÑÊï∞ÊçÆÂú®Â∫ïÂ±ÇÊï∞ÁªÑ‰∏≠Âπ∂ÈùûÊåâÁÖßÊï∞ÁªÑÁ¥¢ÂºïÁöÑÈ°∫Â∫èÊ∑ªÂä† ÔºåËÄåÊòØÊ†πÊçÆÊï∞ÊçÆÁöÑÂìàÂ∏åÂÄºÂÜ≥ÂÆöÁöÑ„ÄÇ<br>2„ÄÅ‰ªÄ‰πàÊòØ‰∏çÂèØÈáçÂ§çÊÄßÔºü‰∏çÂèØÈáçÂ§çÊÄßÊòØÊåáÊ∑ªÂä†ÁöÑÂÖÉÁ¥†ÊåâÁÖß equals()Âà§Êñ≠Êó∂ ÔºåËøîÂõû falseÔºåÈúÄË¶ÅÂêåÊó∂ÈáçÂÜô equals()ÊñπÊ≥ïÂíå HashCode()ÊñπÊ≥ï„ÄÇ</p>
<h3 id="ÊØîËæÉ-HashSet„ÄÅLinkedHashSet-Âíå-TreeSet-‰∏âËÄÖÁöÑÂºÇÂêå"><a href="#ÊØîËæÉ-HashSet„ÄÅLinkedHashSet-Âíå-TreeSet-‰∏âËÄÖÁöÑÂºÇÂêå" class="headerlink" title="ÊØîËæÉ HashSet„ÄÅLinkedHashSet Âíå TreeSet ‰∏âËÄÖÁöÑÂºÇÂêå"></a>ÊØîËæÉ HashSet„ÄÅLinkedHashSet Âíå TreeSet ‰∏âËÄÖÁöÑÂºÇÂêå</h3><p>HashSet ÊòØ Set Êé•Âè£ÁöÑ‰∏ªË¶ÅÂÆûÁé∞Á±ª ÔºåHashSet ÁöÑÂ∫ïÂ±ÇÊòØ HashMapÔºåÁ∫øÁ®ã‰∏çÂÆâÂÖ®ÁöÑÔºåÂèØ‰ª•Â≠òÂÇ® null ÂÄºÔºõ</p>
<p>LinkedHashSet ÊòØ HashSet ÁöÑÂ≠êÁ±ªÔºåËÉΩÂ§üÊåâÁÖßÊ∑ªÂä†ÁöÑÈ°∫Â∫èÈÅçÂéÜÔºõ</p>
<p>TreeSet Â∫ïÂ±Ç‰ΩøÁî®Á∫¢ÈªëÊ†ëÔºåËÉΩÂ§üÊåâÁÖßÊ∑ªÂä†ÂÖÉÁ¥†ÁöÑÈ°∫Â∫èËøõË°åÈÅçÂéÜÔºåÊéíÂ∫èÁöÑÊñπÂºèÊúâËá™ÁÑ∂ÊéíÂ∫èÂíåÂÆöÂà∂ÊéíÂ∫è„ÄÇ</p>
<h3 id="Set‰∏≠ÁöÑÂÖÉÁ¥†‰∏çËÉΩÈáçÂ§çÔºåÂ¶Ç‰ΩïÂÆûÁé∞Ôºü"><a href="#Set‰∏≠ÁöÑÂÖÉÁ¥†‰∏çËÉΩÈáçÂ§çÔºåÂ¶Ç‰ΩïÂÆûÁé∞Ôºü" class="headerlink" title="Set‰∏≠ÁöÑÂÖÉÁ¥†‰∏çËÉΩÈáçÂ§çÔºåÂ¶Ç‰ΩïÂÆûÁé∞Ôºü"></a>Set‰∏≠ÁöÑÂÖÉÁ¥†‰∏çËÉΩÈáçÂ§çÔºåÂ¶Ç‰ΩïÂÆûÁé∞Ôºü</h3><p>HashSetÂÆûÁé∞‰∫ÜSetÊé•Âè£Â∫ïÂ±ÇÂü∫‰∫éHashMapÊù•ÂÆûÁé∞ÔºåÂú®Â∞Ü‰∏Ä‰∏™key-valueÂØπÊîæÂÖ•HashMap‰∏≠Êó∂ÔºåÈ¶ñÂÖàÊ†πÊçÆkeyÁöÑhashCode()ËøîÂõûÂÄºÂÜ≥ÂÆöËØ•EntryÁöÑÂ≠òÂÇ®‰ΩçÁΩÆÔºåÂ¶ÇÊûú‰∏§‰∏™keyÁöÑhashÂÄºÁõ∏ÂêåÔºåÈÇ£‰πàÂÆÉ‰ª¨ÁöÑÂ≠òÂÇ®‰ΩçÁΩÆÁõ∏Âêå„ÄÇÂ¶ÇÊûúËøô‰∏™‰∏§‰∏™keyÁöÑequalsÊØîËæÉËøîÂõûtrue„ÄÇÈÇ£‰πàÊñ∞Ê∑ªÂä†ÁöÑEntryÁöÑvalue‰ºöË¶ÜÁõñÂéüÊù•ÁöÑEntryÁöÑvalueÔºåkey‰∏ç‰ºöË¶ÜÁõñ„ÄÇ‰∏îHashSet‰∏≠add()‰∏≠ map.put(e, PRESENT)==null ‰∏∫falseÔºåHashSetÊ∑ªÂä†ÂÖÉÁ¥†Â§±Ë¥•„ÄÇÂõ†Ê≠§,Â¶ÇÊûúÂêëHashSet‰∏≠Ê∑ªÂä†‰∏Ä‰∏™Â∑≤ÁªèÂ≠òÂú®ÁöÑÂÖÉÁ¥†ÔºåÊñ∞Ê∑ªÂä†ÁöÑÈõÜÂêàÂÖÉÁ¥†‰∏ç‰ºöË¶ÜÁõñÂéüÊù•Â∑≤ÊúâÁöÑÈõÜÂêàÂÖÉÁ¥†„ÄÇ</p>
<h3 id="HashSet-Âíå-TreeSet-Êúâ‰ªÄ‰πàÂå∫Âà´Ôºü"><a href="#HashSet-Âíå-TreeSet-Êúâ‰ªÄ‰πàÂå∫Âà´Ôºü" class="headerlink" title="HashSet Âíå TreeSet Êúâ‰ªÄ‰πàÂå∫Âà´Ôºü"></a>HashSet Âíå TreeSet Êúâ‰ªÄ‰πàÂå∫Âà´Ôºü</h3><p>HashSet ÊòØÁî±‰∏Ä‰∏™ hash Ë°®Êù•ÂÆûÁé∞ÁöÑÔºåÂõ†Ê≠§ÔºåÂÆÉÁöÑÂÖÉÁ¥†ÊòØÊó†Â∫èÁöÑ„ÄÇadd()Ôºåremove()Ôºåcontains()ÊñπÊ≥ïÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶ÊòØ O(1)„ÄÇ</p>
<p>Âè¶‰∏ÄÊñπÈù¢ÔºåTreeSet ÊòØÁî±‰∏Ä‰∏™Ê†ëÂΩ¢ÁöÑÁªìÊûÑÊù•ÂÆûÁé∞ÁöÑÔºåÂÆÉÈáåÈù¢ÁöÑÂÖÉÁ¥†ÊòØÊúâÂ∫èÁöÑ„ÄÇÂõ†Ê≠§Ôºåadd()Ôºåremove()Ôºåcontains() ÊñπÊ≥ïÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶ÊòØ O(logn)„ÄÇ</p>
<h2 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h2><h3 id="HashMap"><a href="#HashMap" class="headerlink" title="HashMap"></a>HashMap</h3><p><code>HashMap</code> ÊòØ <code>Map</code> ÁöÑ‰∏Ä‰∏™ÂÆûÁé∞Á±ªÔºåÂÆÉ‰ª£Ë°®ÁöÑÊòØ‰∏ÄÁßçÈîÆÂÄºÂØπÁöÑÊï∞ÊçÆÂ≠òÂÇ®ÂΩ¢Âºè„ÄÇÂ§ßÂ§öÊï∞ÊÉÖÂÜµ‰∏ãÂèØ‰ª•Áõ¥Êé•ÂÆö‰ΩçÂà∞ÂÆÉÁöÑÂÄºÔºåÂõ†ËÄåÂÖ∑ÊúâÂæàÂø´ÁöÑËÆøÈóÆÈÄüÂ∫¶Ôºå‰ΩÜÈÅçÂéÜÈ°∫Â∫èÂç¥ÊòØ‰∏çÁ°ÆÂÆöÁöÑ„ÄÇ</p>
<p><code>jdk 8</code> ‰πãÂâçÔºåÂÖ∂ÂÜÖÈÉ®ÊòØÁî± <strong>Êï∞ÁªÑ + ÈìæË°®</strong> Êù•ÂÆûÁé∞ÁöÑÔºåËÄå <code>jdk 8</code> ÂØπ‰∫éÈìæË°®ÈïøÂ∫¶Ë∂ÖËøá 8 ÁöÑÈìæË°®Â∞ÜËΩ¨ÂÇ®‰∏∫ Á∫¢ÈªëÊ†ë„ÄÇJDK 1.8 ‰πãÊâÄ‰ª•Ê∑ªÂä†Á∫¢ÈªëÊ†ëÊòØÂõ†‰∏∫‰∏ÄÊó¶ÈìæË°®ËøáÈïøÔºå‰ºö‰∏•ÈáçÂΩ±Âìç HashMap ÁöÑÊÄßËÉΩÔºåËÄåÁ∫¢ÈªëÊ†ëÂÖ∑ÊúâÂø´ÈÄüÂ¢ûÂà†ÊîπÊü•ÁöÑÁâπÁÇπÔºåËøôÊ†∑Â∞±ÂèØ‰ª•ÊúâÊïàÁöÑËß£ÂÜ≥ÈìæË°®ËøáÈïøÊó∂Êìç‰ΩúÊØîËæÉÊÖ¢ÁöÑÈóÆÈ¢ò„ÄÇ</p>
<p><code>HashMap</code>ÊúÄÂ§öÂè™ÂÖÅËÆ∏‰∏ÄÊù°ËÆ∞ÂΩïÁöÑÈîÆ‰∏∫<code>null</code>Ôºànull key ÂìàÂ∏åÂÄº‰∏∫0ÔºâÔºåÂÖÅËÆ∏Â§öÊù°ËÆ∞ÂΩïÁöÑÂÄº‰∏∫<code>null</code>„ÄÇ‰∏ç‰øùËØÅÊúâÂ∫è (ÊØîÂ¶ÇÊèíÂÖ•ÁöÑÈ°∫Â∫è)„ÄÅ‰πü‰∏ç‰øùËØÅÂ∫è‰∏çÈöèÊó∂Èó¥ÂèòÂåñ„ÄÇ</p>
<p><code>HashMap</code>ÈùûÁ∫øÁ®ãÂÆâÂÖ®ÔºåÂç≥‰ªª‰∏ÄÊó∂ÂàªÂèØ‰ª•ÊúâÂ§ö‰∏™Á∫øÁ®ãÂêåÊó∂ÂÜô<code>HashMap</code>ÔºåÂèØËÉΩ‰ºöÂØºËá¥Êï∞ÊçÆÁöÑ‰∏ç‰∏ÄËá¥„ÄÇÂ¶ÇÊûúÈúÄË¶ÅÊª°Ë∂≥Á∫øÁ®ãÂÆâÂÖ®ÔºåÂèØ‰ª•Áî® <code>Collections</code>ÁöÑ<code>synchronizedMap</code>ÊñπÊ≥ï‰Ωø<code>HashMap</code>ÂÖ∑ÊúâÁ∫øÁ®ãÂÆâÂÖ®ÁöÑËÉΩÂäõÔºåÊàñËÄÖ‰ΩøÁî®<code>ConcurrentHashMap</code>ÔºåHashTable„ÄÇ</p>
<h4 id="HashMapÁöÑhashÂìàÂ∏åÂáΩÊï∞ÁöÑËÆæËÆ°ÂéüÁêÜÔºå‰ª•ÂèäHashMap‰∏ãÊ†áËé∑ÂèñÊñπÂºèÔºü"><a href="#HashMapÁöÑhashÂìàÂ∏åÂáΩÊï∞ÁöÑËÆæËÆ°ÂéüÁêÜÔºå‰ª•ÂèäHashMap‰∏ãÊ†áËé∑ÂèñÊñπÂºèÔºü" class="headerlink" title="HashMapÁöÑhashÂìàÂ∏åÂáΩÊï∞ÁöÑËÆæËÆ°ÂéüÁêÜÔºå‰ª•ÂèäHashMap‰∏ãÊ†áËé∑ÂèñÊñπÂºèÔºü"></a>HashMapÁöÑhashÂìàÂ∏åÂáΩÊï∞ÁöÑËÆæËÆ°ÂéüÁêÜÔºå‰ª•ÂèäHashMap‰∏ãÊ†áËé∑ÂèñÊñπÂºèÔºü</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">hash</span><span class="params">(Object key)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> h;</span><br><span class="line">  <span class="keyword">return</span> (key == <span class="keyword">null</span>) ? <span class="number">0</span> : (h = key.hashCode()) ^ (h &gt;&gt;&gt; <span class="number">16</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// indexFor ÊòØ jdk1.7 ÁöÑÊ∫êÁ†ÅÔºåjdk1.8 Ê≤°ÊúâËøô‰∏™ÊñπÊ≥ï‰ΩÜÊòØ jdk1.8 ‰πüÊòØÈÄöËøáÂèñÊ®°ËøêÁÆóÊù•ËÆ°ÁÆóÁöÑ</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">indexFor</span><span class="params">(<span class="keyword">int</span> h, <span class="keyword">int</span> length)</span> </span>&#123; </span><br><span class="line">   <span class="keyword">return</span> h &amp; (length-<span class="number">1</span>); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="../img/java/35.png"></p>
<ol>
<li>È¶ñÂÖàËé∑ÂèñhashcodeÔºå‰∏Ä‰∏™32‰ΩçÁöÑintÂÄº</li>
<li>ÁÑ∂ÂêéÂ∞ÜhashcodeÂ∑¶Áßª16‰ΩçÁöÑÂÄºËøõË°å‰∏éÊàñÔºåÂç≥Â∞ÜÈ´ò‰Ωç‰∏é‰Ωé‰ΩçËøõË°åÂºÇÊàñËøêÁÆóÔºåÂáèÂ∞ëÁ¢∞ÊíûÊú∫Áéá„ÄÇ</li>
<li>Â∞ÜËÆ°ÁÆóÂæóÂà∞ÁöÑhashÂÄº‰∏éhashmapÂÆπÈáè-1ÔºåËøõË°åÂèñ‰ΩôËøêÁÆóÔºå‰ΩÜÂú®ËÆ°ÁÆóÊú∫ËøêÁÆó‰∏≠&amp;ËÇØÂÆöÊØî%Âø´ÔºåÂèàÂõ†‰∏∫h % n = h &amp;Ôºàn - 1ÔºâÔºåÊâÄ‰ª•ÊúÄÁªàÂ∞ÜÁ¨¨‰∫åÊ≠•ÂæóÂà∞ÁöÑhashË∑ün-1ËøõË°å‰∏éËøêÁÆó„ÄÇnÊòØtable‰∏≠ÁöÑÈïøÂ∫¶„ÄÇ</li>
</ol>
<blockquote>
<p>ÂØπ‰∫é‰ªªÊÑèÁªôÂÆöÁöÑÂØπË±°ÔºåÂè™Ë¶ÅÂÆÉÁöÑ<code>hashCode()</code>ËøîÂõûÂÄºÁõ∏ÂêåÔºåÈÇ£‰πàÁ®ãÂ∫èË∞ÉÁî®ÊñπÊ≥ï‰∏ÄÊâÄËÆ°ÁÆóÂæóÂà∞ÁöÑ<code>Hash</code>Á†ÅÂÄºÊÄªÊòØÁõ∏ÂêåÁöÑ„ÄÇÊàë‰ª¨È¶ñÂÖàÊÉ≥Âà∞ÁöÑÂ∞±ÊòØÊää<code>hash</code>ÂÄºÂØπÊï∞ÁªÑÈïøÂ∫¶ÂèñÊ®°ËøêÁÆóÔºåËøôÊ†∑‰∏ÄÊù•ÔºåÂÖÉÁ¥†ÁöÑÂàÜÂ∏ÉÁõ∏ÂØπÊù•ËØ¥ÊòØÊØîËæÉÂùáÂåÄÁöÑ„ÄÇ‰ΩÜÊòØÔºåÊ®°ËøêÁÆóÁöÑÊ∂àËÄóËøòÊòØÊØîËæÉÂ§ßÁöÑÔºåËøôÈáåÊàë‰ª¨Áî® <code>&amp;</code> ‰ΩçËøêÁÆóÊù•‰ºòÂåñÊïàÁéá„ÄÇ</p>
<p>Ëøô‰∏™ÊñπÊ≥ïÈùûÂ∏∏Â∑ßÂ¶ôÔºåÂÆÉÈÄöËøá<code>h &amp; (table.length -1)</code>Êù•ÂæóÂà∞ËØ•ÂØπË±°ÁöÑ‰øùÂ≠ò‰ΩçÔºåËÄå<code>HashMap</code>Â∫ïÂ±ÇÊï∞ÁªÑÁöÑÈïøÂ∫¶ÊÄªÊòØ *****2 ÁöÑ n Ê¨°Êñπ*****ÔºåËøôÊòØ<code>HashMap</code>Âú®ÈÄüÂ∫¶‰∏äÁöÑ‰ºòÂåñ„ÄÇÂΩì length ÊÄªÊòØ 2 ÁöÑ n Ê¨°ÊñπÊó∂Ôºå<code>h&amp; (length-1)</code>ËøêÁÆóÁ≠â‰ª∑‰∫éÂØπ length ÂèñÊ®°Ôºå‰πüÂ∞±ÊòØ<code>h%length</code>Ôºå‰ΩÜÊòØ <em><strong>*&amp;*</strong></em> ÊØî <em><strong>*%*</strong></em> ÂÖ∑ÊúâÊõ¥È´òÁöÑÊïàÁéá„ÄÇ</p>
<p>Âú®<code>JDK1.8</code>ÁöÑÂÆûÁé∞‰∏≠Ôºå‰ºòÂåñ‰∫ÜÈ´ò‰ΩçËøêÁÆóÁöÑÁÆóÊ≥ïÔºåÈÄöËøá<code>hashCode()</code>ÁöÑÈ´ò 16 ‰ΩçÂºÇÊàñ‰Ωé 16 ‰ΩçÂÆûÁé∞ÁöÑÔºö(h = k.hashCode()) ^ (h &gt;&gt;&gt; 16)Ôºå‰∏ªË¶ÅÊòØ‰ªéÈÄüÂ∫¶„ÄÅÂäüÊïà„ÄÅË¥®ÈáèÊù•ËÄÉËôëÁöÑÔºåËøô‰πàÂÅöÂèØ‰ª• Node Êï∞ÁªÑ table ÁöÑ length ÊØîËæÉÂ∞èÁöÑÊó∂ÂÄôÔºå‰πüËÉΩ‰øùËØÅËÄÉËôëÂà∞È´ò‰Ωé Bit ÈÉΩÂèÇ‰∏éÂà∞ Hash ÁöÑËÆ°ÁÆó‰∏≠ÔºåÂêåÊó∂‰∏ç‰ºöÊúâÂ§™Â§ßÁöÑÂºÄÈîÄ„ÄÇ</p>
</blockquote>
<p><strong>ËÆæËÆ°ÂéüÂõ†Ôºö</strong></p>
<ol>
<li>‰∏ÄÂÆöË¶ÅÂ∞ΩÂèØËÉΩÈôç‰ΩéhashÁ¢∞ÊíûÔºåË∂äÂàÜÊï£Ë∂äÂ•ΩÔºõ</li>
<li>ÁÆóÊ≥ï‰∏ÄÂÆöË¶ÅÂ∞ΩÂèØËÉΩÈ´òÊïàÔºåÂõ†‰∏∫ËøôÊòØÈ´òÈ¢ëÊìç‰Ωú, Âõ†Ê≠§ÈááÁî®‰ΩçËøêÁÆóÔºõ</li>
</ol>
<h4 id="HashMap-Âú®‰ªÄ‰πàÊÉÖÂÜµ‰∏ãÂõûËøõË°åÊâ©ÂÆπÔºüÊàñËÄÖÊúâÂì™‰∫õÊìç‰Ωú‰ºöÂØºËá¥Êâ©ÂÆπÔºü"><a href="#HashMap-Âú®‰ªÄ‰πàÊÉÖÂÜµ‰∏ãÂõûËøõË°åÊâ©ÂÆπÔºüÊàñËÄÖÊúâÂì™‰∫õÊìç‰Ωú‰ºöÂØºËá¥Êâ©ÂÆπÔºü" class="headerlink" title="HashMap Âú®‰ªÄ‰πàÊÉÖÂÜµ‰∏ãÂõûËøõË°åÊâ©ÂÆπÔºüÊàñËÄÖÊúâÂì™‰∫õÊìç‰Ωú‰ºöÂØºËá¥Êâ©ÂÆπÔºü"></a>HashMap Âú®‰ªÄ‰πàÊÉÖÂÜµ‰∏ãÂõûËøõË°åÊâ©ÂÆπÔºüÊàñËÄÖÊúâÂì™‰∫õÊìç‰Ωú‰ºöÂØºËá¥Êâ©ÂÆπÔºü</h4><ol>
<li>Âú®ÊâßË°å HashMap ÁöÑÊûÑÈÄ†ÂáΩÊï∞ÊàñËÄÖ putAll() ÊñπÊ≥ïÊó∂Â¶ÇÊûúÂæÖÊ∑ªÂä†ÁöÑ map.size() Â§ß‰∫éÈòàÂÄºÊó∂ËøõË°åÊâ©ÂÆπ</li>
<li>Âõ†‰∏∫hashmap‰ΩøÁî®ÁöÑÊòØÊáíÂàùÂßãÂåñÔºåÈ¶ñÊ¨°Ê∑ªÂä†ÂÖÉÁ¥†ÁöÑÊó∂ÂÄô‰ºöËøõË°åresize()</li>
<li>ÂΩìputÂä†ÂÖ•ËäÇÁÇπÂêéÔºåÂèëÁé∞sizeÔºàÈîÆÂÄºÂØπÊï∞ÈáèÔºâ&gt;thresholdÊó∂ÔºåËøõË°åÊâ©ÂÆπ</li>
</ol>
<blockquote>
<p>JDK1.7ÁöÑÊó∂ÂÄôÊòØÂÖàËøõË°åÊâ©ÂÆπÂêéËøõË°åÊèíÂÖ•ÔºåËÄåÂú®JDK1.8ÁöÑÊó∂ÂÄôÂàôÊòØÂÖàÊèíÂÖ•ÂêéËøõË°åÊâ©ÂÆπ</p>
<p>ÂÖàÊâ©ÂÆπÂÜçputÂ∞±ÊòØ‰∏çÁÆ°ÂΩìÂâçÊèíÂÖ•ÁöÑÂÄºÊâÄÂ±ûÁöÑÊ°∂ÊòØ‰∏çÊòØÁ©∫ÔºåÈÉΩÂÖàÊâ©ÂÆπÔºå‰ºöÈÄ†ÊàêÊó†ÊïàÊâ©ÂÆπÔºõÂÖàputÂú®Êâ©ÂÆπÔºå‰ºöÂú®putÊó∂ÂèëÁé∞ÊòØÂê¶ÂΩìÂâçÊ°∂‰∏∫Á©∫ÔºåÂç≥ÊòØÂê¶ÂèëÁîühashÂÜ≤Á™ÅÔºåÂ¶ÇÊûúÂèëÁîü‰∫ÜÂ∞±Êâ©ÂÆπÔºå‰∏çÂèëÁîüÂ∞±Á≠â‰∏ã‰∏ÄÊ¨°ÊèíÂÖ•ÂÜ≤Á™ÅÊàñÂ§ß‰∫éÈòÄÂÄºÊó∂Êâ©ÂÆπ</p>
</blockquote>
<h4 id="Java‰∏≠HashMapÁöÑkeyÂÄºË¶ÅÊòØ‰∏∫Á±ªÂØπË±°ÂàôËØ•Á±ªÈúÄË¶ÅÊª°Ë∂≥‰ªÄ‰πàÊù°‰ª∂Ôºü"><a href="#Java‰∏≠HashMapÁöÑkeyÂÄºË¶ÅÊòØ‰∏∫Á±ªÂØπË±°ÂàôËØ•Á±ªÈúÄË¶ÅÊª°Ë∂≥‰ªÄ‰πàÊù°‰ª∂Ôºü" class="headerlink" title="Java‰∏≠HashMapÁöÑkeyÂÄºË¶ÅÊòØ‰∏∫Á±ªÂØπË±°ÂàôËØ•Á±ªÈúÄË¶ÅÊª°Ë∂≥‰ªÄ‰πàÊù°‰ª∂Ôºü"></a>Java‰∏≠HashMapÁöÑkeyÂÄºË¶ÅÊòØ‰∏∫Á±ªÂØπË±°ÂàôËØ•Á±ªÈúÄË¶ÅÊª°Ë∂≥‰ªÄ‰πàÊù°‰ª∂Ôºü</h4><p>ÈúÄË¶ÅÂêåÊó∂ÈáçÂÜôËØ•Á±ªÁöÑhashCode()ÊñπÊ≥ïÂíåÂÆÉÁöÑequals()ÊñπÊ≥ï„ÄÇ</p>
<p>‰ªéÊ∫êÁ†ÅÂèØ‰ª•ÂæóÁü•ÔºåÂú®ÊèíÂÖ•ÂÖÉÁ¥†ÁöÑÊó∂ÂÄôÊòØÂÖàÁÆóÂá∫ËØ•ÂØπË±°ÁöÑhashCode„ÄÇÂ¶ÇÊûúhashcodeÁõ∏Á≠âËØùÁöÑ„ÄÇÈÇ£‰πàË°®ÊòéËØ•ÂØπË±°ÊòØÂ≠òÂÇ®Âú®Âêå‰∏Ä‰∏™‰ΩçÁΩÆ‰∏äÁöÑ„ÄÇÂ¶ÇÊûúË∞ÉÁî®equals()ÊñπÊ≥ïÔºå‰∏§‰∏™keyÁõ∏ÂêåÔºåÂàôÊõøÊç¢ÂÖÉÁ¥†Â¶ÇÊûúË∞ÉÁî®equals()ÊñπÊ≥ïÔºå‰∏§‰∏™key‰∏çÁõ∏ÂêåÔºåÂàôËØ¥ÊòéËØ•hashCode‰ªÖ‰ªÖÊòØÁ¢∞Â∑ßÁõ∏ÂêåÔºåÊ≠§Êó∂ÊòØÊï£ÂàóÂÜ≤Á™ÅÔºåÂ∞ÜÊñ∞Â¢ûÁöÑÂÖÉÁ¥†ÊîæÂú®Ê°∂Â≠ê‰∏ä</p>
<p>ÈáçÂÜô‰∫Üequals()ÊñπÊ≥ïÔºåÂ∞±Ë¶ÅÈáçÂÜôhashCode()ÁöÑÊñπÊ≥ï„ÄÇÂõ†‰∏∫equals()ËÆ§ÂÆö‰∫ÜËøô‰∏§‰∏™ÂØπË±°Áõ∏ÂêåÔºåËÄåÂêå‰∏Ä‰∏™ÂØπË±°Ë∞ÉÁî®hashCode()ÊñπÊ≥ïÊó∂ÔºåÊòØÂ∫îËØ•ËøîÂõûÁõ∏ÂêåÁöÑÂÄºÁöÑÔºÅ</p>
<h4 id="HashMap-get-ÊñπÊ≥ïÁöÑÊâßË°åËøáÁ®ã"><a href="#HashMap-get-ÊñπÊ≥ïÁöÑÊâßË°åËøáÁ®ã" class="headerlink" title="HashMap get ÊñπÊ≥ïÁöÑÊâßË°åËøáÁ®ã"></a>HashMap get ÊñπÊ≥ïÁöÑÊâßË°åËøáÁ®ã</h4><p><strong>jdk 1.8</strong></p>
<p>ÂØπËæìÂÖ•ÁöÑkeyÁöÑÂÄºËÆ°ÁÆóhashÂÄº,</p>
<p>È¶ñÂÖàÂà§Êñ≠hashmap‰∏≠ÁöÑÊï∞ÁªÑÊòØÂê¶‰∏∫Á©∫ÂíåÊï∞ÁªÑÁöÑÈïøÂ∫¶ÊòØÂê¶‰∏∫0,Â¶ÇÊûú‰∏∫Á©∫Âíå‰∏∫0,ÂàôÁõ¥Êé•ÊîæÂõûnull</p>
<p>Â¶ÇÊûú‰∏ç‰∏∫Á©∫Âíå0,ËÆ°ÁÆókeyÂØπÂ∫îÁöÑÊï∞ÁªÑ‰∏ãÊ†á,Âà§Êñ≠ÂØπÂ∫î‰ΩçÁΩÆ‰∏äÁöÑÁ¨¨‰∏Ä‰∏™nodeÊòØÂê¶Êª°Ë∂≥Êù°‰ª∂,Â¶ÇÊûúÊª°Ë∂≥Êù°‰ª∂,Áõ¥Êé•ËøîÂõû</p>
<p>Â¶ÇÊûú‰∏çÊª°Ë∂≥Êù°‰ª∂,Âà§Êñ≠ÂΩìÂâçnodeÊòØÂê¶ÊòØÊúÄÂêé‰∏Ä‰∏™,Â¶ÇÊûúÊòØ,ËØ¥Êòé‰∏çÂ≠òÂú®key,ÂàôËøîÂõûnull</p>
<p>Â¶ÇÊûú‰∏çÊòØÊúÄÂêé‰∏Ä‰∏™,Âà§Êñ≠ÊòØÂê¶ÊòØÁ∫¢ÈªëÊ†ë,Â¶ÇÊûúÊòØÁ∫¢ÈªëÊ†ë,Âàô‰ΩøÁî®Á∫¢ÈªëÊ†ëÁöÑÊñπÂºèËé∑ÂèñÂØπÂ∫îÁöÑkey,</p>
<p>Â¶ÇÊûú‰∏çÊòØÁ∫¢ÈªëÊ†ë,ÈÅçÂéÜÈìæË°®ÊòØÂê¶ÊúâÊª°Ë∂≥Êù°‰ª∂ÁöÑ,Â¶ÇÊûúÊúâ,Áõ¥Êé•ÊîæÂõû,Âê¶ÂàôËøîÂõûnull</p>
<h4 id="HashMap-put-ÊñπÊ≥ïÁöÑÊâßË°åËøáÁ®ã"><a href="#HashMap-put-ÊñπÊ≥ïÁöÑÊâßË°åËøáÁ®ã" class="headerlink" title="HashMap put ÊñπÊ≥ïÁöÑÊâßË°åËøáÁ®ã"></a>HashMap put ÊñπÊ≥ïÁöÑÊâßË°åËøáÁ®ã</h4><p><img src="../img/java/36.png"></p>
<p>‚ë†.Âà§Êñ≠ÈîÆÂÄºÂØπÊï∞ÁªÑ table ÊòØÂê¶‰∏∫Á©∫Êàñ‰∏∫nullÔºåÂê¶ÂàôÊâßË°åresize()ËøõË°åÊâ©ÂÆπÔºõ </p>
<p>‚ë°.Ê†πÊçÆÈîÆÂÄºkeyËÆ°ÁÆóhashÂÄºÂæóÂà∞ÊèíÂÖ•ÁöÑÊï∞ÁªÑÁ¥¢Âºï iÔºåÂ¶ÇÊûútable[i]==nullÔºåÁõ¥Êé•Êñ∞Âª∫ËäÇÁÇπÊ∑ªÂä†ÔºåËΩ¨Âêë‚ë•ÔºåÂ¶ÇÊûútable[i]‰∏ç‰∏∫Á©∫ÔºåËΩ¨Âêë‚ë¢Ôºõ</p>
<p> ‚ë¢.Âà§Êñ≠ table[i] ÁöÑÈ¶ñ‰∏™ÂÖÉÁ¥†ÊòØÂê¶Âíåkey‰∏ÄÊ†∑ÔºåÂ¶ÇÊûúÁõ∏ÂêåÁõ¥Êé•Ë¶ÜÁõñvalueÔºåÂê¶ÂàôËΩ¨Âêë‚ë£ÔºåËøôÈáåÁöÑÁõ∏ÂêåÊåáÁöÑÊòØhashCode‰ª•ÂèäequalsÔºõ </p>
<p>‚ë£.Âà§Êñ≠table[i] ÊòØÂê¶‰∏∫treeNodeÔºåÂç≥table[i] ÊòØÂê¶ÊòØÁ∫¢ÈªëÊ†ëÔºåÂ¶ÇÊûúÊòØÁ∫¢ÈªëÊ†ëÔºåÂàôÁõ¥Êé•Âú®Ê†ë‰∏≠ÊèíÂÖ•ÈîÆÂÄºÂØπÔºåÂê¶ÂàôËΩ¨Âêë‚ë§Ôºõ </p>
<p>‚ë§.ÈÅçÂéÜtable[i]ÔºåÂà§Êñ≠ÈìæË°®ÈïøÂ∫¶ÊòØÂê¶Â§ß‰∫é8ÔºåÂ§ß‰∫é8ÁöÑËØùÊääÈìæË°®ËΩ¨Êç¢‰∏∫Á∫¢ÈªëÊ†ëÔºåÂú®Á∫¢ÈªëÊ†ë‰∏≠ÊâßË°åÊèíÂÖ•Êìç‰ΩúÔºåÂê¶ÂàôËøõË°åÈìæË°®ÁöÑÊèíÂÖ•Êìç‰ΩúÔºõÈÅçÂéÜËøáÁ®ã‰∏≠Ëã•ÂèëÁé∞keyÂ∑≤ÁªèÂ≠òÂú®Áõ¥Êé•Ë¶ÜÁõñvalueÂç≥ÂèØÔºõ </p>
<p>‚ë•.ÊèíÂÖ•ÊàêÂäüÂêéÔºåÂà§Êñ≠ÂÆûÈôÖÂ≠òÂú®ÁöÑÈîÆÂÄºÂØπÊï∞ÈáèsizeÊòØÂê¶Ë∂ÖÂ§ö‰∫ÜÊúÄÂ§ßÂÆπÈáèthresholdÔºåÂ¶ÇÊûúË∂ÖËøáÔºåËøõË°åÊâ©ÂÆπ„ÄÇ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">put</span><span class="params">(K key, V value)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ÂØπkeyÁöÑhashCode()ÂÅöhash</span></span><br><span class="line">    <span class="keyword">return</span> putVal(hash(key), key, value, <span class="keyword">false</span>, <span class="keyword">true</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">final</span> V <span class="title">putVal</span><span class="params">(<span class="keyword">int</span> hash, K key, V value, <span class="keyword">boolean</span> onlyIfAbsent,</span></span></span><br><span class="line"><span class="function"><span class="params">               <span class="keyword">boolean</span> evict)</span> </span>&#123;</span><br><span class="line">    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; <span class="keyword">int</span> n, i;</span><br><span class="line">    <span class="comment">// Ê≠•È™§‚ë†Ôºötab‰∏∫Á©∫ÂàôÂàõÂª∫</span></span><br><span class="line">    <span class="keyword">if</span> ((tab = table) == <span class="keyword">null</span> || (n = tab.length) == <span class="number">0</span>)</span><br><span class="line">        n = (tab = resize()).length;</span><br><span class="line">    <span class="comment">// Ê≠•È™§‚ë°ÔºöËÆ°ÁÆóindexÔºåÂπ∂ÂØπnullÂÅöÂ§ÑÁêÜ </span></span><br><span class="line">    <span class="keyword">if</span> ((p = tab[i = (n - <span class="number">1</span>) &amp; hash]) == <span class="keyword">null</span>) </span><br><span class="line">        tab[i] = newNode(hash, key, value, <span class="keyword">null</span>);</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        Node&lt;K,V&gt; e; K k;</span><br><span class="line">        <span class="comment">// Ê≠•È™§‚ë¢ÔºöËäÇÁÇπkeyÂ≠òÂú®ÔºåÁõ¥Êé•Ë¶ÜÁõñvalue</span></span><br><span class="line">        <span class="keyword">if</span> (p.hash == hash &amp;&amp;</span><br><span class="line">            ((k = p.key) == key || (key != <span class="keyword">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">            e = p;</span><br><span class="line">        <span class="comment">// Ê≠•È™§‚ë£ÔºöÂà§Êñ≠ËØ•Èìæ‰∏∫Á∫¢ÈªëÊ†ë</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (p <span class="keyword">instanceof</span> TreeNode)</span><br><span class="line">            e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(<span class="keyword">this</span>, tab, hash, key, value);</span><br><span class="line">        <span class="comment">// Ê≠•È™§‚ë§ÔºöËØ•Èìæ‰∏∫ÈìæË°®</span></span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> binCount = <span class="number">0</span>; ; ++binCount) &#123;</span><br><span class="line">                <span class="keyword">if</span> ((e = p.next) == <span class="keyword">null</span>) &#123;</span><br><span class="line">                    p.next = newNode(hash, key,value,<span class="keyword">null</span>);</span><br><span class="line">                     <span class="comment">//ÈìæË°®ÈïøÂ∫¶Â§ß‰∫é8ËΩ¨Êç¢‰∏∫Á∫¢ÈªëÊ†ëËøõË°åÂ§ÑÁêÜ</span></span><br><span class="line">                    <span class="keyword">if</span> (binCount &gt;= TREEIFY_THRESHOLD - <span class="number">1</span>) <span class="comment">// -1 for 1st  </span></span><br><span class="line">                        treeifyBin(tab, hash);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                 <span class="comment">// keyÂ∑≤ÁªèÂ≠òÂú®Áõ¥Êé•Ë¶ÜÁõñvalue</span></span><br><span class="line">                <span class="keyword">if</span> (e.hash == hash &amp;&amp;</span><br><span class="line">                    ((k = e.key) == key || (key != <span class="keyword">null</span> &amp;&amp; key.equals(k)))) </span><br><span class="line">                         <span class="keyword">break</span>;</span><br><span class="line">                p = e;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (e != <span class="keyword">null</span>) &#123; <span class="comment">// existing mapping for key</span></span><br><span class="line">            V oldValue = e.value;</span><br><span class="line">            <span class="keyword">if</span> (!onlyIfAbsent || oldValue == <span class="keyword">null</span>)</span><br><span class="line">                e.value = value;</span><br><span class="line">            afterNodeAccess(e);</span><br><span class="line">            <span class="keyword">return</span> oldValue;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ++modCount;</span><br><span class="line">    <span class="comment">// Ê≠•È™§‚ë•ÔºöË∂ÖËøáÊúÄÂ§ßÂÆπÈáè Â∞±Êâ©ÂÆπ</span></span><br><span class="line">    <span class="keyword">if</span> (++size &gt; threshold)</span><br><span class="line">        resize();</span><br><span class="line">    afterNodeInsertion(evict);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>jdk 1.7  put()ÊñπÊ≥ï</p>
<ul>
<li>Ë∞ÉÁî®putÊñπÊ≥ïÁöÑÊó∂ÂÄôÈ¶ñÂÖàÂà§Êñ≠hashmapÊï∞ÁªÑÊòØÂê¶‰∏∫Á©∫Êï∞ÁªÑ,</li>
<li>Â¶ÇÊûú‰∏∫Á©∫,ËøõË°åÂàùÂßãÂåñ,Âà§Êñ≠keyÁöÑÂÄºÊòØÂê¶ÊòØnull,</li>
<li>Â¶ÇÊûúÊòØnull,ÊääÂØπÂ∫îÁöÑvalueÂÄºÂ≠òËøõÊï∞ÁªÑ‰∏≠‰∏ãÊ†á‰∏∫0ÁöÑ‰ΩçÁΩÆ,</li>
<li>ËÆ°ÁÆókeyÁöÑhashÂÄº,Âπ∂ËÆ°ÁÆóÂá∫‰∏ãÊ†á,</li>
<li>ÈÅçÂéÜ‰∏ãÊ†áÂØπÂ∫îÁöÑÈìæË°®,ÂåπÈÖçhashÂÄºÂíåkeyÁöÑÂÄº,</li>
<li>Â¶ÇÊûúÂ≠òÂú®,ÂàôË¶ÜÁõñ,ËøîÂõûÊóßÂÄº</li>
<li>Â¶ÇÊûú‰∏çÂ≠òÂú®,Êñ∞Ê∑ªÂä†‰∏Ä‰∏™,ËøîÂõûnull</li>
<li>Â¶ÇÊûúÊâ©ÂÆπ,ÊòØÂÖàÊâ©ÂÆπ‰πãÂêéÂÜçÊääÊï∞ÊçÆÊ∑ªÂä†ËøõÊñ∞Êâ©ÂÆπÁöÑÊï∞ÁªÑ‰∏≠„ÄÇÂ¶ÇÊûúÊï∞ÁªÑ‰∏≠ÂÖÉÁ¥†ÁöÑÂÆπÈáèË∂ÖËøáÈòàÂÄº,‰ºöËß¶ÂèëÊâ©ÂÆπ,Êâ©ÂÆπÊòØÂÖàÊääÊ∫êÊï∞ÁªÑÊîæËøõ‰∏Ä‰∏™‰∏¥Êó∂Êï∞ÁªÑ‰∏≠,Ëé∑ÂèñËÄÅÊï∞ÁªÑÁöÑÈïøÂ∫¶,ÈÄöËøáËÄÅÊï∞ÁªÑÈïøÂ∫¶‰πò2Ëé∑ÂèñÊñ∞Êï∞ÁªÑÈïøÂ∫¶,Âπ∂ÂàõÂª∫Êñ∞Êï∞ÁªÑ,Êää‰∏¥Êó∂Êï∞ÁªÑ‰∏≠ÁöÑÊï∞ÊçÆÈÄöËøáÈáçÊñ∞ËÆ°ÁÆó‰∏ãË°®,Â≠òËøõÊâ©ÂÆπÂêéÁöÑÊï∞ÁªÑ‰∏≠„ÄÇ</li>
</ul>
<h4 id="HashMapÊ£ÄÊµãÂà∞hashÂÜ≤Á™Å‰πãÂêéÂ∞ÜÂÖÉÁ¥†ÊèíÂÖ•Âà∞ÈìæË°®ÁöÑÂ§¥ÈÉ®ËøòÊòØÂ∞æÈÉ®Ôºü"><a href="#HashMapÊ£ÄÊµãÂà∞hashÂÜ≤Á™Å‰πãÂêéÂ∞ÜÂÖÉÁ¥†ÊèíÂÖ•Âà∞ÈìæË°®ÁöÑÂ§¥ÈÉ®ËøòÊòØÂ∞æÈÉ®Ôºü" class="headerlink" title="HashMapÊ£ÄÊµãÂà∞hashÂÜ≤Á™Å‰πãÂêéÂ∞ÜÂÖÉÁ¥†ÊèíÂÖ•Âà∞ÈìæË°®ÁöÑÂ§¥ÈÉ®ËøòÊòØÂ∞æÈÉ®Ôºü"></a>HashMapÊ£ÄÊµãÂà∞hashÂÜ≤Á™Å‰πãÂêéÂ∞ÜÂÖÉÁ¥†ÊèíÂÖ•Âà∞ÈìæË°®ÁöÑÂ§¥ÈÉ®ËøòÊòØÂ∞æÈÉ®Ôºü</h4><p>hashmap ÊâßË°åÂ∞æÊèíÊ≥ïÔºàÁõ¥Êé•ÊèíÂÖ•ÈìæË°®ÊàñÁ∫¢ÈªëÊ†ëÂ∞æÈÉ®Ôºâ</p>
<blockquote>
<p>Â∞æÊèíÊ≥ï‰∏ç‰ºöÂá∫Áé∞ÈÄÜÂ∫èÔºåÁéØÂΩ¢ÂàóË°®ÔºåÊ≠ªÂæ™ÁéØÁ≠âÈóÆÈ¢ò</p>
</blockquote>
<h4 id="HashMapÁ∫¢ÈªëÊ†ëÁöÑÈòàÂÄº‰∏∫‰ªÄ‰πàÊòØ8Ôºü"><a href="#HashMapÁ∫¢ÈªëÊ†ëÁöÑÈòàÂÄº‰∏∫‰ªÄ‰πàÊòØ8Ôºü" class="headerlink" title="HashMapÁ∫¢ÈªëÊ†ëÁöÑÈòàÂÄº‰∏∫‰ªÄ‰πàÊòØ8Ôºü"></a>HashMapÁ∫¢ÈªëÊ†ëÁöÑÈòàÂÄº‰∏∫‰ªÄ‰πàÊòØ8Ôºü</h4><p>È¶ñÂÖàÂíåhashcodeÁ¢∞ÊíûÊ¨°Êï∞ÁöÑÊ≥äÊùæÂàÜÂ∏ÉÊúâÂÖ≥Ôºå‰∏ªË¶ÅÊòØ‰∏∫‰∫ÜÂØªÊâæ‰∏ÄÁßçÊó∂Èó¥ÂíåÁ©∫Èó¥ÁöÑÂπ≥Ë°°„ÄÇÂú®Ë¥üËΩΩÂõ†Â≠ê0.75ÔºàHashMapÈªòËÆ§ÔºâÁöÑÊÉÖÂÜµ‰∏ãÔºåÂçï‰∏™hashÊßΩÂÜÖÂÖÉÁ¥†‰∏™Êï∞‰∏∫8ÁöÑÊ¶ÇÁéáÂ∞è‰∫éÁôæ‰∏áÂàÜ‰πã‰∏ÄÔºåÂ∞Ü7‰Ωú‰∏∫‰∏Ä‰∏™ÂàÜÊ∞¥Â≤≠ÔºåÁ≠â‰∫é7Êó∂‰∏çÂÅöËΩ¨Êç¢ÔºåÂ§ß‰∫éÁ≠â‰∫é8ÊâçËΩ¨Á∫¢ÈªëÊ†ëÔºåÂ∞è‰∫éÁ≠â‰∫é6ÊâçËΩ¨ÈìæË°®„ÄÇÈìæË°®‰∏≠ÂÖÉÁ¥†‰∏™Êï∞‰∏∫8Êó∂ÁöÑÊ¶ÇÁéáÂ∑≤ÁªèÈùûÂ∏∏Â∞èÔºåÂÜçÂ§öÁöÑÂ∞±Êõ¥Â∞ë‰∫ÜÔºåÊâÄ‰ª•Âéü‰ΩúËÄÖÂú®ÈÄâÊã©ÈìæË°®ÂÖÉÁ¥†‰∏™Êï∞Êó∂ÈÄâÊã©‰∫Ü8ÔºåÊòØÊ†πÊçÆÊ¶ÇÁéáÁªüËÆ°ËÄåÈÄâÊã©ÁöÑ„ÄÇ</p>
<p>Á∫¢ÈªëÊ†ë‰∏≠ÁöÑTreeNodeÊòØÈìæË°®‰∏≠ÁöÑNodeÊâÄÂç†Á©∫Èó¥ÁöÑ2ÂÄçÔºåËôΩÁÑ∂Á∫¢ÈªëÊ†ëÁöÑÊü•ÊâæÊïàÁéá‰∏∫o(logN)ÔºåË¶Å‰ºò‰∫éÈìæË°®ÁöÑo(N)Ôºå‰ΩÜÊòØÂΩìÈìæË°®ÈïøÂ∫¶ÊØîËæÉÂ∞èÁöÑÊó∂ÂÄôÔºåÂç≥‰ΩøÂÖ®ÈÉ®ÈÅçÂéÜÔºåÊó∂Èó¥Â§çÊùÇÂ∫¶‰πü‰∏ç‰ºöÂ§™È´ò„ÄÇÊâÄ‰ª•ÔºåË¶ÅÂØªÊâæ‰∏ÄÁßçÊó∂Èó¥ÂíåÁ©∫Èó¥ÁöÑÂπ≥Ë°°ÔºåÂç≥Âú®ÈìæË°®ÈïøÂ∫¶ËææÂà∞‰∏Ä‰∏™ÈòàÂÄº‰πãÂêéÂÜçËΩ¨Êç¢‰∏∫Á∫¢ÈªëÊ†ë„ÄÇ</p>
<h4 id="Hash-ÂÜ≤Á™ÅÊó∂‰∏∫‰ªÄ‰πàÊòØÁ∫¢ÈªëÊ†ëËÄå‰∏çÊòØAVLÊ†ëÊàñBÊ†ëÔºü"><a href="#Hash-ÂÜ≤Á™ÅÊó∂‰∏∫‰ªÄ‰πàÊòØÁ∫¢ÈªëÊ†ëËÄå‰∏çÊòØAVLÊ†ëÊàñBÊ†ëÔºü" class="headerlink" title="Hash ÂÜ≤Á™ÅÊó∂‰∏∫‰ªÄ‰πàÊòØÁ∫¢ÈªëÊ†ëËÄå‰∏çÊòØAVLÊ†ëÊàñBÊ†ëÔºü"></a>Hash ÂÜ≤Á™ÅÊó∂‰∏∫‰ªÄ‰πàÊòØÁ∫¢ÈªëÊ†ëËÄå‰∏çÊòØAVLÊ†ëÊàñBÊ†ëÔºü</h4><p>AVLÊ†ëÊØîÁ∫¢ÈªëÊ†ë‰øùÊåÅÊõ¥Âä†‰∏•Ê†ºÁöÑÂπ≥Ë°°„ÄÇÂõ†Ê≠§ÔºåÂú®AVLÊ†ë‰∏≠Êü•ÊâæÈÄöÂ∏∏Êõ¥Âø´Ôºå‰ΩÜËøôÊòØ‰ª•Êõ¥Â§öÊóãËΩ¨Êìç‰ΩúÂØºËá¥Êõ¥ÊÖ¢ÁöÑÊèíÂÖ•ÂíåÂà†Èô§‰∏∫‰ª£‰ª∑ÁöÑ„ÄÇÂõ†Ê≠§ÔºåAVLÊ†ëÊõ¥Âä†ÈÄÇÂêà<strong>Êü•ÊâæÂØÜÈõÜÂûã</strong>‰ªªÂä°„ÄÇ</p>
<p>Á∫¢ÈªëÊ†ëÈÄÇÁî®‰∫é <strong>ÊèíÂÖ•ÂØÜÈõÜÂûã</strong> ‰ªªÂä°ÔºåËÄå‰∏îÊõ¥Âä†ÈÄöÁî®ÔºåÂú®Ê∑ªÂä†ÔºåÊèíÂÖ•ÂíåÂà†Èô§ÊñπÈù¢ÈÉΩÊúâ‰∏çÈîôÁöÑË°®Áé∞„ÄÇ</p>
<h4 id="Êâ©ÂÆπÊú∫Âà∂"><a href="#Êâ©ÂÆπÊú∫Âà∂" class="headerlink" title="Êâ©ÂÆπÊú∫Âà∂"></a>Êâ©ÂÆπÊú∫Âà∂</h4><p>hashmapÂú®‰ª•‰∏ãÂá†ÁßçÊÉÖÂÜµÊó∂Ôºå‰ºöËß¶ÂèëÊâ©ÂÆπÊú∫Âà∂„ÄÇ</p>
<ol>
<li>Âú®ÊâßË°å HashMap ÁöÑÊûÑÈÄ†ÂáΩÊï∞ÊàñËÄÖ putAll() ÊñπÊ≥ïÊó∂Â¶ÇÊûúÂæÖÊ∑ªÂä†ÁöÑ map.size() Â§ß‰∫éÈòàÂÄºÊó∂ËøõË°åÊâ©ÂÆπ</li>
<li>Âõ†‰∏∫hashmap‰ΩøÁî®ÁöÑÊòØÊáíÂàùÂßãÂåñÔºåÈ¶ñÊ¨°Ê∑ªÂä†ÂÖÉÁ¥†ÁöÑÊó∂ÂÄô‰ºöËøõË°åresize()</li>
<li>ÂΩìputÂä†ÂÖ•ËäÇÁÇπÂêéÔºåÂèëÁé∞sizeÔºàÈîÆÂÄºÂØπÊï∞ÈáèÔºâ&gt;thresholdÊó∂ÔºåËøõË°åÊâ©ÂÆπ</li>
</ol>
<p>Êâ©ÂÆπÂ∞±ÊòØÈáçÊñ∞ÂÆö‰πâÂÆπÈáèÔºåÂú®hashmap‰∏≠ÔºåÂ¶ÇÊûú‰∏çÊñ≠ÁöÑputÂÖÉÁ¥†ÔºåËÄåhashMapÂØπË±°‰∏≠ÁöÑÊï∞ÁªÑÊó†Ê≥ïË£ÖÂæó‰∏ãÊõ¥Â§öÂØπË±°Êó∂ÔºåÂØπË±°Â∞±ÈúÄË¶ÅËøõË°åÊâ©ÂÆπÔºåÊâ©Â§ßÊï∞ÁªÑÈïøÂ∫¶„ÄÇ</p>
<p>Âú®java‰∏≠Êï∞ÁªÑÊòØ‰∏çËÉΩÂ§üËá™Âä®Êâ©ÂÆπÁöÑÔºåÊòØÈááÁî®‰∏Ä‰∏™Êñ∞ÁöÑÂ§ßÂÆπÈáèÊï∞ÁªÑ‰ª£ÊõøÂéüÊúâÁöÑÂ∞èÊï∞ÁªÑ„ÄÇ</p>
<p>Êâ©ÂÆπÂêéÔºåÊôÆÈÄöÈìæË°®‰∏äÁöÑËäÇÁÇπÂåÖÊã¨Á∫¢ÈªëÊ†ëÈÉΩÂæóÈáçÊñ∞Êò†Â∞ÑÔºåÊ≠§Êó∂Áî±‰∫éjdk1.8 ‰∏≠ÁöÑhashmapËßÑÂÆöÊï∞ÁªÑÁöÑÂÆπÈáèÂøÖÈ°ªÊòØ‰∫åÁöÑÂπÇÂ§ßÂ∞èÔºåÊâÄ‰ª•Âú®ÈáçÊñ∞ËÆ°ÁÆóÂÖÉÁ¥†‰ΩçÁΩÆÊó∂ÔºåË¶Å‰πàÂú®Âéü‰ΩçÁΩÆÔºåË¶Å‰πàÂú®Âéü‰ΩçÁΩÆÁöÑÂü∫Á°Ä‰∏ä+ÂéüÈïøÂ∫¶„ÄÇ</p>
<h4 id="Âä†ËΩΩÂõ†Â≠ê‰∏∫‰ªÄ‰πàÊòØ0-75Ôºü"><a href="#Âä†ËΩΩÂõ†Â≠ê‰∏∫‰ªÄ‰πàÊòØ0-75Ôºü" class="headerlink" title="Âä†ËΩΩÂõ†Â≠ê‰∏∫‰ªÄ‰πàÊòØ0.75Ôºü"></a>Âä†ËΩΩÂõ†Â≠ê‰∏∫‰ªÄ‰πàÊòØ0.75Ôºü</h4><p>Âä†ËΩΩÂõ†Â≠ê‰πüÂè´Êâ©ÂÆπÂõ†Â≠êÊàñË¥üËΩΩÂõ†Â≠êÔºåÁî®Êù•Âà§Êñ≠‰ªÄ‰πàÊó∂ÂÄôËøõË°åÊâ©ÂÆπÁöÑÔºåÂÅáÂ¶ÇÂä†ËΩΩÂõ†Â≠êÊòØ 0.5ÔºåHashMap ÁöÑÂàùÂßãÂåñÂÆπÈáèÊòØ 16ÔºåÈÇ£‰πàÂΩì HashMap ‰∏≠Êúâ 16*0.5=8 ‰∏™ÂÖÉÁ¥†Êó∂ÔºåHashMap Â∞±‰ºöËøõË°åÊâ©ÂÆπ„ÄÇ </p>
<p>ÈÇ£Âä†ËΩΩÂõ†Â≠ê‰∏∫‰ªÄ‰πàÊòØ 0.75 ËÄå‰∏çÊòØ 0.5 ÊàñËÄÖ 1.0 Âë¢Ôºü </p>
<p>ËøôÂÖ∂ÂÆûÊòØÂá∫‰∫éÂÆπÈáèÂíåÊÄßËÉΩ‰πãÈó¥Âπ≥Ë°°ÁöÑÁªìÊûúÔºö </p>
<ul>
<li><p>ÂΩìÂä†ËΩΩÂõ†Â≠êËÆæÁΩÆÊØîËæÉÂ§ßÁöÑÊó∂ÂÄôÔºåÊâ©ÂÆπÁöÑÈó®ÊßõÂ∞±Ë¢´ÊèêÈ´ò‰∫ÜÔºåÊâ©ÂÆπÂèëÁîüÁöÑÈ¢ëÁéáÊØîËæÉ‰ΩéÔºåÂç†Áî®ÁöÑÁ©∫Èó¥‰ºöÊØîËæÉÂ∞èÔºå‰ΩÜÊ≠§Êó∂ÂèëÁîü Hash ÂÜ≤Á™ÅÁöÑÂá†ÁéáÂ∞±‰ºöÊèêÂçáÔºåÂõ†Ê≠§ÈúÄË¶ÅÊõ¥Â§çÊùÇÁöÑÊï∞ÊçÆÁªìÊûÑÊù•Â≠òÂÇ®ÂÖÉÁ¥†ÔºåËøôÊ†∑ÂØπÂÖÉÁ¥†ÁöÑÊìç‰ΩúÊó∂Èó¥Â∞±‰ºöÂ¢ûÂä†ÔºåËøêË°åÊïàÁéá‰πü‰ºöÂõ†Ê≠§Èôç‰ΩéÔºõ </p>
</li>
<li><p>ËÄåÂΩìÂä†ËΩΩÂõ†Â≠êÂÄºÊØîËæÉÂ∞èÁöÑÊó∂ÂÄôÔºåÊâ©ÂÆπÁöÑÈó®Êßõ‰ºöÊØîËæÉ‰ΩéÔºåÂõ†Ê≠§‰ºöÂç†Áî®Êõ¥Â§öÁöÑÁ©∫Èó¥ÔºåÊ≠§Êó∂ÂÖÉÁ¥†ÁöÑÂ≠òÂÇ®Â∞±ÊØîËæÉÁ®ÄÁñèÔºåÂèëÁîüÂìàÂ∏åÂÜ≤Á™ÅÁöÑÂèØËÉΩÊÄßÂ∞±ÊØîËæÉÂ∞èÔºåÂõ†Ê≠§Êìç‰ΩúÊÄßËÉΩ‰ºöÊØîËæÉÈ´ò„ÄÇ </p>
</li>
</ul>
<p>ÊâÄ‰ª•ÁªºÂêà‰∫Ü‰ª•‰∏äÊÉÖÂÜµÂ∞±Âèñ‰∫Ü‰∏Ä‰∏™ 0.5 Âà∞ 1.0 ÁöÑÂπ≥ÂùáÊï∞ 0.75 ‰Ωú‰∏∫Âä†ËΩΩÂõ†Â≠ê„ÄÇ</p>
<h4 id="ÂΩìÊúâÂìàÂ∏åÂÜ≤Á™ÅÊó∂ÔºåHashMapÊòØÂ¶Ç‰ΩïÊü•ÊâæÂπ∂Á°ÆËÆ§ÂÖÉÁ¥†ÁöÑÔºü"><a href="#ÂΩìÊúâÂìàÂ∏åÂÜ≤Á™ÅÊó∂ÔºåHashMapÊòØÂ¶Ç‰ΩïÊü•ÊâæÂπ∂Á°ÆËÆ§ÂÖÉÁ¥†ÁöÑÔºü" class="headerlink" title="ÂΩìÊúâÂìàÂ∏åÂÜ≤Á™ÅÊó∂ÔºåHashMapÊòØÂ¶Ç‰ΩïÊü•ÊâæÂπ∂Á°ÆËÆ§ÂÖÉÁ¥†ÁöÑÔºü"></a>ÂΩìÊúâÂìàÂ∏åÂÜ≤Á™ÅÊó∂ÔºåHashMapÊòØÂ¶Ç‰ΩïÊü•ÊâæÂπ∂Á°ÆËÆ§ÂÖÉÁ¥†ÁöÑÔºü</h4><p>bucket ÈáåÁöÑÁ¨¨‰∏Ä‰∏™ËäÇÁÇπÔºåÁõ¥Êé•ÂëΩ‰∏≠Ôºõ </p>
<p>Â¶ÇÊûúÊúâÂÜ≤Á™ÅÔºåÂàôÈÄöËøá key.equals(k) ÂéªÊü•ÊâæÂØπÂ∫îÁöÑ entry </p>
<p>Ëã•‰∏∫Ê†ëÔºåÂàôÂú®Ê†ë‰∏≠ÈÄöËøá key.equals(k) Êü•ÊâæÔºåO(logn)Ôºõ </p>
<p>Ëã•‰∏∫ÈìæË°®ÔºåÂàôÂú®ÈìæË°®‰∏≠ÈÄöËøá key.equals(k) Êü•ÊâæÔºåO(n)„ÄÇ</p>
<p>ÂÖ∑‰Ωì‰ª£Á†ÅÁöÑÂÆûÁé∞Â¶Ç‰∏ãÔºö</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">get</span><span class="params">(Object key)</span> </span>&#123;</span><br><span class="line">    Node&lt;K,V&gt; e;</span><br><span class="line">    <span class="comment">// ÂØπ key ËøõË°åÂìàÂ∏åÊìç‰Ωú</span></span><br><span class="line">    <span class="keyword">return</span> (e = getNode(hash(key), key)) == <span class="keyword">null</span> ? <span class="keyword">null</span> : e.value;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">final</span> Node&lt;K,V&gt; <span class="title">getNode</span><span class="params">(<span class="keyword">int</span> hash, Object key)</span> </span>&#123;</span><br><span class="line">    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; first, e; <span class="keyword">int</span> n; K k;</span><br><span class="line">    <span class="comment">// ÈùûÁ©∫Âà§Êñ≠</span></span><br><span class="line">    <span class="keyword">if</span> ((tab = table) != <span class="keyword">null</span> &amp;&amp; (n = tab.length) &gt; <span class="number">0</span> &amp;&amp;</span><br><span class="line">        (first = tab[(n - <span class="number">1</span>) &amp; hash]) != <span class="keyword">null</span>) &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// Âà§Êñ≠Á¨¨‰∏Ä‰∏™ÂÖÉÁ¥†ÊòØÂê¶ÊòØË¶ÅÊü•ËØ¢ÁöÑÂÖÉÁ¥†</span></span><br><span class="line">        <span class="keyword">if</span> (first.hash == hash &amp;&amp; </span><br><span class="line">            ((k = first.key) == key || (key != <span class="keyword">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">            <span class="keyword">return</span> first;</span><br><span class="line">        <span class="comment">// ‰∏Ä‰∏ã‰∏Ä‰∏™ËäÇÁÇπÈùûÁ©∫Âà§Êñ≠</span></span><br><span class="line">        <span class="keyword">if</span> ((e = first.next) != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="comment">// Â¶ÇÊûúÁ¨¨‰∏ÄËäÇÁÇπÊòØÊ†ëÁªìÊûÑÔºåÂàô‰ΩøÁî® getTreeNode Áõ¥Êé•Ëé∑ÂèñÁõ∏Â∫îÁöÑÊï∞ÊçÆ</span></span><br><span class="line">            <span class="keyword">if</span> (first <span class="keyword">instanceof</span> TreeNode)</span><br><span class="line">                <span class="keyword">return</span> ((TreeNode&lt;K,V&gt;)first).getTreeNode(hash, key);</span><br><span class="line">            <span class="comment">// ÈùûÊ†ëÁªìÊûÑÂæ™ÁéØËäÇÁÇπÂà§Êñ≠</span></span><br><span class="line">            <span class="keyword">do</span> &#123;</span><br><span class="line">                <span class="comment">// hash Áõ∏Á≠âÂπ∂‰∏î key Áõ∏ÂêåÔºåÂàôËøîÂõûÊ≠§ËäÇÁÇπ</span></span><br><span class="line">                <span class="keyword">if</span> (e.hash == hash &amp;&amp;</span><br><span class="line">                    ((k = e.key) == key || (key != <span class="keyword">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">                    <span class="keyword">return</span> e;</span><br><span class="line">            &#125; <span class="keyword">while</span> ((e = e.next) != <span class="keyword">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>‰ªé‰ª•‰∏äÊ∫êÁ†ÅÂèØ‰ª•ÁúãÂá∫ÔºåÂΩìÂìàÂ∏åÂÜ≤Á™ÅÊó∂Êàë‰ª¨ÈúÄË¶ÅÈÄöËøáÂà§Êñ≠ key ÂÄºÊòØÂê¶Áõ∏Á≠âÔºåÊâçËÉΩÁ°ÆËÆ§Ê≠§ÂÖÉÁ¥†ÊòØ‰∏çÊòØÊàë‰ª¨ÊÉ≥Ë¶ÅÁöÑÂÖÉÁ¥†„ÄÇ</p>
<h4 id="JDK-7-‰∏é-JDK-8-‰∏≠ÂÖ≥‰∫é-HashMapÁöÑÂØπÊØîÔºà‰ºòÂåñÁÇπÔºâ"><a href="#JDK-7-‰∏é-JDK-8-‰∏≠ÂÖ≥‰∫é-HashMapÁöÑÂØπÊØîÔºà‰ºòÂåñÁÇπÔºâ" class="headerlink" title="JDK 7 ‰∏é JDK 8 ‰∏≠ÂÖ≥‰∫é HashMapÁöÑÂØπÊØîÔºà‰ºòÂåñÁÇπÔºâ"></a>JDK 7 ‰∏é JDK 8 ‰∏≠ÂÖ≥‰∫é HashMapÁöÑÂØπÊØîÔºà‰ºòÂåñÁÇπÔºâ</h4><ol>
<li>JDK 8 ‰∏∫Á∫¢ÈªëÊ†ë + ÈìæË°® + Êï∞ÁªÑÁöÑÂΩ¢ÂºèÔºåÂΩìÊ°∂ÂÜÖÂÖÉÁ¥†Â§ß‰∫é 8 Êó∂Ôºå‰æø‰ºö<strong>Ê†ëÂåñ</strong>Ôºõ</li>
<li>hash ÂÄºÁöÑËÆ°ÁÆóÊñπÂºè‰∏çÂêå (jdk 8 ÁÆÄÂåñ)Ôºõ</li>
<li>1.7 table Âú®ÂàõÂª∫ hashmap Êó∂ÂàÜÈÖçÁ©∫Èó¥ÔºåËÄå 1.8 Âú® put ÁöÑÊó∂ÂÄôÂàÜÈÖçÔºåÂ¶ÇÊûú table ‰∏∫Á©∫ÔºåÂàô‰∏∫ table ÂàÜÈÖçÁ©∫Èó¥Ôºõ</li>
<li>Âú®ÂèëÁîüÂÜ≤Á™ÅÔºåÊèíÂÖ•Èìæ‰∏≠Êó∂Ôºå<strong>7 ÊòØÂ§¥ÊèíÊ≥ïÔºå8 ÊòØÂ∞æÊèíÊ≥ï</strong>Ôºõ</li>
<li>Âú® resize Êìç‰Ωú‰∏≠Ôºå7 ÈúÄË¶ÅÈáçÊñ∞ËøõË°å index ÁöÑËÆ°ÁÆóÔºåËÄå <strong>8 ‰∏çÈúÄË¶ÅÔºåÈÄöËøáÂà§Êñ≠Áõ∏Â∫îÁöÑ‰ΩçÊòØ 0 ËøòÊòØ 1ÔºåË¶Å‰πà‰æùÊóßÊòØÂéü indexÔºåË¶Å‰πàÊòØ oldCap + Âéü index</strong>„ÄÇ</li>
</ol>
<h4 id="Ê≠ªÂæ™ÁéØÂàÜÊûê"><a href="#Ê≠ªÂæ™ÁéØÂàÜÊûê" class="headerlink" title="Ê≠ªÂæ™ÁéØÂàÜÊûê"></a>Ê≠ªÂæ™ÁéØÂàÜÊûê</h4><p>jdk1.7 Â§¥ÊèíÊ≥ï + hashmapÊú¨Êù•Â∞±‰∏çÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÈõÜÂêàÔºåÊâÄ‰ª•ÂØºËá¥ËØ•ÈóÆÈ¢òÁöÑÂá∫Áé∞„ÄÇ</p>
<p><a target="_blank" rel="noopener" href="https://coolshell.cn/articles/9606.html">https://coolshell.cn/articles/9606.html</a></p>
<h3 id="LinkedHashMap"><a href="#LinkedHashMap" class="headerlink" title="LinkedHashMap"></a>LinkedHashMap</h3><p>LinkedHashMap ÁªßÊâøËá™ HashMapÔºåÂú® HashMap Âü∫Á°Ä‰∏äÔºåÈÄöËøáÁª¥Êä§‰∏ÄÊù°ÂèåÂêëÈìæË°®ÔºåËß£ÂÜ≥‰∫Ü HashMap ‰∏çËÉΩÈöèÊó∂‰øùÊåÅÈÅçÂéÜÈ°∫Â∫èÂíåÊèíÂÖ•È°∫Â∫è‰∏ÄËá¥ÁöÑÈóÆÈ¢ò„ÄÇÈô§Ê≠§‰πãÂ§ñÔºåLinkedHashMap ÂØπËÆøÈóÆÈ°∫Â∫è‰πüÊèê‰æõ‰∫ÜÁõ∏ÂÖ≥ÊîØÊåÅ„ÄÇÂú®‰∏Ä‰∫õÂú∫ÊôØ‰∏ãÔºåËØ•ÁâπÊÄßÂæàÊúâÁî®ÔºåÊØîÂ¶ÇÁºìÂ≠ò„ÄÇÂú®ÂÆûÁé∞‰∏äÔºåLinkedHashMap ÂæàÂ§öÊñπÊ≥ïÁõ¥Êé•ÁªßÊâøËá™ HashMapÔºå‰ªÖ‰∏∫Áª¥Êä§ÂèåÂêëÈìæË°®Ë¶ÜÂÜô‰∫ÜÈÉ®ÂàÜÊñπÊ≥ï„ÄÇ</p>
<p>LinkedHashMapÁªßÊâø‰∫ÜHashMapÔºåÂÜÖÈÉ®ÈùôÊÄÅÁ±ªEntryÁªßÊâø‰∫ÜHashMapÁöÑEntryÔºå‰ΩÜÊòØLinkedHashMap.EntryÂ§ö‰∫Ü‰∏§‰∏™Â≠óÊÆµÔºöbeforeÂíåafterÔºåbeforeË°®Á§∫Âú®Êú¨ËäÇÁÇπ‰πãÂâçÊ∑ªÂä†Âà∞LinkedHashMapÁöÑÈÇ£‰∏™ËäÇÁÇπÔºåafterË°®Á§∫Âú®Êú¨ËäÇÁÇπ‰πãÂêéÊ∑ªÂä†Âà∞LinkedHashMapÁöÑÈÇ£‰∏™ËäÇÁÇπÔºåËøôÈáåÁöÑ‰πãÂâçÂíå‰πãÂêéÊåáÊó∂Èó¥‰∏äÁöÑÂÖàÂêéÈ°∫Â∫è„ÄÇ</p>
<p>ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåLinkedHashMapÁöÑËø≠‰ª£È°∫Â∫èÊòØÊåâÁÖßÊèíÂÖ•ËäÇÁÇπÁöÑÈ°∫Â∫è„ÄÇ‰πüÂèØ‰ª•ÈÄöËøáÊîπÂèòaccessOrderÂèÇÊï∞ÁöÑÂÄºÔºå‰ΩøÂæóÂÖ∂ÈÅçÂéÜÈ°∫Â∫èÊåâÁÖßËÆøÈóÆÈ°∫Â∫èËæìÂá∫„ÄÇ</p>
<h4 id="Ê∑ªÂä†"><a href="#Ê∑ªÂä†" class="headerlink" title="Ê∑ªÂä†"></a>Ê∑ªÂä†</h4><p>LinkedHashMapÂú®Ê∑ªÂä†ÂÖÉÁ¥†ÁöÑÊó∂ÂÄôÔºå‰æùÊóß‰ΩøÁî®ÁöÑÊòØHashMap‰∏≠ÁöÑputÊñπÊ≥ï„ÄÇ‰∏çÂêåÁöÑÊòØLinkedHashMapÈáçÂÜô‰∫ÜnewNode()ÊñπÊ≥ïÂú®ÊØèÊ¨°ÊûÑÂª∫Êñ∞ËäÇÁÇπÊó∂ÔºåÈÄöËøálinkNodeLast(p);Â∞ÜÊñ∞ËäÇÁÇπÈìæÊé•Âú®ÂÜÖÈÉ®ÂèåÂêëÈìæË°®ÁöÑÂ∞æÈÉ®„ÄÇ</p>
<h4 id="Êü•Êâæ"><a href="#Êü•Êâæ" class="headerlink" title="Êü•Êâæ"></a>Êü•Êâæ</h4><p>LinkedHashMapÈáçÂÜô‰∫Üget()ÂíågetOrDefault()ÊñπÊ≥ïÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåLinkedHashMapÊòØÊåâÊèíÂÖ•È°∫Â∫èÁª¥Êä§ÈìæË°®„ÄÇ‰∏çËøáÂ¶ÇÊûúÊàë‰ª¨Âú®ÂàùÂßãÂåñ LinkedHashMapÊó∂ÔºåÊåáÂÆö accessOrderÂèÇÊï∞‰∏∫ trueÔºåÂç≥ÂèØËÆ©ÂÆÉÊåâËÆøÈóÆÈ°∫Â∫èÁª¥Êä§ÈìæË°®„ÄÇËÆøÈóÆÈ°∫Â∫èÁöÑÂéüÁêÜÊòØÔºåÂΩìÊàë‰ª¨Ë∞ÉÁî®get/getOrDefault/replaceÁ≠âÊñπÊ≥ïÊó∂Ôºå‰ºöÂ∞ÜËøô‰∫õÊñπÊ≥ïËÆøÈóÆÁöÑËäÇÁÇπÁßªÂä®Âà∞ÈìæË°®ÁöÑÂ∞æÈÉ®„ÄÇ</p>
<p><a target="_blank" rel="noopener" href="https://github.com/Ccww-lx/JavaCommunity/blob/master/doc/javabase/collection/LinkedHashMap%20%E6%BA%90%E7%A0%81%E8%AF%A6%E7%BB%86%E5%88%86%E6%9E%90.md">https://github.com/Ccww-lx/JavaCommunity/blob/master/doc/javabase/collection/LinkedHashMap%20%E6%BA%90%E7%A0%81%E8%AF%A6%E7%BB%86%E5%88%86%E6%9E%90.md</a></p>
<p><a target="_blank" rel="noopener" href="https://gyl-coder.top/java/collection/LinkedHashMap/">https://gyl-coder.top/java/collection/LinkedHashMap/</a></p>
<h3 id="TreeMap"><a href="#TreeMap" class="headerlink" title="TreeMap"></a>TreeMap</h3><p>TreeMapÊúÄÊó©Âá∫Áé∞Âú®JDK 1.2‰∏≠ÔºåÊòØ Java ÈõÜÂêàÊ°ÜÊû∂‰∏≠ÊØîËæÉÈáçË¶Å‰∏Ä‰∏™ÁöÑÂÆûÁé∞„ÄÇTreeMap Â∫ïÂ±ÇÂü∫‰∫éÁ∫¢ÈªëÊ†ëÂÆûÁé∞ÔºåÂèØ‰øùËØÅÂú®log(n)Êó∂Èó¥Â§çÊùÇÂ∫¶ÂÜÖÂÆåÊàê containsKey„ÄÅget„ÄÅput Âíå remove Êìç‰ΩúÔºåÊïàÁéáÂæàÈ´ò„ÄÇÂè¶‰∏ÄÊñπÈù¢ÔºåÁî±‰∫é TreeMap Âü∫‰∫éÁ∫¢ÈªëÊ†ëÂÆûÁé∞ÔºåËøô‰∏∫ TreeMap ‰øùÊåÅÈîÆÁöÑÊúâÂ∫èÊÄßÊâì‰∏ã‰∫ÜÂü∫Á°Ä„ÄÇÊÄªÁöÑÊù•ËØ¥ÔºåTreeMap ÁöÑÊ†∏ÂøÉÊòØÁ∫¢ÈªëÊ†ëÔºåÂÖ∂ÂæàÂ§öÊñπÊ≥ï‰πüÊòØÂØπÁ∫¢ÈªëÊ†ëÂ¢ûÂà†Êü•Âü∫Á°ÄÊìç‰ΩúÁöÑ‰∏Ä‰∏™ÂåÖË£Ö„ÄÇ</p>
<p><a target="_blank" rel="noopener" href="https://github.com/Ccww-lx/JavaCommunity/blob/master/doc/javabase/collection/TreeMap%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90.md">https://github.com/Ccww-lx/JavaCommunity/blob/master/doc/javabase/collection/TreeMap%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90.md</a></p>
<h3 id="hashtable‰∏éhashmap"><a href="#hashtable‰∏éhashmap" class="headerlink" title="hashtable‰∏éhashmap"></a>hashtable‰∏éhashmap</h3><p><strong>hashtable‰∏éhashmap</strong></p>
<p><strong>Áõ∏ÂêåÁÇπÔºö</strong>ÂÇ®Â≠òÁªìÊûÑÂíåÂÆûÁé∞Âü∫Êú¨Áõ∏ÂêåÔºåÈÉΩÊòØÊòØÂÆûÁé∞ÁöÑMapÊé•Âè£</p>
<p><strong>‰∏çÂêåÁÇπÔºö</strong></p>
<ul>
<li><p>HashtableÊòØÁ∫øÁ®ãÂÆâÂÖ®ÔºåHashMapÈùûÁ∫øÁ®ãÂÆâÂÖ®„ÄÇÈúÄË¶ÅÂêåÊ≠•ÁöÑÊó∂ÂÄôÂèØ‰ª•ConcurrentHashMapÊñπÊ≥ï„ÄÇ</p>
</li>
<li><p>HashMapÂèØ‰ª•‰ΩøÁî®null‰Ωú‰∏∫key„ÄÅvalueÔºåÂπ∂‰∏înullÂÖÉÁ¥†‰ºöËÆ°ÂÖ•size„ÄÇHashtable‰∏çÂÖÅËÆ∏null‰Ωú‰∏∫key„ÄÅvalueÔºåÂΩìÂá∫Áé∞nullÂÄº‰ºöÊäõÂá∫ÂºÇÂ∏∏„ÄÇ</p>
</li>
<li><p>HashMapÁªßÊâøÁöÑÊòØAbstractMapÔºåHashTableÁªßÊâøÁöÑÊòØDictionary</p>
</li>
<li><p>HashMapÊèê‰æõÂØπkeyÁöÑSetËøõË°åÈÅçÂéÜÔºåÂõ†Ê≠§ÂÆÉÊòØfail-fastÁöÑÔºå‰ΩÜHashTableÊèê‰æõÂØπkeyÁöÑEnumerationËøõË°åÈÅçÂéÜÔºåÂÆÉ‰∏çÊîØÊåÅfail-fast„ÄÇ</p>
</li>
<li><p>HashTableÊòØ‰∏Ä‰∏™ÈÅóÁïôÁ±ªÔºåÂ¶ÇÊûúÈúÄË¶Å‰øùËØÅÁ∫øÁ®ãÂÆâÂÖ®Êé®Ëçê‰ΩøÁî®CocurrentHashMap</p>
</li>
<li><p>HashMapÁöÑÂàùÂßãÂÆπÈáè‰∏∫16ÔºåHashtableÂàùÂßãÂÆπÈáè‰∏∫11Ôºå‰∏§ËÄÖÁöÑÂ°´ÂÖÖÂõ†Â≠êÈªòËÆ§ÈÉΩÊòØ0.75</p>
</li>
<li><p>HashMapÊâ©ÂÆπÊó∂ÊòØÂΩìÂâçÂÆπÈáèÁøªÂÄçÂç≥Ôºöcapacity*2 HashtableÊâ©ÂÆπÊó∂ÊòØÂÆπÈáèÁøªÂÄç+1Âç≥capacity*2+1</p>
</li>
<li><p>HashMapÁöÑÂàùÂßãÂÆπÈáè‰∏∫16ÔºåHashtableÂàùÂßãÂÆπÈáè‰∏∫11Ôºå‰∏§ËÄÖÁöÑÂ°´ÂÖÖÂõ†Â≠êÈªòËÆ§ÈÉΩÊòØ0.75</p>
</li>
<li><p>HashtableËÆ°ÁÆóhashÊòØÁõ¥Êé•‰ΩøÁî®keyÁöÑhashcodeÂØπtableÊï∞ÁªÑÁöÑÈïøÂ∫¶Áõ¥Êé•ËøõË°åÂèñÊ®°„ÄÇHashMapËÆ°ÁÆóhashÂØπkeyÁöÑhashcodeËøõË°å‰∫Ü‰∫åÊ¨°hashÔºå‰ª•Ëé∑ÂæóÊõ¥Â•ΩÁöÑÊï£ÂàóÂÄºÔºåÁÑ∂ÂêéÂØπtableÊï∞ÁªÑÈïøÂ∫¶ÂèñÊë∏</p>
</li>
</ul>
<blockquote>
<p>DictionaryÊòØ‰∏Ä‰∏™ÊäΩË±°Á±ªÔºåÂÆÉÁõ¥Êé•ÁªßÊâø‰∫éObjectÁ±ªÔºåÊ≤°ÊúâÂÆûÁé∞‰ªª‰ΩïÊé•Âè£„ÄÇDictionaryÁ±ªÊòØJDK 1.0ÁöÑÂºïÂÖ•ÁöÑ„ÄÇËôΩÁÑ∂Dictionary‰πüÊîØÊåÅ‚ÄúÊ∑ªÂä†key-valueÈîÆÂÄºÂØπ‚Äù„ÄÅ‚ÄúËé∑Âèñvalue‚Äù„ÄÅ‚ÄúËé∑ÂèñÂ§ßÂ∞è‚ÄùÁ≠âÂü∫Êú¨Êìç‰ΩúÔºå‰ΩÜÂÆÉÁöÑAPIÂáΩÊï∞ÊØîMapÂ∞ëÔºõËÄå‰∏îDictionary‰∏ÄËà¨ÊòØÈÄöËøáEnumeration(Êûö‰∏æÁ±ª)ÂéªÈÅçÂéÜÔºåMapÂàôÊòØÈÄöËøáIterator(Ëø≠‰ª£Âô®)ÂéªÈÅçÂéÜ„ÄÇ ÁÑ∂ËÄå‚ÄòÁî±‰∫éHashtable‰πüÂÆûÁé∞‰∫ÜMapÊé•Âè£ÔºåÊâÄ‰ª•ÔºåÂÆÉÊó¢ÊîØÊåÅEnumerationÈÅçÂéÜÔºå‰πüÊîØÊåÅIteratorÈÅçÂéÜ„ÄÇ</p>
</blockquote>
<h3 id="HashMap‰∏éTreeMap"><a href="#HashMap‰∏éTreeMap" class="headerlink" title="HashMap‰∏éTreeMap"></a>HashMap‰∏éTreeMap</h3><p>HashMapÈÄöËøáhashcodeÂØπÂÖ∂ÂÜÖÂÆπËøõË°åÂø´ÈÄüÊü•ÊâæÔºåËÄåTreeMap‰∏≠ÊâÄÊúâÁöÑÂÖÉÁ¥†ÈÉΩ‰øùÊåÅÁùÄÊüêÁßçÂõ∫ÂÆöÁöÑÈ°∫Â∫èÔºåÂ¶ÇÊûú‰Ω†ÈúÄË¶ÅÂæóÂà∞‰∏Ä‰∏™ÊúâÂ∫èÁöÑÁªìÊûú‰Ω†Â∞±Â∫îËØ•‰ΩøÁî®TreeMapÔºàHashMap‰∏≠ÂÖÉÁ¥†ÁöÑÊéíÂàóÈ°∫Â∫èÊòØ‰∏çÂõ∫ÂÆöÁöÑÔºâ„ÄÇHashMap‰∏≠ÂÖÉÁ¥†ÁöÑÊéíÂàóÈ°∫Â∫èÊòØ‰∏çÂõ∫ÂÆöÁöÑÔºâ„ÄÇ</p>
<p>Âú®Map ‰∏≠ÊèíÂÖ•„ÄÅÂà†Èô§ÂíåÂÆö‰ΩçÂÖÉÁ¥†ÔºåHashMap ÊòØÊúÄÂ•ΩÁöÑÈÄâÊã©„ÄÇ‰ΩÜÂ¶ÇÊûúÊÇ®Ë¶ÅÊåâËá™ÁÑ∂È°∫Â∫èÊàñËá™ÂÆö‰πâÈ°∫Â∫èÈÅçÂéÜÈîÆÔºåÈÇ£‰πàTreeMap‰ºöÊõ¥Â•Ω„ÄÇ‰ΩøÁî®HashMapË¶ÅÊ±ÇÊ∑ªÂä†ÁöÑÈîÆÁ±ªÊòéÁ°ÆÂÆö‰πâ‰∫ÜhashCode()Âíå equals()ÁöÑÂÆûÁé∞„ÄÇ Ëøô‰∏™TreeMapÊ≤°ÊúâË∞É‰ºòÈÄâÈ°πÔºåÂõ†‰∏∫ËØ•Ê†ëÊÄªÂ§Ñ‰∫éÂπ≥Ë°°Áä∂ÊÄÅ„ÄÇ</p>
<h3 id="TreeMapÂíåTreeSetÂú®ÊéíÂ∫èÊó∂Â¶Ç‰ΩïÊØîËæÉÂÖÉÁ¥†ÔºüCollectionsÂ∑•ÂÖ∑Á±ª‰∏≠ÁöÑsort-ÊñπÊ≥ïÂ¶Ç‰ΩïÊØîËæÉÂÖÉÁ¥†Ôºü"><a href="#TreeMapÂíåTreeSetÂú®ÊéíÂ∫èÊó∂Â¶Ç‰ΩïÊØîËæÉÂÖÉÁ¥†ÔºüCollectionsÂ∑•ÂÖ∑Á±ª‰∏≠ÁöÑsort-ÊñπÊ≥ïÂ¶Ç‰ΩïÊØîËæÉÂÖÉÁ¥†Ôºü" class="headerlink" title="TreeMapÂíåTreeSetÂú®ÊéíÂ∫èÊó∂Â¶Ç‰ΩïÊØîËæÉÂÖÉÁ¥†ÔºüCollectionsÂ∑•ÂÖ∑Á±ª‰∏≠ÁöÑsort()ÊñπÊ≥ïÂ¶Ç‰ΩïÊØîËæÉÂÖÉÁ¥†Ôºü"></a>TreeMapÂíåTreeSetÂú®ÊéíÂ∫èÊó∂Â¶Ç‰ΩïÊØîËæÉÂÖÉÁ¥†ÔºüCollectionsÂ∑•ÂÖ∑Á±ª‰∏≠ÁöÑsort()ÊñπÊ≥ïÂ¶Ç‰ΩïÊØîËæÉÂÖÉÁ¥†Ôºü</h3><p>TreeSetË¶ÅÊ±ÇÂ≠òÊîæÁöÑÂØπË±°ÊâÄÂ±ûÁöÑÁ±ªÂøÖÈ°ªÂÆûÁé∞ComparableÊé•Âè£ÔºåËØ•Êé•Âè£Êèê‰æõ‰∫ÜÊØîËæÉÂÖÉÁ¥†ÁöÑcompareTo()ÊñπÊ≥ïÔºåÂΩìÊèíÂÖ•ÂÖÉÁ¥†Êó∂‰ºöÂõûË∞ÉËØ•ÊñπÊ≥ïÊØîËæÉÂÖÉÁ¥†ÁöÑÂ§ßÂ∞è„ÄÇ</p>
<p>TreeMapË¶ÅÊ±ÇÂ≠òÊîæÁöÑÈîÆÂÄºÂØπÊò†Â∞ÑÁöÑÈîÆÂøÖÈ°ªÂÆûÁé∞ComparableÊé•Âè£‰ªéËÄåÊ†πÊçÆÈîÆÂØπÂÖÉÁ¥†ËøõË°åÊéíÂ∫è„ÄÇ</p>
<p>CollectionsÂ∑•ÂÖ∑Á±ªÁöÑsortÊñπÊ≥ïÊúâ‰∏§ÁßçÈáçËΩΩÁöÑÂΩ¢ÂºèÔºå<strong>Á¨¨‰∏ÄÁßç</strong>Ë¶ÅÊ±Ç‰º†ÂÖ•ÁöÑÂæÖÊéíÂ∫èÂÆπÂô®‰∏≠Â≠òÊîæÁöÑÂØπË±°ÊØîËæÉÂÆûÁé∞ComparableÊé•Âè£‰ª•ÂÆûÁé∞ÂÖÉÁ¥†ÁöÑÊØîËæÉÔºõ<strong>Á¨¨‰∫åÁßç</strong>‰∏çÂº∫Âà∂ÊÄßÁöÑË¶ÅÊ±ÇÂÆπÂô®‰∏≠ÁöÑÂÖÉÁ¥†ÂøÖÈ°ªÂèØÊØîËæÉÔºå‰ΩÜÊòØË¶ÅÊ±Ç‰º†ÂÖ•Á¨¨‰∫å‰∏™ÂèÇÊï∞ÔºåÂèÇÊï∞ÊòØComparatorÊé•Âè£ÁöÑÂ≠êÁ±ªÂûãÔºàÈúÄË¶ÅÈáçÂÜôcompareÊñπÊ≥ïÂÆûÁé∞ÂÖÉÁ¥†ÁöÑÊØîËæÉÔºâÔºåÁõ∏ÂΩì‰∫é‰∏Ä‰∏™‰∏¥Êó∂ÂÆö‰πâÁöÑÊéíÂ∫èËßÑÂàôÔºåÂÖ∂ÂÆûÂ∞±ÊòØÈÄöËøáÊé•Âè£Ê≥®ÂÖ•ÊØîËæÉÂÖÉÁ¥†Â§ßÂ∞èÁöÑÁÆóÊ≥ïÔºå‰πüÊòØÂØπÂõûË∞ÉÊ®°ÂºèÁöÑÂ∫îÁî®ÔºàJava‰∏≠ÂØπÂáΩÊï∞ÂºèÁºñÁ®ãÁöÑÊîØÊåÅÔºâ„ÄÇ</p>
<h2 id="ConcurrentHashMap"><a href="#ConcurrentHashMap" class="headerlink" title="ConcurrentHashMap"></a>ConcurrentHashMap</h2><p><a target="_blank" rel="noopener" href="https://github.com/Ccww-lx/JavaCommunity/blob/master/doc/javabase/collection/ConcurrentHashMap%E6%BA%90%E7%A0%81%E5%92%8C%E9%9D%A2%E8%AF%95%E9%A2%98%E4%B8%80.md">https://github.com/Ccww-lx/JavaCommunity/blob/master/doc/javabase/collection/ConcurrentHashMap%E6%BA%90%E7%A0%81%E5%92%8C%E9%9D%A2%E8%AF%95%E9%A2%98%E4%B8%80.md</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844904023003250701#heading-0">https://juejin.cn/post/6844904023003250701#heading-0</a></p>
<p>ConcurrentHashMapÁöÑÂá∫Áé∞‰∏ªË¶Å‰∏∫‰∫ÜËß£ÂÜ≥hashmapÂú®Âπ∂ÂèëÁéØÂ¢É‰∏ã‰∏çÂÆâÂÖ®ÔºåJDK1.8ConcurrentHashMapÁöÑËÆæËÆ°‰∏éÂÆûÁé∞ÈùûÂ∏∏Á≤æÂ∑ßÔºåÂ§ßÈáèÁöÑÂà©Áî®‰∫ÜvolatileÔºåCASÁ≠â‰πêËßÇÈîÅÊäÄÊúØÊù•ÂáèÂ∞ëÈîÅÁ´û‰∫âÂØπ‰∫éÊÄßËÉΩÁöÑÂΩ±ÂìçÔºå</p>
<p><strong>ConcurrentHashMap‰øùËØÅÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÊñπÊ°àÊòØÔºö</strong></p>
<ul>
<li><strong>JDK1.8Ôºösynchronized+CAS+Node+Á∫¢ÈªëÊ†ëÔºõ</strong></li>
<li><strong>JDK1.7ÔºöReentrantLock+Segment+HashEntry„ÄÇ</strong></li>
</ul>
<h4 id="JDK7-ConcurrentHashMap"><a href="#JDK7-ConcurrentHashMap" class="headerlink" title="JDK7 ConcurrentHashMap"></a>JDK7 ConcurrentHashMap</h4><p>Âú®JDK1.7‰∏≠ConcurrentHashMapÁî±Segment(ÂàÜÊÆµÈîÅ)Êï∞ÁªÑÁªìÊûÑÂíåHashEntryÊï∞ÁªÑÁªÑÊàêÔºå‰∏î‰∏ªË¶ÅÈÄöËøáSegment(ÂàÜÊÆµÈîÅ)ÊÆµÊäÄÊúØÂÆûÁé∞Á∫øÁ®ãÂÆâÂÖ®„ÄÇ</p>
<p>SegmentÊòØ‰∏ÄÁßçÂèØÈáçÂÖ•ÈîÅÔºåÊòØ‰∏ÄÁßçÊï∞ÁªÑÂíåÈìæË°®ÁöÑÁªìÊûÑÔºå‰∏Ä‰∏™Segment‰∏≠ÂåÖÂê´‰∏Ä‰∏™HashEntryÊï∞ÁªÑÔºåÊØè‰∏™HashEntryÂèàÊòØ‰∏Ä‰∏™ÈìæË°®ÁªìÊûÑÔºåÂõ†Ê≠§Âú®ConcurrentHashMapÊü•ËØ¢‰∏Ä‰∏™ÂÖÉÁ¥†ÁöÑËøáÁ®ãÈúÄË¶ÅËøõË°å‰∏§Ê¨°HashÊìç‰ΩúÔºåÂ¶Ç‰∏ãÊâÄÁ§∫Ôºö</p>
<ul>
<li>Á¨¨‰∏ÄÊ¨°HashÂÆö‰ΩçÂà∞SegmentÔºå</li>
<li>Á¨¨‰∫åÊ¨°HashÂÆö‰ΩçÂà∞ÂÖÉÁ¥†ÊâÄÂú®ÁöÑÈìæË°®ÁöÑÂ§¥ÈÉ®</li>
</ul>
<p>Ê≠£ÊòØÈÄöËøáSegmentÂàÜÊÆµÈîÅÊäÄÊúØÔºåÂ∞ÜÊï∞ÊçÆÂàÜÊàê‰∏ÄÊÆµ‰∏ÄÊÆµÁöÑÂ≠òÂÇ®ÔºåÁÑ∂ÂêéÁªôÊØè‰∏ÄÊÆµÊï∞ÊçÆÈÖç‰∏ÄÊääÈîÅÔºåÂΩì‰∏Ä‰∏™Á∫øÁ®ãÂç†Áî®ÈîÅËÆøÈóÆÂÖ∂‰∏≠‰∏Ä‰∏™ÊÆµÊï∞ÊçÆÁöÑÊó∂ÂÄôÔºåÂÖ∂‰ªñÊÆµÁöÑÊï∞ÊçÆ‰πüËÉΩË¢´ÂÖ∂‰ªñÁ∫øÁ®ãËÆøÈóÆÔºåËÉΩÂ§üÂÆûÁé∞ÁúüÊ≠£ÁöÑÂπ∂ÂèëËÆøÈóÆ„ÄÇ</p>
<p>ËøôÊ†∑ÁªìÊûÑ‰ºö‰ΩøHashÁöÑËøáÁ®ãË¶ÅÊØîÊôÆÈÄöÁöÑHashMapË¶ÅÈïøÔºåÂΩ±ÂìçÊÄßËÉΩÔºå‰ΩÜÂÜôÊìç‰ΩúÁöÑÊó∂ÂÄôÂèØ‰ª•Âè™ÂØπÂÖÉÁ¥†ÊâÄÂú®ÁöÑSegmentËøõË°åÂä†ÈîÅÂç≥ÂèØÔºå‰∏ç‰ºöÂΩ±ÂìçÂà∞ÂÖ∂‰ªñÁöÑSegmentÔºåConcurrentHashMapÊèêÂçá‰∫ÜÂπ∂ÂèëËÉΩÂäõ„ÄÇ</p>
<h4 id="JDK8-ConcurrentHashMap"><a href="#JDK8-ConcurrentHashMap" class="headerlink" title="JDK8 ConcurrentHashMap"></a>JDK8 ConcurrentHashMap</h4><p>Âú®JDK8ConcurrentHashMapÂÜÖÈÉ®Êú∫ÊûÑÔºöÊï∞ÁªÑ+ÈìæË°®+Á∫¢ÈªëÊ†ëÔºåJava 8Âú®ÈìæË°®ÈïøÂ∫¶Ë∂ÖËøá‰∏ÄÂÆöÈòàÂÄº(8)Êó∂Â∞ÜÈìæË°®ÔºàÂØªÂùÄÊó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫O(N)ÔºâËΩ¨Êç¢‰∏∫Á∫¢ÈªëÊ†ëÔºàÂØªÂùÄÊó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫O(long(N)))ÔºåÁªìÊûÑÂü∫Êú¨‰∏ä‰∏éÂäüËÉΩÂíåJDK8ÁöÑHashMap‰∏ÄÊ†∑ÔºåÂè™‰∏çËøáConcurrentHashMap‰øùËØÅÁ∫øÁ®ãÂÆâÂÖ®ÊÄß„ÄÇ</p>
<p><a target="_blank" rel="noopener" href="https://camo.githubusercontent.com/a8e30fb93f536f07d9b9cc967baef090022d82043d8db9c457a6f0d44412c47c/68747470733a2f2f70312d6a75656a696e2e62797465696d672e636f6d2f746f732d636e2d692d6b3375316662706663702f37636366316561383436333534383230386334376231303438396131366231657e74706c762d6b3375316662706663702d7a6f6f6d2d312e696d616765"><img src="https://camo.githubusercontent.com/a8e30fb93f536f07d9b9cc967baef090022d82043d8db9c457a6f0d44412c47c/68747470733a2f2f70312d6a75656a696e2e62797465696d672e636f6d2f746f732d636e2d692d6b3375316662706663702f37636366316561383436333534383230386334376231303438396131366231657e74706c762d6b3375316662706663702d7a6f6f6d2d312e696d616765" alt="img"></a></p>
<p>‰ΩÜÂú®JDK1.8‰∏≠ÊëíÂºÉ‰∫ÜSegmentÂàÜÊÆµÈîÅÁöÑÊï∞ÊçÆÁªìÊûÑÔºåÂü∫‰∫éCASÊìç‰Ωú‰øùËØÅÊï∞ÊçÆÁöÑËé∑Âèñ‰ª•Âèä‰ΩøÁî®synchronizedÂÖ≥ÈîÆÂ≠óÂØπÁõ∏Â∫îÊï∞ÊçÆÊÆµÂä†ÈîÅÊù•ÂÆûÁé∞Á∫øÁ®ãÂÆâÂÖ®ÔºåËøôËøõ‰∏ÄÊ≠•ÊèêÈ´ò‰∫ÜÂπ∂ÂèëÊÄß„ÄÇ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; <span class="keyword">implements</span> <span class="title">Map</span>.<span class="title">Entry</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> hash;</span><br><span class="line">        <span class="keyword">final</span> K key;</span><br><span class="line">        <span class="keyword">volatile</span> V val;  <span class="comment">//‰ΩøÁî®‰∫ÜvolatileÂ±ûÊÄß</span></span><br><span class="line">        <span class="keyword">volatile</span> Node&lt;K,V&gt; next;  <span class="comment">//‰ΩøÁî®‰∫ÜvolatileÂ±ûÊÄß</span></span><br><span class="line">    	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ConcurrentHashMapÈááÁî®NodeÁ±ª‰Ωú‰∏∫Âü∫Êú¨ÁöÑÂ≠òÂÇ®ÂçïÂÖÉÔºåÊØè‰∏™ÈîÆÂÄºÂØπ(key-value)ÈÉΩÂ≠òÂÇ®Âú®‰∏Ä‰∏™Node‰∏≠Ôºå‰ΩøÁî®‰∫ÜvolatileÂÖ≥ÈîÆÂ≠ó‰øÆÈ•∞valueÂíånextÔºå‰øùËØÅÂπ∂ÂèëÁöÑÂèØËßÅÊÄß„ÄÇÂÖ∂‰∏≠NodeÂ≠êÁ±ªÊúâÔºö</p>
<ul>
<li>ForwardingNodeÔºöÊâ©ÂÆπËäÇÁÇπÔºåÂè™ÊòØÂú®Êâ©ÂÆπÈò∂ÊÆµ‰ΩøÁî®ÁöÑËäÇÁÇπÔºå‰∏ªË¶Å‰Ωú‰∏∫‰∏Ä‰∏™Ê†áËÆ∞ÔºåÂú®Â§ÑÁêÜÂπ∂ÂèëÊó∂Ëµ∑ÁùÄÂÖ≥ÈîÆ‰ΩúÁî®ÔºåÊúâ‰∫ÜForwardingNodesÔºå‰πüÊòØConcurrentHashMapÊúâ‰∫ÜÂàÜÊÆµÁöÑÁâπÊÄßÔºåÊèêÈ´ò‰∫ÜÂπ∂ÂèëÊïàÁéá</li>
<li>TreeBinÔºöTreeNodeÁöÑ‰ª£ÁêÜËäÇÁÇπÔºåÁî®‰∫éÁª¥Êä§TreeNodesÔºåConcurrentHashMapÁöÑÁ∫¢ÈªëÊ†ëÂ≠òÊîæÁöÑÊòØTreeBin</li>
<li>TreeNodeÔºöÁî®‰∫éÊ†ëÁªìÊûÑ‰∏≠ÔºåÁ∫¢ÈªëÊ†ëÁöÑËäÇÁÇπÔºàÂΩìÈìæË°®ÈïøÂ∫¶Â§ß‰∫é8Êó∂ËΩ¨Âåñ‰∏∫Á∫¢ÈªëÊ†ëÔºâÔºåÊ≠§ËäÇÁÇπ‰∏çËÉΩÁõ¥Êé•ÊîæÂÖ•Ê°∂ÂÜÖÔºåÂè™ËÉΩÊòØ‰Ωú‰∏∫Á∫¢ÈªëÊ†ëÁöÑËäÇÁÇπ</li>
<li>ReservationNodeÔºö‰øùÁïôÁªìÁÇπ</li>
</ul>
<p>ConcurrentHashMap‰∏≠Êü•ÊâæÂÖÉÁ¥†„ÄÅÊõøÊç¢ÂÖÉÁ¥†ÂíåËµãÂÄºÂÖÉÁ¥†ÈÉΩÊòØÂü∫‰∫é<code>sun.misc.Unsafe</code>‰∏≠<strong>ÂéüÂ≠êÊìç‰Ωú</strong>ÂÆûÁé∞<strong>Â§öÂπ∂ÂèëÁöÑÊó†ÈîÅÂåñ</strong>Êìç‰Ωú„ÄÇ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">static final &lt;K,V&gt; Node&lt;K,V&gt; tabAt(Node&lt;K,V&gt;[] tab, int i) &#123;</span><br><span class="line">        return (Node&lt;K,V&gt;)U.getObjectAcquire(tab, ((long)i &lt;&lt; ASHIFT) + ABASE);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">static final &lt;K,V&gt; boolean casTabAt(Node&lt;K,V&gt;[] tab, int i,</span><br><span class="line">                                     Node&lt;K,V&gt; c, Node&lt;K,V&gt; v) &#123;</span><br><span class="line">    return U.compareAndSetObject(tab, ((long)i &lt;&lt; ASHIFT) + ABASE, c, v);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">static final &lt;K,V&gt; void setTabAt(Node&lt;K,V&gt;[] tab, int i, Node&lt;K,V&gt; v) &#123;</span><br><span class="line">    U.putObjectRelease(tab, ((long)i &lt;&lt; ASHIFT) + ABASE, v);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ConcurrentHashMapÁöÑput-ÊñπÊ≥ï"><a href="#ConcurrentHashMapÁöÑput-ÊñπÊ≥ï" class="headerlink" title="ConcurrentHashMapÁöÑput()ÊñπÊ≥ï"></a>ConcurrentHashMapÁöÑput()ÊñπÊ≥ï</h3><p>ConcurrentHashMapÁöÑputÁöÑÊµÅÁ®ãÊ≠•È™§</p>
<ol>
<li><p>Â¶ÇÊûúkeyÊàñËÄÖvalue‰∏∫nullÔºåÂàôÊäõÂá∫Á©∫ÊåáÈíàÂºÇÂ∏∏ÔºåÂíåHashMap‰∏çÂêåÁöÑÊòØHashMapÂçïÁ∫øÁ®ãÊòØÂÖÅËÆ∏‰∏∫NullÔºõ</p>
<p><code>if (key == null || value == null) throw new NullPointerException();</code></p>
</li>
<li><p>forÁöÑÊ≠ªÂæ™ÁéØÔºå‰∏∫‰∫ÜÂÆûÁé∞CASÁöÑÊó†ÈîÅÂåñÊõ¥Êñ∞ÔºåÂ¶ÇÊûútable‰∏∫nullÊàñËÄÖtableÁöÑÈïøÂ∫¶‰∏∫0ÔºåÂàôÂàùÂßãÂåñtableÔºåË∞ÉÁî®<code>initTable()</code>ÊñπÊ≥ïÔºàÁ¨¨‰∏ÄÊ¨°putÊï∞ÊçÆÔºåË∞ÉÁî®ÈªòËÆ§ÂèÇÊï∞ÂÆûÁé∞ÔºåÂÖ∂‰∏≠ÈáçË¶ÅÁöÑ<code>sizeCtl</code>ÂèÇÊï∞Ôºâ„ÄÇ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;ËÆ°ÁÆóÁ¥¢ÂºïÁöÑÁ¨¨‰∏ÄÊ≠•Ôºå‰º†ÂÖ•ÈîÆÂÄºÁöÑhashÂÄº</span><br><span class="line">int hash &#x3D; spread(key.hashCode());</span><br><span class="line">int binCount &#x3D; 0; &#x2F;&#x2F;‰øùÂ≠òÂΩìÂâçËäÇÁÇπÁöÑÈïøÂ∫¶</span><br><span class="line">for (Node&lt;K,V&gt;[] tab &#x3D; table;;) &#123;</span><br><span class="line">    Node&lt;K,V&gt; f; int n, i, fh; K fk; V fv;</span><br><span class="line">    if (tab &#x3D;&#x3D; null || (n &#x3D; tab.length) &#x3D;&#x3D; 0)</span><br><span class="line">        tab &#x3D; initTable(); &#x2F;&#x2F;ÂàùÂßãÂåñHashË°®</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>Á°ÆÂÆöÂÖÉÁ¥†Âú®HashË°®ÁöÑÁ¥¢Âºï</p>
<p>ÈÄöËøáhashÁÆóÊ≥ïÂèØ‰ª•Â∞ÜÂÖÉÁ¥†ÂàÜÊï£Âà∞ÂìàÂ∏åÊ°∂‰∏≠„ÄÇÂú®ConcurrentHashMap‰∏≠ÈÄöËøáÂ¶Ç‰∏ãÊñπÊ≥ïÁ°ÆÂÆöÊï∞ÁªÑÁ¥¢ÂºïÔºö</p>
<p>Á¨¨‰∏ÄÊ≠•Ôºö</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">static final int spread(int h) &#123;</span><br><span class="line">        return (h ^ (h &gt;&gt;&gt; 16)) &amp; HASH_BITS; </span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>Á¨¨‰∫åÊ≠•Ôºö<code>(length-1) &amp; (h ^ (h &gt;&gt;&gt; 16)) &amp; HASH_BITS);</code></p>
</li>
<li><p>ÈÄöËøá<code>tableAt()</code>ÊñπÊ≥ïÊâæÂà∞‰ΩçÁΩÆ<code>tab[i]</code>ÁöÑ<code>Node</code>,ÂΩìNode‰∏∫nullÊó∂‰∏∫Ê≤°Êúâ<code>hash</code>ÂÜ≤Á™ÅÁöÑËØùÔºå‰ΩøÁî®<code>casTabAt()</code>ÊñπÊ≥ï<code>CAS</code>Êìç‰ΩúÂ∞ÜÂÖÉÁ¥†ÊèíÂÖ•Âà∞<code>Hash</code>Ë°®‰∏≠Ôºå<code>ConcurrentHashmap</code>‰ΩøÁî®<code>CAS</code>Êó†ÈîÅÂåñÊìç‰ΩúÔºåËøôÊ†∑Âú®È´òÂπ∂Âèë<code>hash</code>ÂÜ≤Á™Å‰ΩéÁöÑÊÉÖÂÜµ‰∏ãÔºåÊÄßËÉΩËâØÂ•Ω„ÄÇ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">else if ((f &#x3D; tabAt(tab, i &#x3D; (n - 1) &amp; hash)) &#x3D;&#x3D; null) &#123;</span><br><span class="line">	            &#x2F;&#x2F;Âà©Áî®CASÊìç‰ΩúÂ∞ÜÂÖÉÁ¥†ÊèíÂÖ•Âà∞HashË°®‰∏≠</span><br><span class="line">                if (casTabAt(tab, i, null, new Node&lt;K,V&gt;(hash, key, value)))</span><br><span class="line">                    break;  &#x2F;&#x2F; no lock when adding to empty bin(ÊèíÂÖ•nullÁöÑËäÇÁÇπÔºåÊó†ÈúÄÂä†ÈîÅ)</span><br><span class="line">            &#125;</span><br></pre></td></tr></table></figure></li>
<li><p>ÂΩìf‰∏ç‰∏∫nullÊó∂ÔºåËØ¥ÊòéÂèëÁîü‰∫ÜhashÂÜ≤Á™ÅÔºåÂΩìf.hash == MOVED==-1 Êó∂ÔºåËØ¥Êòé<code>ConcurrentHashmap</code>Ê≠£Âú®ÂèëÁîü<code>resize</code>Êìç‰Ωú,‰ΩøÁî®<code>helpTransfer()</code>ÊñπÊ≥ïÂ∏ÆÂä©Ê≠£Âú®ËøõË°åresizeÊìç‰Ωú„ÄÇ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">else if ((fh &#x3D; f.hash) &#x3D;&#x3D; MOVED) &#x2F;&#x2F;f.hash &#x3D;&#x3D; -1 </span><br><span class="line">        &#x2F;&#x2F;hash‰∏∫-1 ËØ¥ÊòéÊòØ‰∏Ä‰∏™forwarding nodesËäÇÁÇπÔºåË°®ÊòéÊ≠£Âú®Êâ©ÂÆπ</span><br><span class="line">        tab &#x3D; helpTransfer(tab, f);</span><br></pre></td></tr></table></figure></li>
<li><p>‰ª•‰∏äÊÉÖÂÜµÈÉΩ‰∏çÊª°Ë∂≥ÁöÑÊó∂Ôºå‰ΩøÁî®<code>synchronized</code>ÂêåÊ≠•Âùó‰∏äÈîÅÂΩìÂâçËäÇÁÇπ<code>Node </code>,Âπ∂Âà§Êñ≠ÊúâÊ≤°ÊúâÁ∫øÁ®ãÂØπÊï∞ÁªÑËøõË°å‰∫Ü‰øÆÊîπÔºåÂ¶ÇÊûúÊ≤°ÊúâÂàôËøõË°åÔºö</p>
<ul>
<li>ÈÅçÂéÜËØ•ÈìæË°®Âπ∂ÁªüËÆ°ËØ•ÈìæË°®ÈïøÂ∫¶<code>binCount</code>ÔºåÊü•ÊâæÊòØÂê¶ÊúâÂíåkeyÁõ∏ÂêåÁöÑËäÇÁÇπÔºåÂ¶ÇÊûúÊúâÂàôÂ∞ÜÊü•ÊâæÂà∞ËäÇÁÇπÁöÑvalÂÄºÊõøÊç¢‰∏∫Êñ∞ÁöÑvalueÂÄºÔºåÂπ∂ËøîÂõûÊóßÁöÑvalueÂÄºÔºåÂê¶ÂàôÊ†πÊçÆkeyÔºåvalueÔºåhashÂàõÂª∫Êñ∞NodeÂπ∂Â∞ÜÂÖ∂ÊîæÂú®ÈìæË°®ÁöÑÂ∞æÈÉ®</li>
<li>Â¶ÇÊûú<code>Node f</code>ÊòØ<code>TreeBin</code>ÁöÑÁ±ªÂûãÔºåÂàô‰ΩøÁî®Á∫¢ÈªëÊ†ëÁöÑÊñπÂºèËøõË°åÊèíÂÖ•„ÄÇÁÑ∂ÂêéÂàôÈÄÄÂá∫<code>synchronized(f)</code>ÈîÅ‰ΩèÁöÑ‰ª£Á†ÅÂùó</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;ÂΩìÂâçËäÇÁÇπÂä†ÈîÅ</span><br><span class="line"> synchronized (f) &#123;</span><br><span class="line"> &#x2F;&#x2F;Âà§Êñ≠‰∏ãÊúâÊ≤°ÊúâÁ∫øÁ®ãÂØπÊï∞ÁªÑËøõË°å‰∫Ü‰øÆÊîπ</span><br><span class="line"> if (tabAt(tab, i) &#x3D;&#x3D; f) &#123;</span><br><span class="line">       &#x2F;&#x2F;Â¶ÇÊûúhashÂÄºÊòØÂ§ß‰∫éÁ≠â‰∫é0ÁöÑËØ¥ÊòéÊòØÈìæË°®</span><br><span class="line">        if (fh &gt;&#x3D; 0) &#123;</span><br><span class="line">              binCount &#x3D; 1;</span><br><span class="line">              for (Node&lt;K,V&gt; e &#x3D; f;; ++binCount) &#123;</span><br><span class="line">                    K ek;</span><br><span class="line">                   &#x2F;&#x2F;ÊèíÂÖ•ÁöÑÂÖÉÁ¥†ÈîÆÂÄºÁöÑhashÂÄºÊúâËäÇÁÇπ‰∏≠ÂÖÉÁ¥†ÁöÑhashÂÄºÁõ∏ÂêåÔºåÊõøÊç¢ÂΩìÂâçÂÖÉÁ¥†ÁöÑÂÄº</span><br><span class="line">                      if (e.hash &#x3D;&#x3D; hash &amp;&amp;</span><br><span class="line">                           ((ek &#x3D; e.key) &#x3D;&#x3D; key ||</span><br><span class="line">                            (ek !&#x3D; null &amp;&amp; key.equals(ek)))) &#123;</span><br><span class="line">                            oldVal &#x3D; e.val;</span><br><span class="line">                            if (!onlyIfAbsent)</span><br><span class="line">                                &#x2F;&#x2F;ÊõøÊç¢ÂΩìÂâçÂÖÉÁ¥†ÁöÑÂÄº</span><br><span class="line">                                e.val &#x3D; value;</span><br><span class="line">                            break;</span><br><span class="line">                        &#125;</span><br><span class="line">                     Node&lt;K,V&gt; pred &#x3D; e;</span><br><span class="line">                      &#x2F;&#x2F;Â¶ÇÊûúÂæ™ÁéØÂà∞ÈìæË°®ÁªìÂ∞æËøòÊ≤°ÂèëÁé∞ÔºåÈÇ£‰πàËøõË°åÊèíÂÖ•Êìç‰Ωú</span><br><span class="line">                     if ((e &#x3D; e.next) &#x3D;&#x3D; null) &#123;</span><br><span class="line">                            pred.next &#x3D; new Node&lt;K,V&gt;(hash, key, value);</span><br><span class="line">                            break;</span><br><span class="line">                   		&#125;</span><br><span class="line">            	&#125;</span><br><span class="line">     	 &#125;else if (f instanceof TreeBin) &#123; &#x2F;&#x2F;ËäÇÁÇπ‰∏∫Ê†ë</span><br><span class="line">                        Node&lt;K,V&gt; p;</span><br><span class="line">                        binCount &#x3D; 2;</span><br><span class="line">                        if ((p &#x3D; ((TreeBin&lt;K,V&gt;)f).putTreeVal(hash, key,</span><br><span class="line">                                                       value)) !&#x3D; null) &#123;</span><br><span class="line">                            oldVal &#x3D; p.val;</span><br><span class="line">                            if (!onlyIfAbsent)</span><br><span class="line">                                &#x2F;&#x2F;ÊõøÊç¢ÊóßÂÄº</span><br><span class="line">                                p.val &#x3D; value;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    else if (f instanceof ReservationNode)</span><br><span class="line">                        throw new IllegalStateException(&quot;Recursive update&quot;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;	 </span><br></pre></td></tr></table></figure></li>
<li><p>ÊâßË°åÂÆå<code>synchronized(f)</code>ÂêåÊ≠•‰ª£Á†ÅÂùó‰πãÂêé‰ºöÂÖàÊ£ÄÊü•<code>binCount</code>,Â¶ÇÊûúÂ§ß‰∫éÁ≠â‰∫éTREEIFY_THRESHOLD = 8ÂàôËøõË°åtreeifyBinÊìç‰ΩúÂ∞ùËØïÂ∞ÜËØ•ÈìæË°®ËΩ¨Êç¢‰∏∫Á∫¢ÈªëÊ†ë„ÄÇ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">if (binCount !&#x3D; 0) &#123;</span><br><span class="line">              &#x2F;&#x2F;Â¶ÇÊûúËäÇÁÇπÈïøÂ∫¶Â§ß‰∫é8,ËΩ¨Âåñ‰∏∫Ê†ë</span><br><span class="line">              if (binCount &gt;&#x3D; TREEIFY_THRESHOLD)</span><br><span class="line">                   treeifyBin(tab, i);</span><br><span class="line">              if (oldVal !&#x3D; null)</span><br><span class="line">                   return oldVal; </span><br><span class="line">               break;</span><br><span class="line">         &#125;</span><br></pre></td></tr></table></figure></li>
<li><p>ÊâßË°å‰∫Ü‰∏Ä‰∏™<code>addCount</code>ÊñπÊ≥ï,‰∏ªË¶ÅÁî®‰∫éÁªüËÆ°Êï∞Èáè‰ª•ÂèäÂÜ≥ÂÆöÊòØÂê¶ÈúÄË¶ÅÊâ©ÂÆπ.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">addCount(1L, binCount);</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="ConcurrentHashmap-‰∏çÊîØÊåÅ-key-ÊàñËÄÖ-value-‰∏∫-null-ÁöÑÂéüÂõ†Ôºü"><a href="#ConcurrentHashmap-‰∏çÊîØÊåÅ-key-ÊàñËÄÖ-value-‰∏∫-null-ÁöÑÂéüÂõ†Ôºü" class="headerlink" title="ConcurrentHashmap ‰∏çÊîØÊåÅ key ÊàñËÄÖ value ‰∏∫ null ÁöÑÂéüÂõ†Ôºü"></a>ConcurrentHashmap ‰∏çÊîØÊåÅ key ÊàñËÄÖ value ‰∏∫ null ÁöÑÂéüÂõ†Ôºü</h4><p><code>ConcurrentHashmap</code>Âíå<code>hashMap</code>‰∏çÂêåÁöÑÊòØÔºå<code>concurrentHashMap</code>ÁöÑ<code>key</code>Âíå<code>value</code>ÈÉΩ‰∏çÂÖÅËÆ∏‰∏∫nullÔºå</p>
<p>Âõ†‰∏∫<code>concurrenthashmap</code>ÂÆÉ‰ª¨ÊòØÁî®‰∫éÂ§öÁ∫øÁ®ãÁöÑÔºåÂπ∂ÂèëÁöÑ ÔºåÂ¶ÇÊûú<code>map.get(key)</code>ÂæóÂà∞‰∫ÜnullÔºå‰∏çËÉΩÂà§Êñ≠Âà∞Â∫ïÊòØÊò†Â∞ÑÁöÑvalueÊòØnull,ËøòÊòØÂõ†‰∏∫Ê≤°ÊúâÊâæÂà∞ÂØπÂ∫îÁöÑkeyËÄå‰∏∫Á©∫Ôºå</p>
<p>ËÄåÁî®‰∫éÂçïÁ∫øÁ®ãÁä∂ÊÄÅÁöÑ<code>hashmap</code>Âç¥ÂèØ‰ª•Áî®<code>containKeyÔºàkeyÔºâ</code> ÂéªÂà§Êñ≠Âà∞Â∫ïÊòØÂê¶ÂåÖÂê´‰∫ÜËøô‰∏™null„ÄÇ</p>
<h4 id="put-ÊñπÊ≥ïÂ¶Ç‰ΩïÂÆûÁé∞Á∫øÁ®ãÂÆâÂÖ®Âë¢Ôºü"><a href="#put-ÊñπÊ≥ïÂ¶Ç‰ΩïÂÆûÁé∞Á∫øÁ®ãÂÆâÂÖ®Âë¢Ôºü" class="headerlink" title="put()ÊñπÊ≥ïÂ¶Ç‰ΩïÂÆûÁé∞Á∫øÁ®ãÂÆâÂÖ®Âë¢Ôºü"></a>put()ÊñπÊ≥ïÂ¶Ç‰ΩïÂÆûÁé∞Á∫øÁ®ãÂÆâÂÖ®Âë¢Ôºü</h4><ol>
<li>Âú®Á¨¨‰∏ÄÊ¨°putÊï∞ÊçÆÊó∂ÔºåË∞ÉÁî®<code>initTable()</code>ÊñπÊ≥ï</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**  </span><br><span class="line">* HashË°®ÁöÑÂàùÂßãÂåñÂíåË∞ÉÊï¥Â§ßÂ∞èÁöÑÊéßÂà∂Ê†áÂøó„ÄÇ‰∏∫Ë¥üÊï∞ÔºåHashË°®Ê≠£Âú®ÂàùÂßãÂåñÊàñËÄÖÊâ©ÂÆπ;  </span><br><span class="line">* (-1Ë°®Á§∫Ê≠£Âú®ÂàùÂßãÂåñ,-NË°®Á§∫ÊúâN-1‰∏™Á∫øÁ®ãÂú®ËøõË°åÊâ©ÂÆπ)  </span><br><span class="line">* Âê¶ÂàôÔºåÂΩìË°®‰∏∫nullÊó∂Ôºå‰øùÂ≠òÂàõÂª∫Êó∂‰ΩøÁî®ÁöÑÂàùÂßãÂåñÂ§ßÂ∞èÊàñËÄÖÈªòËÆ§0;  </span><br><span class="line">* ÂàùÂßãÂåñ‰ª•Âêé‰øùÂ≠ò‰∏ã‰∏Ä‰∏™Ë∞ÉÊï¥Â§ßÂ∞èÁöÑÂ∞∫ÂØ∏„ÄÇ  </span><br><span class="line">*&#x2F;  </span><br><span class="line">private transient volatile int sizeCtl;  </span><br><span class="line">    &#x2F;&#x2F;Á¨¨‰∏ÄÊ¨°putÔºåÂàùÂßãÂåñÊï∞ÁªÑ  </span><br><span class="line">    private final Node&lt;K,V&gt;[] initTable() &#123;  </span><br><span class="line">        Node&lt;K,V&gt;[] tab; int sc;  </span><br><span class="line">        while ((tab &#x3D; table) &#x3D;&#x3D; null || tab.length &#x3D;&#x3D; 0) &#123;  </span><br><span class="line">            &#x2F;&#x2F;Â¶ÇÊûúÂ∑≤ÁªèÊúâÂà´ÁöÑÁ∫øÁ®ãÂú®ÂàùÂßãÂåñ‰∫ÜÔºåËøôÈáåÁ≠âÂæÖ‰∏Ä‰∏ã  </span><br><span class="line">            if ((sc &#x3D; sizeCtl) &lt; 0)  </span><br><span class="line">            Thread.yield(); &#x2F;&#x2F; lost initialization race; just spin  </span><br><span class="line">            &#x2F;&#x2F;-1 Ë°®Á§∫Ê≠£Âú®ÂàùÂßãÂåñ  </span><br><span class="line">            else if (U.compareAndSwapInt(this, SIZECTL, sc, -1)) &#123;  </span><br><span class="line">            ...  </span><br><span class="line">        &#125; finally &#123;  </span><br><span class="line">           sizeCtl &#x3D; sc;  </span><br><span class="line">        &#125;  </span><br><span class="line">           break;  </span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line">    return tab;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>‰ΩøÁî®<code>sizeCtl</code>ÂèÇÊï∞‰Ωú‰∏∫ÊéßÂà∂Ê†áÂøóÁöÑ‰ΩúÁî®ÔºåÂΩìÂú®‰ªéÊèíÂÖ•ÂÖÉÁ¥†Êó∂ÔºåÊâç‰ºöÂàùÂßãÂåñHashË°®„ÄÇÂú®ÂºÄÂßãÂàùÂßãÂåñÁöÑÊó∂ÂÄôÔºå</p>
<ul>
<li>È¶ñÂÖàÂà§Êñ≠<code>sizeCtl</code>ÁöÑÂÄºÔºåÂ¶ÇÊûú<strong>sizeCtl &lt; 0</strong>ÔºåËØ¥Êòé<strong>ÊúâÁ∫øÁ®ãÂú®ÂàùÂßãÂåñ</strong>Ôºå<strong>ÂΩìÂâçÁ∫øÁ®ã‰æøÊîæÂºÉÂàùÂßãÂåñÊìç‰Ωú</strong>„ÄÇÂê¶ÂàôÔºåÂ∞Ü**<code>SIZECTL</code>ËÆæÁΩÆ‰∏∫-1<strong>Ôºå</strong>HashË°®ËøõË°åÂàùÂßãÂåñ**„ÄÇ</li>
<li>ÂàùÂßãÂåñÊàêÂäü‰ª•ÂêéÔºåÂ∞Ü<code>sizeCtl</code>ÁöÑÂÄºËÆæÁΩÆ‰∏∫ÂΩìÂâçÁöÑÂÆπÈáèÂÄº</li>
</ul>
<ol>
<li>Âú®‰∏çÂ≠òÂú®hashÂÜ≤Á™ÅÁöÑÊó∂</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">else if ((f &#x3D; tabAt(tab, i &#x3D; (n - 1) &amp; hash)) &#x3D;&#x3D; null) &#123;  </span><br><span class="line">     &#x2F;&#x2F;Âà©Áî®CASÊìç‰ΩúÂ∞ÜÂÖÉÁ¥†ÊèíÂÖ•Âà∞HashË°®‰∏≠  </span><br><span class="line">     if (casTabAt(tab, i, null, new Node&lt;K,V&gt;(hash, key, value)))  </span><br><span class="line">     break;  &#x2F;&#x2F; no lock when adding to empty bin(ÊèíÂÖ•nullÁöÑËäÇÁÇπÔºåÊó†ÈúÄÂä†ÈîÅ)  </span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p><code>(f = tabAt(tab, i = (n - 1) &amp; hash)) == null</code>‰∏≠‰ΩøÁî®tabAtÂéüÂ≠êÊìç‰ΩúËé∑ÂèñÊï∞ÁªÑÔºåÂπ∂Âà©Áî®<code>casTabAt(tab, i, null, new Node&lt;K,V&gt;(hash, key, value))</code>CASÊìç‰ΩúÂ∞ÜÂÖÉÁ¥†ÊèíÂÖ•Âà∞HashË°®‰∏≠</p>
<ol>
<li>Âú®Â≠òÂú®hashÂÜ≤Á™ÅÊó∂ÔºåÂÖàÊääÂΩìÂâçËäÇÁÇπ‰ΩøÁî®ÂÖ≥ÈîÆÂ≠ó<code>synchronized</code>Âä†ÈîÅÔºåÁÑ∂ÂêéÂÜç‰ΩøÁî®<code>tabAt()</code>ÂéüÂ≠êÊìç‰ΩúÂà§Êñ≠‰∏ãÊúâÊ≤°ÊúâÁ∫øÁ®ãÂØπÊï∞ÁªÑËøõË°å‰∫Ü‰øÆÊîπÔºåÊúÄÂêéÂÜçËøõË°åÂÖ∂‰ªñÊìç‰Ωú„ÄÇ</li>
</ol>
<p><strong>‰∏∫‰ªÄ‰πàË¶ÅÈîÅ‰ΩèÊõ¥Êñ∞Êìç‰ΩúÁöÑ‰ª£Á†ÅÂùó?</strong></p>
<p>Âõ†‰∏∫ÂèëÁîü‰∫ÜÂìàÂ∏åÂÜ≤Á™ÅÔºåÂΩìÂâçÁ∫øÁ®ãÊ≠£Âú®fÊâÄÂú®ÁöÑÈìæË°®‰∏äËøõË°åÊõ¥Êñ∞Êìç‰ΩúÔºåÂÅáÂ¶ÇÊ≠§Êó∂Âè¶Â§ñ‰∏Ä‰∏™Á∫øÁ®ã‰πüÈúÄË¶ÅÂà∞Ëøô‰∏™ÈìæË°®‰∏äËøõË°åÊõ¥Êñ∞Êìç‰ΩúÔºåÂàôÈúÄË¶ÅÁ≠âÂæÖÂΩìÂâçÁ∫øÁ®ãÊõ¥Êñ∞ÂÆåÂêéÂÜçÊâßË°å</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;ÂΩìÂâçËäÇÁÇπÂä†ÈîÅ  </span><br><span class="line">synchronized (f) &#123;  </span><br><span class="line">     &#x2F;&#x2F;ËøôÈáåÂà§Êñ≠‰∏ãÊúâÊ≤°ÊúâÁ∫øÁ®ãÂØπÊï∞ÁªÑËøõË°å‰∫Ü‰øÆÊîπ  </span><br><span class="line">     if (tabAt(tab, i) &#x3D;&#x3D; f) &#123;  </span><br><span class="line">     ......&#x2F;&#x2F;do something  </span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ConcurrentHashMapÁöÑgetÊñπÊ≥ïÊòØÂê¶Ë¶ÅÂä†ÈîÅÔºå‰∏∫‰ªÄ‰πàÔºü"><a href="#ConcurrentHashMapÁöÑgetÊñπÊ≥ïÊòØÂê¶Ë¶ÅÂä†ÈîÅÔºå‰∏∫‰ªÄ‰πàÔºü" class="headerlink" title="ConcurrentHashMapÁöÑgetÊñπÊ≥ïÊòØÂê¶Ë¶ÅÂä†ÈîÅÔºå‰∏∫‰ªÄ‰πàÔºü"></a>ConcurrentHashMapÁöÑgetÊñπÊ≥ïÊòØÂê¶Ë¶ÅÂä†ÈîÅÔºå‰∏∫‰ªÄ‰πàÔºü</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">public V get(Object key) &#123;</span><br><span class="line">        Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; e, p; int n, eh; K ek;</span><br><span class="line">        int h &#x3D; spread(key.hashCode());</span><br><span class="line">        &#x2F;&#x2F;Êª°Ë∂≥Êù°‰ª∂Áõ¥Êé•ËøîÂõûÂØπÂ∫îÁöÑÂÄº</span><br><span class="line">        if ((tab &#x3D; table) !&#x3D; null &amp;&amp; (n &#x3D; tab.length) &gt; 0 &amp;&amp;</span><br><span class="line">            (e &#x3D; tabAt(tab, (n - 1) &amp; h)) !&#x3D; null) &#123;</span><br><span class="line">            if ((eh &#x3D; e.hash) &#x3D;&#x3D; h) &#123;</span><br><span class="line">                if ((ek &#x3D; e.key) &#x3D;&#x3D; key || (ek !&#x3D; null &amp;&amp; key.equals(ek)))</span><br><span class="line">                    return e.val;</span><br><span class="line">            &#125;</span><br><span class="line">            &#x2F;&#x2F;e.hash&lt;0ÔºåÊ≠£Âú®Êâ©ÂÆπ</span><br><span class="line">            else if (eh &lt; 0)</span><br><span class="line">                return (p &#x3D; e.find(h, key)) !&#x3D; null ? p.val : null;</span><br><span class="line">            &#x2F;&#x2F;ÈÅçÂéÜÂΩìÂâçËäÇÁÇπ</span><br><span class="line">            while ((e &#x3D; e.next) !&#x3D; null) &#123;</span><br><span class="line">                if (e.hash &#x3D;&#x3D; h &amp;&amp;</span><br><span class="line">                    ((ek &#x3D; e.key) &#x3D;&#x3D; key || (ek !&#x3D; null &amp;&amp; key.equals(ek))))</span><br><span class="line">                    return e.val;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return null;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>ConcurrentHashMapÁöÑgetÊñπÊ≥ïÂ∞±ÊòØ‰ªéHashË°®‰∏≠ËØªÂèñÊï∞ÊçÆÔºåÂπ∂‰∏ç‰ºö‰∏éÊâ©ÂÆπ‰∏çÂÜ≤Á™ÅÔºåÂõ†Ê≠§ËØ•ÊñπÊ≥ï‰πü‰∏çÈúÄË¶ÅÂêåÊ≠•ÈîÅÔºåËøôÊ†∑ÂèØÊèêÈ´òConcurrentHashMap ÁöÑÂπ∂ÂèëÊÄßËÉΩ„ÄÇ</p>
<h4 id="1-7ËôΩÁÑ∂ÂèØ‰ª•ÊîØÊåÅÊØè‰∏™SegmentÂπ∂ÂèëËÆøÈóÆÔºå‰ΩÜÊòØËøòÊòØÂ≠òÂú®‰∏Ä‰∫õÈóÆÈ¢òÔºü"><a href="#1-7ËôΩÁÑ∂ÂèØ‰ª•ÊîØÊåÅÊØè‰∏™SegmentÂπ∂ÂèëËÆøÈóÆÔºå‰ΩÜÊòØËøòÊòØÂ≠òÂú®‰∏Ä‰∫õÈóÆÈ¢òÔºü" class="headerlink" title="1.7ËôΩÁÑ∂ÂèØ‰ª•ÊîØÊåÅÊØè‰∏™SegmentÂπ∂ÂèëËÆøÈóÆÔºå‰ΩÜÊòØËøòÊòØÂ≠òÂú®‰∏Ä‰∫õÈóÆÈ¢òÔºü"></a>1.7ËôΩÁÑ∂ÂèØ‰ª•ÊîØÊåÅÊØè‰∏™SegmentÂπ∂ÂèëËÆøÈóÆÔºå‰ΩÜÊòØËøòÊòØÂ≠òÂú®‰∏Ä‰∫õÈóÆÈ¢òÔºü</h4><p>Âõ†‰∏∫Âü∫Êú¨‰∏äËøòÊòØÊï∞ÁªÑÂä†ÈìæË°®ÁöÑÊñπÂºèÔºåÊàë‰ª¨ÂéªÊü•ËØ¢ÁöÑÊó∂ÂÄôÔºåËøòÂæóÈÅçÂéÜÈìæË°®Ôºå‰ºöÂØºËá¥ÊïàÁéáÂæà‰ΩéÔºåËøô‰∏™Ë∑üjdk1.7ÁöÑHashMapÊòØÂ≠òÂú®ÁöÑ‰∏ÄÊ†∑ÈóÆÈ¢òÔºåÊâÄ‰ª•‰ªñÂú®jdk1.8ÂÆåÂÖ®‰ºòÂåñ‰∫Ü„ÄÇ</p>
<h4 id="Êâ©ÂÆπ-transfer-ÊñπÊ≥ï"><a href="#Êâ©ÂÆπ-transfer-ÊñπÊ≥ï" class="headerlink" title="Êâ©ÂÆπ transfer ÊñπÊ≥ï"></a>Êâ©ÂÆπ transfer ÊñπÊ≥ï</h4><p><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000021237438">https://segmentfault.com/a/1190000021237438</a></p>
<h2 id="CopyOnWriteArrayList"><a href="#CopyOnWriteArrayList" class="headerlink" title="CopyOnWriteArrayList"></a>CopyOnWriteArrayList</h2><p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903705599279118#heading-8">https://juejin.cn/post/6844903705599279118#heading-8</a></p>
<p>ËØªÂÜôÂàÜÁ¶ªÊÄùÊÉ≥ÔºåÂÜôÊó∂Â§çÂà∂ÊÄùÊÉ≥</p>
<p>CopyOnWriteArrayList ÊòØ‰∏Ä‰∏™ÂÜôÊó∂Â§çÂà∂ÁöÑÂÆπÂô®ÔºåÂΩìÊàë‰ª¨ÂæÄ‰∏Ä‰∏™ÂÆπÂô®Ê∑ªÂä†ÂÖÉÁ¥†ÁöÑÊó∂ÂÄôÔºå‰∏çÁõ¥Êé•ÂæÄÂΩìÂâçÂÆπÂô®Ê∑ªÂä†ÔºåËÄåÊòØÂÖàÂ∞ÜÂΩìÂâçÂÆπÂô®ËøõË°å CopyÔºåÂ§çÂà∂Âá∫‰∏Ä‰∏™Êñ∞ÁöÑÂÆπÂô®ÔºåÁÑ∂ÂêéÂæÄÊñ∞ÁöÑÂÆπÂô®ÈáåÊ∑ªÂä†ÂÖÉÁ¥†ÔºåÊ∑ªÂä†ÂÆåÂÖÉÁ¥†‰πãÂêéÔºåÂÜçÂ∞ÜÂéüÂÆπÂô®ÁöÑÂºïÁî®ÊåáÂêëÊñ∞ÁöÑÂÆπÂô®„ÄÇËøôÊ†∑ÂÅöÁöÑÂ•ΩÂ§ÑÊòØÊàë‰ª¨ÂèØ‰ª•ÂØπ CopyOnWriteArrayList ËøõË°åÂπ∂ÂèëÁöÑËØªÔºåËÄå‰∏çÈúÄË¶ÅÂä†ÈîÅÔºåÂõ†‰∏∫ÂΩìÂâçÂÆπÂô®‰∏ç‰ºöÊ∑ªÂä†‰ªª‰ΩïÂÖÉÁ¥†„ÄÇÊâÄ‰ª• CopyOnWriteArrayList ÊòØ‰∏ÄÁßçËØªÂÜôÂàÜÁ¶ªÁöÑÂÆπÂô®ÔºåÈÄÇÁî®‰∫éËØªÂ§öÂÜôÂ∞ëÁöÑÂú∫ÊôØÔºåÊîØÊåÅÈ´òÂπ∂ÂèëËØªÂèñ„ÄÇ</p>
<blockquote>
<p>CopyOnWriteArrayList ÊòØÂ¶Ç‰Ωï‰øùËØÅÂÜôÊó∂Á∫øÁ®ãÂÆâÂÖ®ÁöÑÔºü</p>
</blockquote>
<p>‰ΩøÁî®‰∫Ü ReentrantLock Áã¨Âç†ÈîÅÔºå‰øùËØÅÂêåÊó∂Âè™Êúâ‰∏Ä‰∏™Á∫øÁ®ãÂØπÈõÜÂêàËøõË°å‰øÆÊîπÊìç‰Ωú„ÄÇ</p>
<blockquote>
<p>Â¶Ç‰ΩïÁêÜËß£ CopyOnWrite ÊÄùÊÉ≥Ôºü</p>
</blockquote>
<p>ÂÜôÊó∂Â§çÂà∂„ÄÇÂ∞±ÊòØÂú®ÂÜôÁöÑÊó∂ÂÄôÔºåÊã∑Ë¥ù‰∏Ä‰ªΩÂéüÂØπË±°ÔºåÂè™Êìç‰ΩúÊã∑Ë¥ùÁöÑÂØπË±°ÔºåÊìç‰ΩúÂÆåÂêéÂÜçË¶ÜÁõñÂéüÂØπË±°Ôºå‰øùËØÅ volatile ËØ≠‰πâ„ÄÇ</p>
<blockquote>
<p>CopyOnWriteArrayList Âú®‰ΩøÁî®Ëø≠‰ª£Âô®Êó∂ÊòØÂê¶Êúâ‰ªÄ‰πàÊ≥®ÊÑè‰∫ãÈ°πÔºü</p>
</blockquote>
<p>Êàë‰ª¨Áü•ÈÅìÔºåCopyOnWriteArrayList ÊòØÂ∫ïÂ±Ç‰ΩøÁî®‰∏ÄÁßçÂÆâÂÖ®Â§±Ë¥•Êú∫Âà∂„ÄÇ‰πüÂ∞±ÊòØËØ¥ÔºåÂèØ‰ª•Âú®Ëø≠‰ª£Êó∂ËøõË°åÂ¢ûÂà†ÊîπÊìç‰Ωú„ÄÇ</p>
<p>‰∏çËøáÔºåÂú®Ëø≠‰ª£Âô®‰ΩøÁî®Êó∂Êúâ‰∏Ä‰∏™Ê≥®ÊÑè‰∫ãÈ°πÔºö<strong>Ëø≠‰ª£Âô®Ëé∑ÂèñÁöÑÊï∞ÊçÆÂèñÂÜ≥‰∫éËø≠‰ª£Âô®ÂàõÂª∫ÁöÑÊó∂ÂÄôÔºåËÄå‰∏çÊòØËø≠‰ª£Âô®Ëø≠‰ª£ÁöÑÊó∂ÂÄô„ÄÇ</strong></p>
<p>CopyOnWriteArrayList ÊòØÂÆâÂÖ®ÁöÑÂπ∂ÂèëÂÆπÂô®ÔºåÊúâ‰ª•‰∏ã‰∏§‰∏™ÁâπÁÇπÔºö</p>
<ol>
<li>ÂØπÊï∞ÁªÑÁöÑÂÜôÊìç‰ΩúÂä†ÈîÅÔºåËØªÊìç‰Ωú‰∏çÂä†ÈîÅÔºõ</li>
<li>ÈÄöËøáÂä†ÈîÅ + Êï∞ÁªÑÊã∑Ë¥ù+ volatile Êù•‰øùËØÅÁ∫øÁ®ãÂÆâÂÖ®Ôºõ</li>
</ol>
<p><strong>CopyOnWriteArrayListÁº∫ÁÇπ</strong></p>
<ul>
<li><p>ÂÜÖÂ≠òÂç†Áî®ÔºöÂ¶ÇÊûúCopyOnWriteArrayListÁªèÂ∏∏Ë¶ÅÂ¢ûÂà†ÊîπÈáåÈù¢ÁöÑÊï∞ÊçÆÔºåÁªèÂ∏∏Ë¶ÅÊâßË°åadd()„ÄÅset()„ÄÅremove()</p>
<p>ÁöÑËØùÔºåÈÇ£ÊòØÊØîËæÉËÄóË¥πÂÜÖÂ≠òÁöÑ„ÄÇ</p>
<ul>
<li>Âõ†‰∏∫Êàë‰ª¨Áü•ÈÅìÊØèÊ¨°<code>add()„ÄÅset()„ÄÅremove()</code>Ëøô‰∫õÂ¢ûÂà†ÊîπÊìç‰ΩúÈÉΩË¶Å<strong>Â§çÂà∂‰∏Ä‰∏™Êï∞ÁªÑ</strong>Âá∫Êù•„ÄÇ</li>
</ul>
</li>
<li><p>Êï∞ÊçÆ‰∏ÄËá¥ÊÄßÔºöCopyOnWriteÂÆπÂô®Âè™ËÉΩ‰øùËØÅÊï∞ÊçÆÁöÑÊúÄÁªà‰∏ÄËá¥ÊÄßÔºå‰∏çËÉΩ‰øùËØÅÊï∞ÊçÆÁöÑÂÆûÊó∂‰∏ÄËá¥ÊÄß„ÄÇ</p>
<ul>
<li>‰ªé‰∏äÈù¢ÁöÑ‰æãÂ≠ê‰πüÂèØ‰ª•ÁúãÂá∫Êù•ÔºåÊØîÂ¶ÇÁ∫øÁ®ãAÂú®Ëø≠‰ª£CopyOnWriteArrayListÂÆπÂô®ÁöÑÊï∞ÊçÆ„ÄÇÁ∫øÁ®ãBÂú®Á∫øÁ®ãAËø≠‰ª£ÁöÑÈó¥Èöô‰∏≠Â∞ÜCopyOnWriteArrayListÈÉ®ÂàÜÁöÑÊï∞ÊçÆ‰øÆÊîπ‰∫Ü(Â∑≤ÁªèË∞ÉÁî®<code>setArray()</code>‰∫Ü)„ÄÇ‰ΩÜÊòØÁ∫øÁ®ãAËø≠‰ª£Âá∫Êù•ÁöÑÊòØÂéüÊúâÁöÑÊï∞ÊçÆ„ÄÇ</li>
</ul>
</li>
</ul>
<h2 id="CopyOnWriteArraySet"><a href="#CopyOnWriteArraySet" class="headerlink" title="CopyOnWriteArraySet"></a>CopyOnWriteArraySet</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> CopyOnWriteArrayList&lt;E&gt; al;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Creates an empty set.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">CopyOnWriteArraySet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    al = <span class="keyword">new</span> CopyOnWriteArrayList&lt;E&gt;();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>CopyOnWriteArraySetÊòØÂü∫‰∫éCopyOnWriteArrayListÂÆûÁé∞ÁöÑÔºàÂÜçÊ∑ªÂä†ÂÖÉÁ¥†ÊòØËøõË°åÂéªÈáçÊìç‰ΩúÔºâÔºåÂÜÖÈÉ®Â∞±ÊòØËøô‰∏™‰∏Ä‰∏™CopyOnWriteArrayListÔºåÁîöËá≥Âú®ÂÆûÁé∞ÁöÑÊó∂ÂÄôÁõ¥Êé•new‰∏Ä‰∏™Âá∫Êù•ÔºåÂ∞±ÊòØËøô‰πàÁõ¥Êé•„ÄÇ</p>
<h2 id="ConcurrentSkipListMap"><a href="#ConcurrentSkipListMap" class="headerlink" title="ConcurrentSkipListMap"></a>ConcurrentSkipListMap</h2><ul>
<li>ConcurrentSkipListMapÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÊúâÂ∫èÁöÑÂìàÂ∏åË°®(Áõ∏ÂΩì‰∫éÁ∫øÁ®ãÂÆâÂÖ®ÁöÑTreeMap); ÂÆÉÁªßÊâø‰∫éAbstractMapÁ±ªÔºåÂπ∂‰∏îÂÆûÁé∞ConcurrentNavigableMapÊé•Âè£„ÄÇConcurrentSkipListMapÊòØÈÄöËøá‚ÄúË∑≥Ë°®‚ÄùÊù•ÂÆûÁé∞ÁöÑÔºåÂÆÉÊîØÊåÅÂπ∂Âèë„ÄÇ</li>
<li>ConcurrentSkipListSetÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÊúâÂ∫èÁöÑÈõÜÂêà(Áõ∏ÂΩì‰∫éÁ∫øÁ®ãÂÆâÂÖ®ÁöÑTreeSet)ÔºõÂÆÉÁªßÊâø‰∫éAbstractSetÔºåÂπ∂ÂÆûÁé∞‰∫ÜNavigableSetÊé•Âè£„ÄÇConcurrentSkipListSetÊòØÈÄöËøáConcurrentSkipListMapÂÆûÁé∞ÁöÑÔºåÂÆÉ‰πüÊîØÊåÅÂπ∂Âèë„ÄÇ</li>
</ul>
<p>ConcurrentSkipListMapÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÊúâÂ∫èÁöÑÂìàÂ∏åË°®ÔºåÈÄÇÁî®‰∫éÈ´òÂπ∂ÂèëÁöÑÂú∫ÊôØ„ÄÇ</p>
<p>ConcurrentSkipListMapÂíåTreeMapÔºåÂÆÉ‰ª¨ËôΩÁÑ∂ÈÉΩÊòØÊúâÂ∫èÁöÑÂìàÂ∏åË°®„ÄÇ‰ΩÜÊòØÔºåÁ¨¨‰∏ÄÔºåÂÆÉ‰ª¨ÁöÑÁ∫øÁ®ãÂÆâÂÖ®Êú∫Âà∂‰∏çÂêåÔºåTreeMapÊòØÈùûÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºåËÄåConcurrentSkipListMapÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑ„ÄÇÁ¨¨‰∫åÔºåConcurrentSkipListMapÊòØÈÄöËøáË∑≥Ë°®ÂÆûÁé∞ÁöÑÔºåËÄåTreeMapÊòØÈÄöËøáÁ∫¢ÈªëÊ†ëÂÆûÁé∞ÁöÑ„ÄÇ</p>
<p>‰ΩÜConcurrentSkipListMapÊúâÂá†‰∏™ConcurrentHashMap ‰∏çËÉΩÊØîÊãüÁöÑ‰ºòÁÇπÔºö</p>
<p>1„ÄÅConcurrentSkipListMap ÁöÑkeyÊòØÊúâÂ∫èÁöÑ„ÄÇ</p>
<p>2„ÄÅConcurrentSkipListMap ÊîØÊåÅÊõ¥È´òÁöÑÂπ∂Âèë„ÄÇConcurrentSkipListMap ÁöÑÂ≠òÂèñÊó∂Èó¥ÊòØlogÔºàNÔºâÔºåÂíåÁ∫øÁ®ãÊï∞Âá†‰πéÊó†ÂÖ≥„ÄÇ‰πüÂ∞±ÊòØËØ¥Âú®Êï∞ÊçÆÈáè‰∏ÄÂÆöÁöÑÊÉÖÂÜµ‰∏ãÔºåÂπ∂ÂèëÁöÑÁ∫øÁ®ãË∂äÂ§öÔºåConcurrentSkipListMapË∂äËÉΩ‰ΩìÁé∞Âá∫‰ªñÁöÑ‰ºòÂäø„ÄÇ</p>

  
  
  <div class="footer">
      <script src="//m.servedby-buysellads.com/monetization.js" type="text/javascript"></script>
<div id="bsa-native"></div>
<script>
_bsa.init('custom', 'CKYD62QM', 'placement:vuejsorg',
  {
    target: '#bsa-native',
    template: '<a class="native-box" href="##statlink##"><div class="native-sponsor">Sponsor</div><div class="native-text"><strong>##company##</strong> ‚Äî ##description##</div></a>'
  }
);
</script>


    Caught a mistake or want to contribute to the documentation?
    <a href="https://github.com/vuejs/vuejs.org/blob/master/src/data/Java/java_collection.md" rel="noopener" target="_blank">
      Edit this on GitHub!
    </a>
    <!-- Deployed on
    <a href="https://url.netlify.com/HJ8X2mxP8" rel="noopener" target="_blank">
      Netlify
    </a>. -->
  </div>
</div>

      </div>
      <script src="/js/smooth-scroll.min.js"></script>
    

    <!-- main custom script for sidebars, version selects etc. -->
    <script src="/js/css.escape.js"></script>
    <script src="/js/common.js"></script>

    <!-- search -->
    <link href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel='stylesheet' type='text/css'>
    
<link rel="stylesheet" href="/css/search.css">

    <script src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script>
    <script>
    [
      '#search-query-nav',
      '#search-query-sidebar',
      '#search-query-menu'
    ].forEach(function (selector) {
      if (!document.querySelector(selector)) return
      // search index defaults to v2
      var match = window.location.pathname.match(/^\/(v\d+)/)
      var version = match ? match[1] : 'v2'
      docsearch({
      appId: 'BH4D9OD16A',
      apiKey: '85cc3221c9f23bfbaa4e3913dd7625ea',
      indexName: 'vuejs',
      inputSelector: selector,
      algoliaOptions: { facetFilters: ["version:" + version] },
      autocompleteOptions: { hint: false, appendTo: 'body'}
      })
    })
    </script>
  </body>
</html>
