


<!DOCTYPE html>
<html lang="en" class="with-v3-banner">
  <head>
    <title>Mysql Êó•ÂøóÁõ∏ÂÖ≥ ‚Äî Notes</title>
    <meta charset="utf-8">
    <meta name="description" content="Notes - Personal review warehouse">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="alternate" hreflang="x-default" href="https://vuejs.org/mysql/mysql-logs.html">
    <link rel="alternate" hreflang="zh" href="https://cn.vuejs.org/mysql/mysql-logs.html">
    <link rel="alternate" hreflang="ja" href="https://jp.vuejs.org/mysql/mysql-logs.html">
    <link rel="alternate" hreflang="ru" href="https://ru.vuejs.org/mysql/mysql-logs.html">
    <link rel="alternate" hreflang="ko" href="https://kr.vuejs.org/mysql/mysql-logs.html">
    <link rel="alternate" hreflang="pt-BR" href="https://br.vuejs.org/mysql/mysql-logs.html">
    <link rel="alternate" hreflang="fr" href="https://fr.vuejs.org/mysql/mysql-logs.html">
    <link rel="alternate" hreflang="es" href="https://es.vuejs.org/mysql/mysql-logs.html">

    <meta property="og:type" content="article">
    <meta property="og:title" content="Mysql Êó•ÂøóÁõ∏ÂÖ≥ ‚Äî Notes">
    <meta property="og:description" content="Notes - Personal review warehouse">
    <meta property="og:image" content="https://vuejs.org//images/logo.png">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Mysql Êó•ÂøóÁõ∏ÂÖ≥ ‚Äî Notes">
    <meta name="twitter:description" content="Notes - Personal review warehouse">
    <meta name="twitter:image" content="https://vuejs.org/images/logo.png">

    <link rel="apple-touch-icon" sizes="57x57" href="/images/icons/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/images/icons/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/images/icons/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/images/icons/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/images/icons/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/images/icons/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/images/icons/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/images/icons/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/icons/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/images/icons/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/images/icons/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/icons/favicon-16x16.png">
    <meta name="msapplication-TileImage" content="/images/icons/ms-icon-144x144.png">
    <link rel="icon" href="/images/logo.png" type="image/png">

    <meta name="msapplication-TileColor" content="#4fc08d">
    <meta name="theme-color" content="#4fc08d">

    <meta name="msapplication-config" content="browserconfig.xml">
    <link rel="manifest" href="/manifest.json">

    <link href="https://fonts.googleapis.com" rel="preconnect" crossorigin>
    <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
    <link href="https://maxcdn.bootstrapcdn.com" rel="preconnect" crossorigin>

    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600|Roboto Mono&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Dosis:500&text=Vue.js&display=swap" rel="stylesheet">

    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

    <!-- main page styles -->
    
<link rel="stylesheet" href="/css/page.css">


    <!-- this needs to be loaded before guide's inline scripts -->
    <script src="/js/vue.js"></script>

    

    <script>
      Vue.config.productionTip = false
      window.PAGE_TYPE = "api"
    </script>

    <!-- ga -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-46852172-1', 'vuejs.org');
      ga('send', 'pageview');
    </script>

    <!-- vimeo analytics -->
    <script type="text/javascript" defer="defer" src="https://extend.vimeocdn.com/ga/72160148.js"></script>
  <meta name="generator" content="Hexo 5.4.0"></head>
  <body class="docs">
    <div id="mobile-bar" >
      <a class="menu-button"></a>
      <a class="logo" href="/"></a>
    </div>
    <div>
  <div id="v3-banner">
    <span class="hidden-sm">Welcome to yanliang's notes</span>
  </div>

  <header id="header">
    <a id="logo" href="/">
      <img src="/images/logo.png" alt="vue logo">
      <span>Notes - personal review warehouse</span>
    </a>
    <ul id="nav">
      <li>
  <form id="search-form">
    <input type="text" id="search-query-nav" class="search-query st-default-search-input" aria-label="Search">
  </form>
</li>
<li class="nav-dropdown-container learn">
  <a class="nav-link">‚≠êÔ∏èJava</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><h4>Documentation</h4></li>
    <li>
      <ul>
        <li><a href="/java/oop/" class="nav-link">OOP</a></li>
        <li><a href="/v2/api/" class="nav-link">API</a></li>
        <li><a href="/v2/style-guide/" class="nav-link">Style Guide</a></li>
        <li><a href="/v2/examples/" class="nav-link">Examples</a></li>
        <li><a href="/v2/cookbook/" class="nav-link">Cookbook</a></li>
      </ul>
    </li>
    <li><h4>Video Courses</h4></li>
    <li>
      <ul>
        <li>
          <a href="https://www.vuemastery.com/courses/" class="nav-link" target="_blank" rel="sponsored noopener">
            Vue Mastery
          </a>
        </li>
        <li>
          <a
            href="https://vueschool.io/?friend=vuejs&utm_source=Vuejs.org&utm_medium=Link&utm_content=Navbar%20Dropdown"
            class="nav-link"
            target="_blank" rel="sponsored noopener"
          >
            Vue School
          </a>
        </li>
      </ul>
    </li>
  </ul>
</li>

<li class="nav-dropdown-container learn">
  <a class="nav-link">ÁΩëÁªú</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <!-- <li><h4>Documentation</h4></li> -->
    <li>
      <ul>
        <li><a href="/network">Review List</a></li>
        <li><a href="/network/tcp/">üî•TCP</a></li>
        <li><a href="/network/http/">HTTP</a></li>
        <li><a href="/network/ip/">IP</a></li>
      </ul>
    </li>
    <li><h4>Video Courses</h4></li>
    <li>
      <ul>
        <li>
          <a href="https://www.vuemastery.com/courses/" class="nav-link" target="_blank" rel="sponsored noopener">
            Vue Mastery
          </a>
        </li>
        <li>
          <a
            href="https://vueschool.io/?friend=vuejs&utm_source=Vuejs.org&utm_medium=Link&utm_content=Navbar%20Dropdown"
            class="nav-link"
            target="_blank" rel="sponsored noopener"
          >
            Vue School
          </a>
        </li>
      </ul>
    </li>
  </ul>
</li>

<li>
  <a href="/os/">Êìç‰ΩúÁ≥ªÁªü</a>
</li>
<li>
  <a href="/mysql/">üíºÊï∞ÊçÆÂ∫ì</a>
</li>
<li>
  <a target="_blank" rel="noopener" href="https://codetop.cc/#/home">‚ù§Ô∏èÁÆóÊ≥ï</a>
</li>
<li class="nav-dropdown-container resources">
  <a href="#" class="nav-link">Resources</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="/resources/partners.html" class="nav-link">Partners</a></li>
    <li><a href="/resources/themes.html" class="nav-link">Themes</a></li>
    <li><a href="https://github.com/vuejs/awesome-vue" class="nav-link" target="_blank" rel="noopener">Awesome Vue</a></li>
    <li><a href="https://awesomejs.dev/for/vue/" class="nav-link" target="_blank" rel="noopener">Browse packages for Vue</a></li>
  </ul>
</li>

<!-- <li>
  <a href="/partners" class="nav-link ">Partners</a>
</li> -->
<li class="nav-dropdown-container support-vue">
  <a href="/support-vuejs/" class="nav-link">Support Vue</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="/support-vuejs/#One-time-Donations" class="nav-link">One-time Donations</a></li>
    <li><a href="/support-vuejs/#Recurring-Pledges" class="nav-link">Recurring Pledges</a></li>
    <li><a href="https://vue.threadless.com" target="_blank" rel="noopener" class="nav-link">T-Shirt Shop</a></li>
  </ul>
</li>

<li class="nav-dropdown-container language">
  <a class="nav-link">Translations</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a target="_blank" rel="noopener" href="https://cn.vuejs.org/mysql/mysql-logs.html" class="nav-link">‰∏≠Êñá</a></li>
    <li><a target="_blank" rel="noopener" href="https://jp.vuejs.org/mysql/mysql-logs.html" class="nav-link">Êó•Êú¨Ë™û</a></li>
    <li><a target="_blank" rel="noopener" href="https://ru.vuejs.org/mysql/mysql-logs.html" class="nav-link">–†—É—Å—Å–∫–∏–π</a></li>
    <li><a target="_blank" rel="noopener" href="https://kr.vuejs.org/mysql/mysql-logs.html" class="nav-link">ÌïúÍµ≠Ïñ¥</a></li>
    <li><a target="_blank" rel="noopener" href="https://br.vuejs.org/mysql/mysql-logs.html" class="nav-link">Portugu√™s</a></li>
    <li><a target="_blank" rel="noopener" href="https://fr.vuejs.org/mysql/mysql-logs.html" class="nav-link">Fran√ßais</a></li>
    <li><a target="_blank" rel="noopener" href="https://vi.vuejs.org/mysql/mysql-logs.html" class="nav-link">Ti·∫øng Vi·ªát</a></li>
    <li><a target="_blank" rel="noopener" href="https://es.vuejs.org/mysql/mysql-logs.html" class="nav-link">Espa√±ol</a></li>
    <li><a target="_blank" rel="noopener" href="https://docs.vuejs.id/mysql/mysql-logs.html" class="nav-link">Bahasa Indonesia</a></li>
  </ul>
</li>


    </ul>
  </header>
</div>

    
      <div id="main" class="fix-sidebar">
        
  

<div class="sidebar">
  <div class="sidebar-inner">
    
    <div class="list">
      <!-- <div id="sidebar-sponsors-special">
  <div class="main-sponsor">
    <span>Special Sponsor</span>
    <div>
    <a href="https://autocode.com/" target="_blank" rel="sponsored noopener" class="logo">
      <img src="/images/autocode.svg" alt="Autocode">
    </a>
    </div>
  </div>
</div>

 -->
      
        <!-- <h2>
          
          API
          
            <select class="version-select">
              <option value="v3">3.x</option>
              <option value="SELF" selected>2.x</option>
              <option value="v1">1.0</option>
              <option value="012">0.12</option>
              <option value="011">0.11</option>
            </select>
          
        </h2> -->
        <ul class="menu-root">
  
</ul>

      
    </div>
  </div>
</div>
<!-- 
<div id="sidebar-sponsors-platinum-right">
  <div class="main-sponsor">
    <span>Platinum Sponsors</span>
    <div>
    <a href="https://vueschool.io/?utm_source=Vuejs.org&utm_medium=Banner&utm_campaign=Sponsored%20Banner&utm_content=V1" target="_blank" rel="sponsored noopener" class="logo">
      <img src="/images/vueschool.png" alt="VueSchool">
    </a>
    <a href="https://vehikl.com/" target="_blank" rel="sponsored noopener" class="logo">
      <img src="/images/vehikl.png" alt="Vehikl">
    </a>
    <a href="https://retool.com/?utm_source=sponsor&utm_campaign=vue" target="_blank" rel="sponsored noopener" class="logo">
      <img src="/images/retool.png" alt="Retool">
    </a>
    <a href="https://passionatepeople.io/" target="_blank" rel="sponsored noopener" class="logo">
      <img src="/images/passionate_people.png" alt="Passionate People">
    </a>
    <a href="https://www.storyblok.com" target="_blank" rel="sponsored noopener" class="logo">
      <img src="/images/storyblok.png" alt="Storyblok">
    </a>
    <a href="https://ionicframework.com/vue?utm_source=partner&utm_medium=referral&utm_campaign=vuesponsorship&utm_content=vuedocs" target="_blank" rel="sponsored noopener" class="logo">
      <img src="/images/ionic.png" alt="Ionic">
    </a>
    <a href="https://nuxtjs.org/" target="_blank" rel="sponsored noopener" class="logo">
      <img src="/images/nuxt.png" alt="Nuxt">
    </a>
    </div>
  </div>
  <a class="become-backer" href="/support-vuejs">
    Become a Sponsor
  </a>
</div>

 -->


<div class="content api with-sidebar ">
  <p class="tip warning v3-warning">
    Welcome to yanliang's notes.
  </p>

  
    
      
<div id="ad">
  <script
    async
    type="text/javascript"
    src="//cdn.carbonads.com/carbon.js?serve=CEBDT27Y&placement=vuejsorg"
    id="_carbonads_js">
  </script>
</div>


    
  
  
    <h1>Mysql Êó•ÂøóÁõ∏ÂÖ≥</h1>
  
  
    <p>MySQL Innodb‰∏≠Ë∑üÊï∞ÊçÆÊåÅ‰πÖÊÄß„ÄÅ‰∏ÄËá¥ÊÄßÊúâÂÖ≥ÁöÑÊó•ÂøóÔºåÊúâ‰ª•‰∏ãÂá†ÁßçÔºö</p>
<ul>
<li>Bin Log:ÊòØmysqlÊúçÂä°Â±Ç‰∫ßÁîüÁöÑÊó•ÂøóÔºåÂ∏∏Áî®Êù•ËøõË°åÊï∞ÊçÆÊÅ¢Â§ç„ÄÅÊï∞ÊçÆÂ∫ìÂ§çÂà∂ÔºåÂ∏∏ËßÅÁöÑmysql‰∏ª‰ªéÊû∂ÊûÑÔºåÂ∞±ÊòØÈááÁî®slaveÂêåÊ≠•masterÁöÑbinlogÂÆûÁé∞ÁöÑ</li>
<li>Redo Log:ËÆ∞ÂΩï‰∫ÜÊï∞ÊçÆÊìç‰ΩúÂú®Áâ©ÁêÜÂ±ÇÈù¢ÁöÑ‰øÆÊîπÔºåmysql‰∏≠‰ΩøÁî®‰∫ÜÂ§ßÈáèÁºìÂ≠òÔºå‰øÆÊîπÊìç‰ΩúÊó∂‰ºöÁõ¥Êé•‰øÆÊîπÂÜÖÂ≠òÔºåËÄå‰∏çÊòØÁ´ãÂàª‰øÆÊîπÁ£ÅÁõòÔºå‰∫ãÂä°ËøõË°å‰∏≠Êó∂‰ºö‰∏çÊñ≠ÁöÑ‰∫ßÁîüredo logÔºåÂú®‰∫ãÂä°Êèê‰∫§Êó∂ËøõË°å‰∏ÄÊ¨°flushÊìç‰ΩúÔºå‰øùÂ≠òÂà∞Á£ÅÁõò‰∏≠„ÄÇÂΩìÊï∞ÊçÆÂ∫ìÊàñ‰∏ªÊú∫Â§±ÊïàÈáçÂêØÊó∂Ôºå‰ºöÊ†πÊçÆredo logËøõË°åÊï∞ÊçÆÁöÑÊÅ¢Â§çÔºåÂ¶ÇÊûúredo log‰∏≠Êúâ‰∫ãÂä°Êèê‰∫§ÔºåÂàôËøõË°å‰∫ãÂä°Êèê‰∫§‰øÆÊîπÊï∞ÊçÆ„ÄÇ</li>
<li>Undo Log: Èô§‰∫ÜËÆ∞ÂΩïredo logÂ§ñÔºåÂΩìËøõË°åÊï∞ÊçÆ‰øÆÊîπÊó∂Ëøò‰ºöËÆ∞ÂΩïundo logÔºåundo logÁî®‰∫éÊï∞ÊçÆÁöÑÊí§ÂõûÊìç‰ΩúÔºåÂÆÉËÆ∞ÂΩï‰∫Ü‰øÆÊîπÁöÑÂèçÂêëÊìç‰ΩúÔºåÊØîÂ¶ÇÔºåÊèíÂÖ•ÂØπÂ∫îÂà†Èô§Ôºå‰øÆÊîπÂØπÂ∫î‰øÆÊîπ‰∏∫ÂéüÊù•ÁöÑÊï∞ÊçÆÔºåÈÄöËøáundo logÂèØ‰ª•ÂÆûÁé∞‰∫ãÂä°ÂõûÊªöÔºåÂπ∂‰∏îÂèØ‰ª•Ê†πÊçÆundo logÂõûÊ∫ØÂà∞Êüê‰∏™ÁâπÂÆöÁöÑÁâàÊú¨ÁöÑÊï∞ÊçÆÔºåÂÆûÁé∞MVCC</li>
</ul>
<h2 id="Undo-log"><a href="#Undo-log" class="headerlink" title="Undo log"></a>Undo log</h2><p>ÈáçÂÅöÊó•ÂøóËÆ∞ÂΩï‰∫Ü‰∫ãÂä°ÁöÑË°å‰∏∫ÔºåÈÄöËøáÂÆÉÂèØ‰ª•ÂØπÊï∞ÊçÆÈ°µËøõË°åÈáçÂÅöÊìç‰Ωú„ÄÇ‰ΩÜÊòØ‰∫ãÂä°ÊúâÊó∂ËøòÈúÄË¶ÅËøõË°åÂõûÊªöÔºåËøôÊó∂Â∞±ÈúÄË¶ÅËÆ∞ÂΩïÂõûÊªöÂâçÁöÑÁä∂ÊÄÅÔºåÊØîÂ¶ÇÊèíÂÖ•‰∏ÄÊù°ËÆ∞ÂΩïÔºåÈÇ£‰πàËá≥Â∞ëË¶ÅÊääËøôÊù°ËÆ∞ÂΩïÁöÑ‰∏ªÈîÆÂÄºËÆ∞ÂΩï‰∏ãÊù•Ôºõ‰øÆÊîπ‰∏ÄÊù°ËÆ∞ÂΩïÔºåËá≥Â∞ëË¶ÅÊää‰øÆÊîπÂâçÁöÑÊóßÂÄºËÆ∞ÂΩï‰∏ãÊù•„ÄÇÂõ†Ê≠§Âú®ÂØπÊï∞ÊçÆÂ∫ìËøõË°å‰øÆÊîπÊó∂ÔºåInnoDB Â≠òÂÇ®ÂºïÊìé‰∏ç‰ΩÜ‰ºö‰∫ßÁîü redoÔºåËøò‰ºö‰∫ßÁîü‰∏ÄÂÆöÈáèÁöÑ undo„ÄÇËøôÊ†∑Â¶ÇÊûúÁî®Êà∑ÊâßË°åÁöÑ‰∫ãÂä°ÊàñËÄÖËØ≠Âè•Áî±‰∫éÊüêÁßçÂéüÂõ†Â§±Ë¥•‰∫ÜÔºåÂèàÊàñËÄÖÁî®Êà∑‰ΩøÁî® ROLLBACK ËØ≠Âè•ËØ∑Ê±ÇÂõûÊªöÔºåÂ∞±ÂèØ‰ª•Âà©Áî®Ëøô‰∫õ undo ‰ø°ÊÅØÂ∞ÜÊï∞ÊçÆÂõûÊªöÂà∞‰øÆÊîπ‰πãÂâçÁöÑÁä∂ÊÄÅ„ÄÇ</p>
<p><strong>Undo LogÔºö</strong>Êï∞ÊçÆÂ∫ì‰∫ãÂä°ÂºÄÂßã‰πãÂâçÔºå‰ºöÂ∞ÜË¶Å‰øÆÊîπÁöÑËÆ∞ÂΩïÂ≠òÊîæÂà∞ Undo Êó•ÂøóÈáåÔºåÂΩì‰∫ãÂä°ÂõûÊªöÊó∂ÊàñËÄÖÊï∞ÊçÆÂ∫ìÂ¥©Ê∫ÉÊó∂ÔºåÂèØ‰ª•Âà©Áî® Undo Êó•ÂøóÔºåÊí§ÈîÄÊú™Êèê‰∫§‰∫ãÂä°ÂØπÊï∞ÊçÆÂ∫ì‰∫ßÁîüÁöÑÂΩ±Âìç„ÄÇÔºàÊØèÊù°Êï∞ÊçÆÂèòÊõ¥(insert/update/delete)Êìç‰ΩúÈÉΩ‰º¥Èöè‰∏ÄÊù°undo logÁöÑÁîüÊàê,Âπ∂‰∏îÂõûÊªöÊó•ÂøóÂøÖÈ°ªÂÖà‰∫éÊï∞ÊçÆÊåÅ‰πÖÂåñÂà∞Á£ÅÁõò‰∏äÔºâ</p>
<p><strong>Undo Log‰∫ßÁîüÂíåÈîÄÊØÅÔºö</strong>Undo LogÂú®‰∫ãÂä°ÂºÄÂßãÂâç‰∫ßÁîüÔºõ‰∫ãÂä°Âú®Êèê‰∫§Êó∂ÔºåÂπ∂‰∏ç‰ºöÁ´ãÂàªÂà†Èô§undo logÔºåinnodb‰ºöÂ∞ÜËØ•‰∫ãÂä°ÂØπÂ∫îÁöÑundo logÊîæÂÖ•Âà∞Âà†Èô§ÂàóË°®‰∏≠ÔºåÂêéÈù¢‰ºöÈÄöËøáÂêéÂè∞Á∫øÁ®ãpurge threadËøõË°åÂõûÊî∂Â§ÑÁêÜ„ÄÇUndo LogÂ±û‰∫éÈÄªËæëÊó•ÂøóÔºåËÆ∞ÂΩï‰∏Ä‰∏™ÂèòÂåñËøáÁ®ã„ÄÇ</p>
<p>Undo LogÂ≠òÂÇ®Ôºöundo logÈááÁî®ÊÆµÁöÑÊñπÂºèÁÆ°ÁêÜÂíåËÆ∞ÂΩï„ÄÇÂú®innodbÊï∞ÊçÆÊñá‰ª∂‰∏≠ÂåÖÂê´‰∏ÄÁßçrollback segmentÂõûÊªöÊÆµÔºåÂÜÖÈÉ®ÂåÖÂê´1024‰∏™undo log segment„ÄÇÂèØ‰ª•ÈÄöËøá‰∏ãÈù¢‰∏ÄÁªÑÂèÇÊï∞Êù•ÊéßÂà∂Undo logÂ≠òÂÇ®„ÄÇ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show variables like &#39;%innodb_undo%&#39;;</span><br></pre></td></tr></table></figure>

<p><strong>Undo Log‰ΩúÁî®</strong> </p>
<ul>
<li><strong>‰∫ãÂä°ÂõûÊªöÔºö</strong>ÂÆûÁé∞‰∫ãÂä°ÁöÑÂéüÂ≠êÊÄß Undo Log ÊòØ‰∏∫‰∫ÜÂÆûÁé∞‰∫ãÂä°ÁöÑÂéüÂ≠êÊÄßËÄåÂá∫Áé∞ÁöÑ‰∫ßÁâ©„ÄÇ‰∫ãÂä°Â§ÑÁêÜËøáÁ®ã‰∏≠ÔºåÂ¶ÇÊûúÂá∫Áé∞‰∫ÜÈîôËØØÊàñËÄÖÁî®Êà∑ÊâßË°å‰∫Ü ROLLBACK ËØ≠Âè•ÔºåMySQL ÂèØ‰ª•Âà©Áî® Undo Log ‰∏≠ÁöÑÂ§á‰ªΩÂ∞ÜÊï∞ÊçÆÊÅ¢Â§çÂà∞‰∫ãÂä°ÂºÄÂßã‰πãÂâçÁöÑÁä∂ÊÄÅ„ÄÇ </li>
<li><strong>ÂÆûÁé∞Â§öÁâàÊú¨Âπ∂ÂèëÊéßÂà∂ÔºàMVCCÔºâ</strong> Undo Log Âú® MySQL InnoDB Â≠òÂÇ®ÂºïÊìé‰∏≠Áî®Êù•ÂÆûÁé∞Â§öÁâàÊú¨Âπ∂ÂèëÊéßÂà∂„ÄÇ‰∫ãÂä°Êú™Êèê‰∫§‰πãÂâçÔºåUndo Log ‰øùÂ≠ò‰∫ÜÊú™Êèê‰∫§‰πãÂâçÁöÑÁâàÊú¨Êï∞ÊçÆÔºåUndo Log ‰∏≠ÁöÑÊï∞ÊçÆÂèØ‰Ωú‰∏∫Êï∞ÊçÆÊóßÁâàÊú¨Âø´ÁÖß‰æõÂÖ∂‰ªñÂπ∂Âèë‰∫ãÂä°ËøõË°åÂø´ ÁÖßËØª„ÄÇ</li>
</ul>
<p><strong>PurgeÊ∏ÖÁêÜÊìç‰Ωú</strong></p>
<p><a target="_blank" rel="noopener" href="http://mysql.taobao.org/monthly/2015/04/01/">http://mysql.taobao.org/monthly/2015/04/01/</a></p>
<h2 id="Redo-Log"><a href="#Redo-Log" class="headerlink" title="Redo Log"></a>Redo Log</h2><p><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000023827696">https://segmentfault.com/a/1190000023827696</a></p>
<p>RedoÔºöÈ°æÂêçÊÄù‰πâÂ∞±ÊòØÈáçÂÅö„ÄÇ‰ª•ÊÅ¢Â§çÊìç‰Ωú‰∏∫ÁõÆÁöÑÔºåÂú®Êï∞ÊçÆÂ∫ìÂèëÁîüÊÑèÂ§ñÊó∂ÈáçÁé∞Êìç‰Ωú„ÄÇ ÔºàÁî®‰∫éÊï∞ÊçÆÂ∫ìÁöÑÂ¥©Ê∫ÉÊÅ¢Â§çÔºâ</p>
<p>Redo LogÔºöÊåá‰∫ãÂä°‰∏≠‰øÆÊîπÁöÑ‰ªª‰ΩïÊï∞ÊçÆÔºåÂ∞ÜÊúÄÊñ∞ÁöÑÊï∞ÊçÆÂ§á‰ªΩÂ≠òÂÇ®ÁöÑ‰ΩçÁΩÆÔºàRedo LogÔºâÔºåË¢´Áß∞‰∏∫ÈáçÂÅöÊó•Âøó„ÄÇ Áî®Êù•‰øùËØÅÊï∞ÊçÆÁöÑÊåÅ‰πÖÊÄß</p>
<p>redo log ÂåÖÊã¨‰∏§ÈÉ®ÂàÜÔºö‰∏Ä‰∏™ÊòØÂÜÖÂ≠ò‰∏≠ÁöÑÊó•ÂøóÁºìÂÜ≤( redo log buffer )ÔºåÂè¶‰∏Ä‰∏™ÊòØÁ£ÅÁõò‰∏äÁöÑÊó•ÂøóÊñá‰ª∂( redo log file )„ÄÇ mysql ÊØèÊâßË°å‰∏ÄÊù° DML ËØ≠Âè•ÔºåÂÖàÂ∞ÜËÆ∞ÂΩïÂÜôÂÖ• redo log buffer ÔºåÂêéÁª≠Êüê‰∏™Êó∂Èó¥ÁÇπÂÜç‰∏ÄÊ¨°ÊÄßÂ∞ÜÂ§ö‰∏™Êìç‰ΩúËÆ∞ÂΩïÂÜôÂà∞ redo log file „ÄÇËøôÁßç ÂÖàÂÜôÊó•ÂøóÔºåÂÜçÂÜôÁ£ÅÁõò ÁöÑÊäÄÊúØÂ∞±ÊòØ MySQLÈáåÁªèÂ∏∏ËØ¥Âà∞ÁöÑ WAL(Write-Ahead Logging) ÊäÄÊúØ„ÄÇ</p>
<p>Âú®ËÆ°ÁÆóÊú∫Êìç‰ΩúÁ≥ªÁªü‰∏≠ÔºåÁî®Êà∑Á©∫Èó¥( user space )‰∏ãÁöÑÁºìÂÜ≤Âå∫Êï∞ÊçÆ‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÊòØÊó†Ê≥ïÁõ¥Êé•ÂÜôÂÖ•Á£ÅÁõòÁöÑÔºå‰∏≠Èó¥ÂøÖÈ°ªÁªèËøáÊìç‰ΩúÁ≥ªÁªüÂÜÖÊ†∏Á©∫Èó¥( kernel space )ÁºìÂÜ≤Âå∫( OS Buffer )„ÄÇÂõ†Ê≠§Ôºå redo log buffer ÂÜôÂÖ• redo logfile ÂÆûÈôÖ‰∏äÊòØÂÖàÂÜôÂÖ• OS Buffer ÔºåÁÑ∂ÂêéÂÜçÈÄöËøáÁ≥ªÁªüË∞ÉÁî® fsync() Â∞ÜÂÖ∂Âà∑Âà∞ redo log file ‰∏≠ÔºåËøáÁ®ãÂ¶Ç‰∏ãÔºö</p>
<p><img src="../img/img/35.png"></p>
<p>mysql ÊîØÊåÅ‰∏âÁßçÂ∞Ü redo log buffer ÂÜôÂÖ• redo log file ÁöÑÊó∂Êú∫ÔºåÂèØ‰ª•ÈÄöËøá <code>innodb_flush_log_at_trx_commit </code> ÂèÇÊï∞ÈÖçÁΩÆÔºåÂêÑÂèÇÊï∞ÂÄºÂê´‰πâÂ¶Ç‰∏ãÔºö</p>
<table>
<thead>
<tr>
<th>ÂèÇÊï∞ÂÄº</th>
<th>Âê´‰πâ</th>
</tr>
</thead>
<tbody><tr>
<td>0ÔºàÂª∂ËøüÂÜôÔºâ</td>
<td>‰∫ãÂä°Êèê‰∫§Êó∂‰∏ç‰ºöÂ∞Ü <code>redo log buffer </code>‰∏≠Êó•ÂøóÂÜôÂÖ•Âà∞ <code>os buffer </code>ÔºåËÄåÊòØÊØèÁßíÂÜôÂÖ• <code>os buffer </code>Âπ∂Ë∞ÉÁî® <code>fsync() </code>ÂÜôÂÖ•Âà∞ <code>redo log file </code>‰∏≠„ÄÇ‰πüÂ∞±ÊòØËØ¥ËÆæÁΩÆ‰∏∫0Êó∂ÊòØ(Â§ßÁ∫¶)ÊØèÁßíÂà∑Êñ∞ÂÜôÂÖ•Âà∞Á£ÅÁõò‰∏≠ÁöÑÔºåÂΩìÁ≥ªÁªüÂ¥©Ê∫ÉÔºå‰ºö‰∏¢Â§±1ÁßíÈíüÁöÑÊï∞ÊçÆ„ÄÇ</td>
</tr>
<tr>
<td>1ÔºàÂÆûÊó∂ÂÜôÔºåÂÆûÊó∂Âà∑Ôºâ</td>
<td>‰∫ãÂä°ÊØèÊ¨°Êèê‰∫§ÈÉΩ‰ºöÂ∞Ü <code>redo log buffer </code>‰∏≠ÁöÑÊó•ÂøóÂÜôÂÖ• <code>os buffer </code>Âπ∂Ë∞ÉÁî® <code>fsync() </code>Âà∑Âà∞ <code>redo log file </code>‰∏≠„ÄÇËøôÁßçÊñπÂºèÂç≥‰ΩøÁ≥ªÁªüÂ¥©Ê∫É‰πü‰∏ç‰ºö‰∏¢Â§±‰ªª‰ΩïÊï∞ÊçÆÔºå‰ΩÜÊòØÂõ†‰∏∫ÊØèÊ¨°Êèê‰∫§ÈÉΩÂÜôÂÖ•Á£ÅÁõòÔºåIOÁöÑÊÄßËÉΩËæÉÂ∑Æ„ÄÇ</td>
</tr>
<tr>
<td>2ÔºàÂÆûÊó∂ÂÜôÔºåÂª∂ËøüÂà∑Ôºâ</td>
<td>ÊØèÊ¨°Êèê‰∫§ÈÉΩ‰ªÖÂÜôÂÖ•Âà∞ <code>os buffer </code>ÔºåÁÑ∂ÂêéÊòØÊØèÁßíË∞ÉÁî® <code>fsync() </code>Â∞Ü <code>os buffer </code>‰∏≠ÁöÑÊó•ÂøóÂÜôÂÖ•Âà∞ <code>redo log file </code>„ÄÇ</td>
</tr>
</tbody></table>
<p><img src="../img/img/36.png"></p>
<p>redo log ‰πüÂ∞±ÊòØÈáçÂÅöÊó•ÂøóÔºåÁî®Êù•ÂÆûÁé∞‰∫ãÂä°ÁöÑÊåÅ‰πÖÊÄßÔºåÂç≥ ACID ‰∏≠ÁöÑ D„ÄÇÊàë‰ª¨Áü•ÈÅì InnoDB Â≠òÂÇ®ÂºïÊìéÊòØ‰ª•È°µ‰∏∫Âçï‰ΩçÊù•ÁÆ°ÁêÜÂ≠òÂÇ®Á©∫Èó¥ÁöÑÔºåÊàë‰ª¨ÁöÑÂ¢ûÂà†ÊîπÊü•Á≠âÊìç‰ΩúÊú¨Ë¥®‰∏äÈÉΩÊòØÂú®ËÆøÈóÆÂíåÊìç‰ΩúÊï∞ÊçÆÈ°µÔºåËÄåÂú®ÁúüÊ≠£ËÆøÈóÆÊï∞ÊçÆÈ°µ‰πãÂâçÔºåÈúÄË¶ÅÂÖàÊääÁ£ÅÁõò‰∏äÁöÑÊï∞ÊçÆÈ°µËØªÂà∞ÂÜÖÂ≠ò‰∏≠ÔºåÂÖ∑‰ΩìÊù•ËØ¥ÊòØ Buffer Pool ‰∏≠„ÄÇ‰∏∫‰∫Ü‰øùËØÅÊåÅ‰πÖÊÄßÔºàÂ∞±ÊòØÂØπ‰∫é‰∏Ä‰∏™Â∑≤ÁªèÊèê‰∫§ÁöÑ‰∫ãÂä°ÔºåÂç≥‰ΩøÁ≥ªÁªüÂèëÁîü‰∫ÜÂ¥©Ê∫ÉÔºåËøô‰∏™‰∫ãÂä°ÂØπÊï∞ÊçÆÂ∫ìÊâÄÂÅöÁöÑÊõ¥Êîπ‰πü‰∏çËÉΩ‰∏¢Â§±ÔºâÔºåÈúÄË¶ÅÊääÂÜÖÂ≠ò‰∏≠ÁöÑ‰øÆÊîπÂêåÊ≠•ÂõûÁ£ÅÁõòÔºàfsyncÔºâÔºå‰∏Ä‰∏™ÁÆÄÂçïÁöÑÂÅöÊ≥ïÂ∞±ÊòØÂú®‰∫ãÂä°Êèê‰∫§‰πãÂâçÂ∞ÜËØ•‰∫ãÂä°ÊâÄ‰øÆÊîπÁöÑÊâÄÊúâÈ°µÈù¢ÈÉΩÂà∑Êñ∞Âà∞Á£ÅÁõòÔºå‰ΩÜÊòØËøô‰∏™ÁÆÄÂçïÁ≤óÊö¥ÁöÑÂÅöÊ≥ïÊúâÂá†‰∏™ÈóÆÈ¢ò„ÄÇ</p>
<ul>
<li>Âà∑Êñ∞‰∏Ä‰∏™ÂÆåÊï¥ÁöÑÊï∞ÊçÆÈ°µËøá‰∫éÊµ™Ë¥π„ÄÇÊúâÊó∂Êàë‰ª¨ÂèØËÉΩ‰ªÖ‰ªÖ‰øÆÊîπ‰∫ÜÊï∞ÊçÆÈ°µ‰∏≠ÁöÑ‰∏Ä‰∏™Â≠óËäÇÔºå‰ΩÜÊòØÂú®‰∫ãÂä°Êèê‰∫§‰πãÂâçÂç¥‰∏çÂæó‰∏çÂ∞Ü‰∏Ä‰∏™ÂÆåÊï¥ÁöÑÊï∞ÊçÆÈ°µ‰ªéÂÜÖÂ≠òÂà∑Êñ∞Âà∞Á£ÅÁõò„ÄÇ</li>
<li>ÈöèÊú∫ IO Âà∑Êñ∞ÊØîËæÉÊÖ¢„ÄÇ‰∏Ä‰∏™‰∫ãÂä°ÂèØËÉΩÂåÖÂê´Â§öÊù°ËØ≠Âè•ÔºåÂç≥‰ΩøÊòØ‰∏ÄÊù°ËØ≠Âè•‰πüÊúâÂèØËÉΩÈúÄË¶Å‰øÆÊîπÂ§ö‰∏™Êï∞ÊçÆÈ°µÔºåËÄå‰∏î‰øÆÊîπÁöÑËøô‰∫õÈ°µÈù¢‰πüÊúâÂèØËÉΩÂπ∂‰∏çÁõ∏ÈÇªÔºåËøôÂ∞±ÊÑèÂë≥ÁùÄÂ∞ÜÂÆÉ‰ª¨Âà∑Êñ∞Âà∞Á£ÅÁõòÊó∂ÔºåÈúÄË¶ÅËøõË°åÂæàÂ§öÈöèÊú∫ IOÔºåËÄåÈöèÊú∫ IO Ë¶ÅÊØîÈ°∫Â∫è IO ÊÖ¢ÂæàÂ§ö„ÄÇ</li>
</ul>
<p>ÂÖ∂ÂÆûÊàë‰ª¨Ê≤°ÊúâÂøÖË¶ÅÂú®ÊØèÊ¨°‰∫ãÂä°Êèê‰∫§Êó∂Â∞±ÊääÂÜÖÂ≠ò‰∏≠ÊâÄÊúâ‰øÆÊîπËøáÁöÑÈ°µÈù¢ÈÉΩÂà∑Êñ∞Âà∞Á£ÅÁõò‰∏äÔºåÊàë‰ª¨Âè™ÈúÄË¶ÅÊää‰øÆÊîπ‰∫ÜÂì™‰∫õ‰∏úË•øËÆ∞ÂΩï‰∏Ä‰∏ãÂç≥ÂèØ„ÄÇÊØîÊñπËØ¥Êüê‰∏™‰∫ãÂä°Â∞ÜÁ≥ªÁªüË°®Á©∫Èó¥ÁöÑÁ¨¨ 100 Âè∑È°µÈù¢‰∏≠ÁöÑÂÅèÁßªÈáè‰∏∫ 1000 ÁöÑÈÇ£‰∏™Â≠óËäÇÁöÑÂÄºÁî± 1 Êîπ‰∏∫‰∫Ü 2ÔºåÊàë‰ª¨Âè™ÈúÄË¶ÅËÆ∞ÂΩïËøô‰∏™Âç≥ÂèØ„ÄÇËøôÊ†∑Âç≥‰ΩøÁ≥ªÁªüÁ™ÅÁÑ∂Â¥©Ê∫É‰∫ÜÔºåÂú®ÈáçÂêØ‰πãÂêéÂè™Ë¶ÅÊåâÁÖß‰∏äËø∞ÂÜÖÂÆπÈáçÊñ∞Êõ¥Êñ∞‰∏Ä‰∏ãÊï∞ÊçÆÈ°µÔºåÁ≥ªÁªüÂ∞±ËÉΩÊÅ¢Â§çËØ•‰∫ãÂä°ÂØπÊï∞ÊçÆÂ∫ìÊâÄÂÅöÁöÑ‰øÆÊîπ„ÄÇ</p>
<h3 id="Êó¢ÁÑ∂redo-log‰πüÈúÄË¶ÅÂ≠òÂÇ®Ôºå‰πüÊ∂âÂèäÁ£ÅÁõòIO‰∏∫Âï•ËøòÁî®ÂÆÉÔºü"><a href="#Êó¢ÁÑ∂redo-log‰πüÈúÄË¶ÅÂ≠òÂÇ®Ôºå‰πüÊ∂âÂèäÁ£ÅÁõòIO‰∏∫Âï•ËøòÁî®ÂÆÉÔºü" class="headerlink" title="Êó¢ÁÑ∂redo log‰πüÈúÄË¶ÅÂ≠òÂÇ®Ôºå‰πüÊ∂âÂèäÁ£ÅÁõòIO‰∏∫Âï•ËøòÁî®ÂÆÉÔºü"></a>Êó¢ÁÑ∂redo log‰πüÈúÄË¶ÅÂ≠òÂÇ®Ôºå‰πüÊ∂âÂèäÁ£ÅÁõòIO‰∏∫Âï•ËøòÁî®ÂÆÉÔºü</h3><ul>
<li>redo Êó•ÂøóÊâÄÂç†Áî®ÁöÑÁ©∫Èó¥ÂæàÂ∞è„ÄÇÂ≠òÂÇ®Ë°®Á©∫Èó¥ÁöÑ ID„ÄÅÈ°µÂè∑„ÄÅÂÅèÁßªÈáè‰ª•ÂèäÈúÄË¶ÅÊõ¥Êñ∞ÁöÑÂÄºÔºåËøô‰∫õÂÜÖÂÆπÊâÄÈúÄË¶ÅÁöÑÂ≠òÂÇ®Á©∫Èó¥ÂæàÂ∞è„ÄÇÂêåÊó∂Âπ∂ÂèëÁöÑ‰∫ãÂä°ÂÖ±‰∫´ redo log Â≠òÂÇ®Á©∫Èó¥ÔºåÂÆÉ‰ª¨ÁöÑ redo log ÊåâÁÖßËØ≠Âè•ÁöÑÊâßË°åÈ°∫Â∫èÔºå‰æùÊ¨°‰∫§ÊõøÂú∞ËÆ∞ÂΩïÂú®‰∏ÄËµ∑Ôºå‰ª•ÂáèÂ∞ëÊó•ÂøóÂç†Áî®ÁöÑÁ©∫Èó¥„ÄÇ</li>
<li>redo Êó•ÂøóÂÖ∂ÂÆûÊòØ<strong>ÊâπÈáèÂÜôÂÖ•</strong>ÁöÑ„ÄÇ‰∫ãÂä°ÂØπÊï∞ÊçÆÈ°µÊâÄÂÅöÁöÑÊõ¥Êîπ‰∏ç‰ºöÁõ¥Êé•ÂÜôÂÖ•Êó•ÂøóÊñá‰ª∂ÔºåËÄåÊòØÂÖàÂÜôÂÖ• redo log bufferÔºåÁÑ∂ÂêéÂÜçÂ∞Ü buffer ‰∏≠ÁöÑÊï∞ÊçÆ‰ª•ÊØèÁßíÈíü‰∏ÄÊ¨°ÁöÑÈ¢ëÁéá‰∏ÄÂπ∂ÂÜôÂÖ•Êó•ÂøóÊñá‰ª∂‰∏≠„ÄÇ</li>
<li>ÂêåÊó∂ redo log Âè™ËøõË°å<strong>È°∫Â∫èËøΩÂä†</strong>ÁöÑÊìç‰ΩúÔºå‰πüÂ∞±ÊòØËØ¥ÂÆÉ‰ΩøÁî®ÁöÑÊòØ<strong>È°∫Â∫è IO</strong>ÔºåÂõ†Ê≠§ÊÄßËÉΩÊõ¥Â•Ω„ÄÇ</li>
<li>Âà∑ËÑèÊòØ‰ª•Êï∞ÊçÆÈ°µÔºàPageÔºâ‰∏∫Âçï‰ΩçÁöÑÔºåMySQLÈªòËÆ§È°µÂ§ßÂ∞èÊòØ16KBÔºå‰∏Ä‰∏™Page‰∏ä‰∏Ä‰∏™Â∞è‰øÆÊîπÈÉΩË¶ÅÊï¥È°µÂÜôÂÖ•ÔºõËÄåredo log‰∏≠Âè™ÂåÖÂê´ÁúüÊ≠£ÈúÄË¶ÅÂÜôÂÖ•ÁöÑÈÉ®ÂàÜÔºåÊó†ÊïàIOÂ§ßÂ§ßÂáèÂ∞ë„ÄÇ</li>
</ul>
<h2 id="Bin-log"><a href="#Bin-log" class="headerlink" title="Bin log"></a>Bin log</h2><p>binlog Áî®‰∫éËÆ∞ÂΩïÊï∞ÊçÆÂ∫ìÊâßË°åÁöÑÂÜôÂÖ•ÊÄßÊìç‰Ωú(‰∏çÂåÖÊã¨Êü•ËØ¢)‰ø°ÊÅØÔºå‰ª•‰∫åËøõÂà∂ÁöÑÂΩ¢Âºè‰øùÂ≠òÂú®Á£ÅÁõò‰∏≠„ÄÇ binlog ÊòØ mysql ÁöÑÈÄªËæëÊó•ÂøóÔºåÂπ∂‰∏îÁî± Server Â±ÇËøõË°åËÆ∞ÂΩïÔºå‰ΩøÁî®‰ªª‰ΩïÂ≠òÂÇ®ÂºïÊìéÁöÑ mysql Êï∞ÊçÆÂ∫ìÈÉΩ‰ºöËÆ∞ÂΩï binlog Êó•Âøó„ÄÇ</p>
<ul>
<li>ÈÄªËæëÊó•ÂøóÔºö ÂèØ‰ª•ÁÆÄÂçïÁêÜËß£‰∏∫ËÆ∞ÂΩïÁöÑÂ∞±ÊòØsqlËØ≠Âè• „ÄÇ</li>
<li>Áâ©ÁêÜÊó•ÂøóÔºö mysql Êï∞ÊçÆÊúÄÁªàÊòØ‰øùÂ≠òÂú®Êï∞ÊçÆÈ°µ‰∏≠ÁöÑÔºåÁâ©ÁêÜÊó•ÂøóËÆ∞ÂΩïÁöÑÂ∞±ÊòØÊï∞ÊçÆÈ°µÂèòÊõ¥ „ÄÇ</li>
</ul>
<p>binlog ÊòØÈÄöËøáËøΩÂä†ÁöÑÊñπÂºèËøõË°åÂÜôÂÖ•ÁöÑÔºåÂèØ‰ª•ÈÄöËøá max_binlog_size ÂèÇÊï∞ËÆæÁΩÆÊØè‰∏™ binlog Êñá‰ª∂ÁöÑÂ§ßÂ∞èÔºåÂΩìÊñá‰ª∂Â§ßÂ∞èËææÂà∞ÁªôÂÆöÂÄº‰πãÂêéÔºå‰ºöÁîüÊàêÊñ∞ÁöÑÊñá‰ª∂Êù•‰øùÂ≠òÊó•Âøó„ÄÇ</p>
<h3 id="‰ΩøÁî®Âú∫ÊôØ"><a href="#‰ΩøÁî®Âú∫ÊôØ" class="headerlink" title="‰ΩøÁî®Âú∫ÊôØ"></a>‰ΩøÁî®Âú∫ÊôØ</h3><p>Âú®ÂÆûÈôÖÂ∫îÁî®‰∏≠Ôºå binlog ÁöÑ‰∏ªË¶Å‰ΩøÁî®Âú∫ÊôØÊúâ‰∏§‰∏™ÔºåÂàÜÂà´ÊòØ <code>‰∏ª‰ªéÂ§çÂà∂</code> Âíå <code>Êï∞ÊçÆÊÅ¢Â§ç</code> „ÄÇ</p>
<ul>
<li>‰∏ª‰ªéÂ§çÂà∂ ÔºöÂú® Master Á´ØÂºÄÂêØ binlog ÔºåÁÑ∂ÂêéÂ∞Ü binlog ÂèëÈÄÅÂà∞ÂêÑ‰∏™ Slave Á´ØÔºå Slave Á´ØÈáçÊîæ binlog ‰ªéËÄåËææÂà∞‰∏ª‰ªéÊï∞ÊçÆ‰∏ÄËá¥„ÄÇ</li>
<li>Êï∞ÊçÆÊÅ¢Â§ç ÔºöÈÄöËøá‰ΩøÁî® mysqlbinlog Â∑•ÂÖ∑Êù•ÊÅ¢Â§çÊï∞ÊçÆ„ÄÇ</li>
</ul>
<h3 id="Âà∑ÁõòÊó∂Êú∫"><a href="#Âà∑ÁõòÊó∂Êú∫" class="headerlink" title="Âà∑ÁõòÊó∂Êú∫"></a>Âà∑ÁõòÊó∂Êú∫</h3><p>ÂØπ‰∫é InnoDB Â≠òÂÇ®ÂºïÊìéËÄåË®ÄÔºåÂè™ÊúâÂú®‰∫ãÂä°Êèê‰∫§Êó∂Êâç‰ºöËÆ∞ÂΩï biglog ÔºåÊ≠§Êó∂ËÆ∞ÂΩïËøòÂú®ÂÜÖÂ≠ò‰∏≠ÔºåÈÇ£‰πà biglog ÊòØ‰ªÄ‰πàÊó∂ÂÄôÂà∑Âà∞Á£ÅÁõò‰∏≠ÁöÑÂë¢Ôºü mysql ÈÄöËøá sync_binlog ÂèÇÊï∞ÊéßÂà∂ biglog ÁöÑÂà∑ÁõòÊó∂Êú∫ÔºåÂèñÂÄºËåÉÂõ¥ÊòØ 0-N</p>
<ul>
<li>0Ôºö‰∏çÂéªÂº∫Âà∂Ë¶ÅÊ±ÇÔºåÁî±Á≥ªÁªüËá™Ë°åÂà§Êñ≠‰ΩïÊó∂ÂÜôÂÖ•Á£ÅÁõòÔºõ</li>
<li>1ÔºöÊØèÊ¨° commit ÁöÑÊó∂ÂÄôÈÉΩË¶ÅÂ∞Ü binlog ÂÜôÂÖ•Á£ÅÁõòÔºõ</li>
<li>NÔºöÊØèN‰∏™‰∫ãÂä°ÔºåÊâç‰ºöÂ∞Ü binlog ÂÜôÂÖ•Á£ÅÁõò„ÄÇ</li>
</ul>
<p>‰ªé‰∏äÈù¢ÂèØ‰ª•ÁúãÂá∫Ôºå sync_binlog ÊúÄÂÆâÂÖ®ÁöÑÊòØËÆæÁΩÆÊòØ 1 ÔºåËøô‰πüÊòØ MySQL 5.7.7 ‰πãÂêéÁâàÊú¨ÁöÑÈªòËÆ§ÂÄº„ÄÇ‰ΩÜÊòØËÆæÁΩÆ‰∏Ä‰∏™Â§ß‰∏Ä‰∫õÁöÑÂÄºÂèØ‰ª•ÊèêÂçáÊï∞ÊçÆÂ∫ìÊÄßËÉΩÔºåÂõ†Ê≠§ÂÆûÈôÖÊÉÖÂÜµ‰∏ã‰πüÂèØ‰ª•Â∞ÜÂÄºÈÄÇÂΩìË∞ÉÂ§ßÔºåÁâ∫Áâ≤‰∏ÄÂÆöÁöÑ‰∏ÄËá¥ÊÄßÊù•Ëé∑ÂèñÊõ¥Â•ΩÁöÑÊÄßËÉΩ„ÄÇ</p>
<h3 id="binlog-Êó•ÂøóÊ†ºÂºè"><a href="#binlog-Êó•ÂøóÊ†ºÂºè" class="headerlink" title="binlog Êó•ÂøóÊ†ºÂºè"></a>binlog Êó•ÂøóÊ†ºÂºè</h3><p>binlog Êó•ÂøóÊúâ‰∏âÁßçÊ†ºÂºèÔºåÂàÜÂà´‰∏∫ STATMENT „ÄÅ ROW Âíå MIXED „ÄÇ</p>
<p>Âú® MySQL 5.7.7 ‰πãÂâçÔºåÈªòËÆ§ÁöÑÊ†ºÂºèÊòØ STATEMENT Ôºå MySQL 5.7.7 ‰πãÂêéÔºåÈªòËÆ§ÂÄºÊòØ ROW „ÄÇÊó•ÂøóÊ†ºÂºèÈÄöËøá binlog-format ÊåáÂÆö„ÄÇ</p>
<p>STATMENT Ôºö Âü∫‰∫é SQL ËØ≠Âè•ÁöÑÂ§çÂà∂( statement-based replication, SBR )ÔºåÊØè‰∏ÄÊù°‰ºö‰øÆÊîπÊï∞ÊçÆÁöÑsqlËØ≠Âè•‰ºöËÆ∞ÂΩïÂà∞ binlog ‰∏≠ „ÄÇ</p>
<ul>
<li>‰ºòÁÇπÔºö ‰∏çÈúÄË¶ÅËÆ∞ÂΩïÊØè‰∏ÄË°åÁöÑÂèòÂåñÔºåÂáèÂ∞ë‰∫Ü<code>binlog</code> Êó•ÂøóÈáèÔºåËäÇÁ∫¶‰∫Ü <code>IO</code> , ‰ªéËÄåÊèêÈ´ò‰∫ÜÊÄßËÉΩÔºõ </li>
<li>Áº∫ÁÇπÔºö Âú®Êüê‰∫õÊÉÖÂÜµ‰∏ã‰ºöÂØºËá¥‰∏ª‰ªéÊï∞ÊçÆ‰∏ç‰∏ÄËá¥ÔºåÊØîÂ¶ÇÊâßË°å<code>sysdate()</code> „ÄÅ <code>slepp()</code> Á≠â „ÄÇ </li>
</ul>
<p>ROW Ôºö Âü∫‰∫éË°åÁöÑÂ§çÂà∂( row-based replication, RBR )Ôºå‰∏çËÆ∞ÂΩïÊØèÊù°sqlËØ≠Âè•ÁöÑ‰∏ä‰∏ãÊñá‰ø°ÊÅØÔºå‰ªÖÈúÄËÆ∞ÂΩïÂì™Êù°Êï∞ÊçÆË¢´‰øÆÊîπ‰∫Ü „ÄÇ</p>
<ul>
<li>‰ºòÁÇπÔºö ‰∏ç‰ºöÂá∫Áé∞Êüê‰∫õÁâπÂÆöÊÉÖÂÜµ‰∏ãÁöÑÂ≠òÂÇ®ËøáÁ®ã„ÄÅÊàñfunction„ÄÅÊàñtriggerÁöÑË∞ÉÁî®ÂíåËß¶ÂèëÊó†Ê≥ïË¢´Ê≠£Á°ÆÂ§çÂà∂ÁöÑÈóÆÈ¢ò Ôºõ</li>
<li>Áº∫ÁÇπÔºö ‰ºö‰∫ßÁîüÂ§ßÈáèÁöÑÊó•ÂøóÔºåÂ∞§ÂÖ∂ÊòØ alter table ÁöÑÊó∂ÂÄô‰ºöËÆ©Êó•ÂøóÊö¥Ê∂®</li>
</ul>
<p>MIXED Ôºö Âü∫‰∫é STATMENT Âíå ROW ‰∏§ÁßçÊ®°ÂºèÁöÑÊ∑∑ÂêàÂ§çÂà∂( mixed-based replication, MBR )Ôºå‰∏ÄËà¨ÁöÑÂ§çÂà∂‰ΩøÁî® STATEMENT Ê®°Âºè‰øùÂ≠ò binlog ÔºåÂØπ‰∫é STATEMENT Ê®°ÂºèÊó†Ê≥ïÂ§çÂà∂ÁöÑÊìç‰Ωú‰ΩøÁî® ROW Ê®°Âºè‰øùÂ≠ò binlog</p>
<h2 id="Checkpoint-Êú∫Âà∂"><a href="#Checkpoint-Êú∫Âà∂" class="headerlink" title="Checkpoint Êú∫Âà∂"></a>Checkpoint Êú∫Âà∂</h2><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/chenpingzhao/p/5107480.html">https://www.cnblogs.com/chenpingzhao/p/5107480.html</a></p>
<h3 id="Âá∫Áé∞ÁöÑÂéüÂõ†"><a href="#Âá∫Áé∞ÁöÑÂéüÂõ†" class="headerlink" title="Âá∫Áé∞ÁöÑÂéüÂõ†"></a>Âá∫Áé∞ÁöÑÂéüÂõ†</h3><p>Mysql‰∏≠ÔºåÁî®Êà∑ÁöÑ‰øÆÊîπÊìç‰Ωú‰ºöÂØºËá¥innoDBÁºìÂÜ≤Ê±†Âá∫Áé∞ËÑèÈ°µÔºåÂ¶ÇÊûúËØ¥ÊØèÊ¨°‰øÆÊîπÈÉΩÈúÄË¶ÅÂ∞ÜËÑèÈ°µÂà∑Êñ∞Âà∞Á£ÅÁõòÁöÑËØùÔºåÈÇ£‰πàËøô‰∏™ÂºÄÈîÄÊòØÈùûÂ∏∏Â§ßÁöÑ„ÄÇ</p>
<p>ËøòÊúâ‰∏ÄÁÇπÔºåÂ¶ÇÊûúÂ∞ÜËÑèÈ°µÂà∑Êñ∞Âà∞Á£ÅÁõòÊó∂ÂèëÁîü‰∫ÜÂÆïÊú∫ÔºåÈÇ£‰πàËøô‰∏™Êï∞ÊçÆÂ∞±Êó†Ê≥ïÊÅ¢Â§ç‰∫ÜÔºåÂõ†Ê≠§innoDBÈááÁî®‰∫ÜWrite Ahead LogÁ≠ñÁï•Ôºå‰∫ãÂä°Êèê‰∫§Êó∂ÔºåÂÖàËÆ∞ÂΩïÂà∞redo logÔºåÂÜç‰øÆÊîπÈ°µÔºå‰øÆÊîπÂÆå‰ºöÂÖàÁºìÂ≠òÂà∞innoDBÁºìÂÜ≤Ê±†‰∏≠ÔºåÈÄöËøáÂêéÂè∞Á∫øÁ®ãÂéªÁªü‰∏ÄÂà∑Êñ∞„ÄÇËøôÊ†∑Êó¢ËÉΩ‰øùËØÅÊï∞ÊçÆÂÆâÂÖ®ÔºåÂèàËÉΩÂæàÂ§ßÊèêÂçáÊÄßËÉΩ„ÄÇ</p>
<p>‰ΩÜÊòØÔºåÂ¶ÇÊûúredo logÊó†ÈôêÂ¢ûÂ§ßÔºàÂÅáËÆæÊï∞ÊçÆÂ∫ìÂ∑≤ÁªèËøêË°å‰∫ÜÂ•ΩÂá†Âπ¥ÁöÑÊó∂Èó¥ÔºâÔºåÁºìÂÜ≤Ê±†È°µÊó†ÈôêÂ§ßÔºåÈÇ£‰πàÂÆïÊú∫ÁöÑÊó∂ÂÄôÈÄöËøáÊï¥‰∏™redo logÊù•ÊÅ¢Â§çÊï∞ÊçÆÔºåËøôÊó∂Êï¥‰∏™redo logÈáçÊîæÊÅ¢Â§çÁöÑÊó∂Èó¥Â∞Ü‰ºöÈùûÂ∏∏‰πÖ„ÄÇ</p>
<p>CheckpointÔºàÊ£ÄÊü•ÁÇπÔºâÊäÄÊúØÂ∞±Êù•Ëß£ÂÜ≥‰ª•‰∏äÈóÆÈ¢òÁöÑ„ÄÇ</p>
<h3 id="Ëß£ÂÜ≥ÁöÑÈóÆÈ¢ò"><a href="#Ëß£ÂÜ≥ÁöÑÈóÆÈ¢ò" class="headerlink" title="Ëß£ÂÜ≥ÁöÑÈóÆÈ¢ò"></a>Ëß£ÂÜ≥ÁöÑÈóÆÈ¢ò</h3><ul>
<li><strong>Áº©Áü≠Êï∞ÊçÆÂ∫ìÊÅ¢Â§çÁöÑÊó∂Èó¥</strong></li>
</ul>
<p>ÂΩìÊï∞ÊçÆÂ∫ìÂèëÁîüÂÆïÊú∫Êó∂Ôºå‰∏çÈúÄË¶ÅÈáçÊîæÊï¥‰∏™redo logÔºåÂè™ÈúÄË¶ÅÈáçÊîæCheckpoint‰πãÂêéÁöÑredo logÔºåËøôÊ†∑Â∞±ÂèØ‰ª•Â§ßÂ§ßÁº©Áü≠ÊÅ¢Â§çÊó∂Èó¥Ôºõ</p>
<ul>
<li><strong>ÁºìÂÜ≤Ê±†‰∏çÂ§üÁî®ÔºåÂ∞ÜËÑèÈ°µÂà∑Êñ∞Âà∞Á£ÅÁõò</strong></li>
</ul>
<p>ÁºìÂÜ≤Ê±†‰∏çÂ§üÁî®Êó∂ÔºåÊ†πÊçÆLRUÁÆóÊ≥ï‰ºöÊ∑òÊ±∞ÊéâÊúÄËøëÊúÄÂ∞ë‰ΩøÁî®ÁöÑÈ°µÔºåÂ¶ÇÊûúËØ•È°µÊòØËÑèÈ°µÁöÑËØùÔºå‰ºöÂº∫Âà∂ÊâßË°åCheckPointÔºåÂ∞ÜËØ•ËÑèÈ°µÂà∑ÂõûÁ£ÅÁõòÔºõ</p>
<ul>
<li><strong>redo log‰∏çÂèØÁî®Êó∂ÔºåÂ∞ÜËÑèÈ°µÂà∑Êñ∞Âà∞Á£ÅÁõò</strong></li>
</ul>
<p>Áî±‰∫éÈáçÂÅöÊó•Âøó‰∏çÂèØËÉΩÊó†ÈôêÂ§ßÔºåinnoDBÈáçÂÅöÊó•ÂøóÁöÑËÆæËÆ°ÊåâÁÖßÂæ™ÁéØ‰ΩøÁî®ËßÑÂàôÔºåÂ∑≤Áªè‰∏çÂÜçÈúÄË¶ÅÁöÑÊó•ÂøóÂèØ‰ª•Ë¢´Ë¶ÜÁõñ„ÄÇÂõ†Ê≠§Â¶ÇÊûúÈáçÂÅöÊó•ÂøóÁªèËøá‰∏ÄÂúàÂÜôÂà∞ÂΩìÂâçCheckpointÁöÑ‰ΩçÁΩÆÔºåÂØºËá¥redo log‰∏çÂèØÁî®ÔºåÂ∞ÜÂº∫Âà∂ÊâßË°åCheckPointÔºåÂ∞ÜÁºìÂÜ≤Ê±†ÁöÑÈ°µËá≥Â∞ëÂà∑Êñ∞Âà∞ÂΩìÂâçÈáçÂÅöÊó•ÂøóÁöÑ‰ΩçÁΩÆ„ÄÇ</p>
<h3 id="ÂéüÁêÜ"><a href="#ÂéüÁêÜ" class="headerlink" title="ÂéüÁêÜ"></a>ÂéüÁêÜ</h3><p>ÂΩìÊï∞ÊçÆÂ∫ìÂèëÁîüÂÆïÊú∫Êó∂ÔºåÊï∞ÊçÆÂ∫ì‰∏çÈúÄË¶ÅÈáçÂÅöÊâÄÊúâÁöÑÊó•ÂøóÔºåÂõ†‰∏∫Checkpoint‰πãÂâçÁöÑÈ°µÈÉΩÂ∑≤ÁªèÂà∑Êñ∞ÂõûÁ£ÅÁõò„ÄÇÊï∞ÊçÆÂ∫ìÂè™ÈúÄÂØπCheckpointÂêéÁöÑÈáçÂÅöÊó•ÂøóËøõË°åÊÅ¢Â§çÔºåËøôÊ†∑Â∞±Â§ßÂ§ßÁº©Áü≠‰∫ÜÊÅ¢Â§çÁöÑÊó∂Èó¥„ÄÇ</p>
<p>ÂΩìÁºìÂÜ≤Ê±†‰∏çÂ§üÁî®Êó∂ÔºåÊ†πÊçÆLRUÁÆóÊ≥ï‰ºöÊ∫¢Âá∫ÊúÄËøëÊúÄÂ∞ë‰ΩøÁî®ÁöÑÈ°µÔºåËã•Ê≠§È°µ‰∏∫ËÑèÈ°µÔºåÈÇ£‰πàÈúÄË¶ÅÂº∫Âà∂ÊâßË°åCheckpointÔºåÂ∞ÜËÑèÈ°µ‰πüÂ∞±ÊòØÈ°µÁöÑÊñ∞ÁâàÊú¨Âà∑ÂõûÁ£ÅÁõò„ÄÇ</p>
<p>ÂΩìÈáçÂÅöÊó•ÂøóÂá∫Áé∞‰∏çÂèØÁî®Êó∂ÔºåÂõ†‰∏∫ÂΩìÂâç‰∫ãÂä°Êï∞ÊçÆÂ∫ìÁ≥ªÁªüÂØπÈáçÂÅöÊó•ÂøóÁöÑËÆæËÆ°ÈÉΩÊòØÂæ™ÁéØ‰ΩøÁî®ÁöÑÔºåÂπ∂‰∏çÊòØËÆ©ÂÖ∂Êó†ÈôêÂ¢ûÂ§ßÁöÑÔºåÈáçÂÅöÊó•ÂøóÂèØ‰ª•Ë¢´ÈáçÁî®ÁöÑÈÉ®ÂàÜÊòØÊåáËøô‰∫õÈáçÂÅöÊó•ÂøóÂ∑≤Áªè‰∏çÂÜçÈúÄË¶ÅÔºåÂΩìÊï∞ÊçÆÂ∫ìÂèëÁîüÂÆïÊú∫Êó∂ÔºåÊï∞ÊçÆÂ∫ìÊÅ¢Â§çÊìç‰Ωú‰∏çÈúÄË¶ÅËøôÈÉ®ÂàÜÁöÑÈáçÂÅöÊó•ÂøóÔºåÂõ†Ê≠§ËøôÈÉ®ÂàÜÂ∞±ÂèØ‰ª•Ë¢´Ë¶ÜÁõñÈáçÁî®„ÄÇÂ¶ÇÊûúÈáçÂÅöÊó•ÂøóËøòÈúÄË¶Å‰ΩøÁî®ÔºåÈÇ£‰πàÂøÖÈ°ªÂº∫Âà∂CheckpointÔºåÂ∞ÜÁºìÂÜ≤Ê±†‰∏≠ÁöÑÈ°µËá≥Â∞ëÂà∑Êñ∞Âà∞ÂΩìÂâçÈáçÂÅöÊó•ÂøóÁöÑ‰ΩçÁΩÆ„ÄÇ</p>
<p>InnoDBÂ≠òÂÇ®ÂºïÊìéÊòØÈÄöËøá<code>LSN</code>ÔºàLog Sequnce NumberÔºâÊù•Ê†áËÆ∞ÁâàÊú¨ÁöÑ„ÄÇLSNÊòØ8‰∏™Â≠óËäÇÁöÑÊï¥ÂΩ¢ÔºåÊØè‰∏™È°µÊúâLSNÔºàÈáçÂÅöÊó•ÂøóÊúâLSNÔºåCheckpoint‰πüÊúâLSNÔºâ„ÄÇÂèØ‰ª•ÈÄöËøáÂëΩ‰ª§SHOW ENGINE INNODB STATUSÊù•ËßÇÂØüÔºö</p>
<p>CheckpointÂèëÁîüÁöÑÊó∂Èó¥„ÄÅÊù°‰ª∂ÂèäËÑèÈ°µÁöÑÈÄâÊã©Á≠âÈÉΩÈùûÂ∏∏Â§çÊùÇ„ÄÇËÄåCheckpointÊâÄÂÅöÁöÑ‰∫ãÊÉÖÊó†Â§ñ‰πéÊòØÂ∞ÜÁºìÂÜ≤Ê±†‰∏≠ÁöÑËÑèÈ°µÂà∑ÂõûÂà∞Á£ÅÁõòÔºå‰∏çÂêå‰πãÂ§ÑÂú®‰∫éÊØèÊ¨°Âà∑Êñ∞Â§öÂ∞ëÈ°µÂà∞Á£ÅÁõòÔºåÊØèÊ¨°‰ªéÂì™ÈáåÂèñËÑèÈ°µÔºå‰ª•Âèä‰ªÄ‰πàÊó∂Èó¥Ëß¶ÂèëCheckpoint„ÄÇ</p>
<h3 id="ÂàÜÁ±ª"><a href="#ÂàÜÁ±ª" class="headerlink" title="ÂàÜÁ±ª"></a>ÂàÜÁ±ª</h3><p>Âú®InnoDBÂ≠òÂÇ®ÂºïÊìéÂÜÖÈÉ®ÔºåÊúâ‰∏§ÁßçCheckpointÔºåÂàÜÂà´‰∏∫ÔºöSharp Checkpoint„ÄÅFuzzy Checkpoint</p>
<p>Sharp Checkpoint ÂèëÁîüÂú®Êï∞ÊçÆÂ∫ìÂÖ≥Èó≠Êó∂Â∞ÜÊâÄÊúâÁöÑËÑèÈ°µÈÉΩÂà∑Êñ∞ÂõûÁ£ÅÁõòÔºàinnodb_fast_shutdown=1Ôºâ„ÄÇ‰ΩÜÊòØËã•Êï∞ÊçÆÂ∫ìÂú®ËøêË°åÊó∂‰πü‰ΩøÁî®Sharp CheckpointÔºåÈÇ£‰πàÊï∞ÊçÆÂ∫ìÁöÑÂèØÁî®ÊÄßÂ∞±‰ºöÂèóÂà∞ÂæàÂ§ßÁöÑÂΩ±Âìç„ÄÇÊïÖÂú®InnoDBÂ≠òÂÇ®ÂºïÊìéÂÜÖÈÉ®‰ΩøÁî®Fuzzy CheckpointËøõË°åÈ°µÁöÑÂà∑Êñ∞ÔºåÂç≥Âè™Âà∑Êñ∞‰∏ÄÈÉ®ÂàÜËÑèÈ°µÔºåËÄå‰∏çÊòØÂà∑Êñ∞ÊâÄÊúâÁöÑËÑèÈ°µÂõûÁ£ÅÁõò„ÄÇ</p>
<ul>
<li>Sharp CheckpointÔºöÂèëÁîüÂú®Êï∞ÊçÆÂ∫ìÂÖ≥Èó≠Êó∂Â∞ÜÊâÄÊúâÁöÑËÑèÈ°µÈÉΩÂà∑Êñ∞ÂõûÁ£ÅÁõòÔºåÂ¶ÇÊûúÊ≠§Êó∂Êï∞ÊçÆÂ∫ìËÑèÈ°µÈùûÂ∏∏Â§öÔºåÂàô‰ºöÂæàÂ§ßÂΩ±ÂìçÊÄßËÉΩÔºõ</li>
<li>Fuzzy CheckpointÔºöÈªòËÆ§ÊñπÂºèÔºåÂè™Âà∑Êñ∞‰∏ÄÈÉ®ÂàÜËÑèÈ°µÔºå‰∏çÊòØÂà∑Êñ∞ÊâÄÊúâËÑèÈ°µÔºõ‰∏ªË¶ÅÊúâ‰ª•‰∏ãÂá†ÁßçÊÉÖÂÜµÔºö<ul>
<li>Master Thread CheckpointÔºöÊØèÁßíÊàñËÄÖ10ÁßíÁöÑÈ¢ëÁéáÂºÇÊ≠•Âà∑Êñ∞ÁºìÂÜ≤Ê±†ÁöÑËÑèÈ°µÂà∞Á£ÅÁõò„ÄÇÔºàÁî±Page Cleaner ThreadÂÆåÊàêÔºâ</li>
<li>FLUSH_LRU_LIST CheckpointÔºöÁºìÂÜ≤Ê±†‰∏çÂ§üÁî®Êó∂ÔºåÊ†πÊçÆLRUÁÆóÊ≥ï‰ºöÊ∑òÊ±∞ÊéâÊúÄËøëÊúÄÂ∞ë‰ΩøÁî®ÁöÑÈ°µÔºåÂ¶ÇÊûúËØ•È°µÊòØËÑèÈ°µÁöÑËØùÔºå‰ºöÂº∫Âà∂ÊâßË°åCheckPointÔºåÂ∞ÜËØ•ËÑèÈ°µÂà∑ÂõûÁ£ÅÁõòÔºàÁî±Page Cleaner ThreadÂÆåÊàêÔºâÔºõ</li>
<li>Async/Sync Flush CheckpointÔºöÈáçÂÅöÊó•Âøó‰∏çÂèØÁî®ÁöÑÊÉÖÂÜµÔºåÈúÄË¶ÅÂº∫Âà∂‰ªéËÑèÈ°µÂàóË°®‰∏≠ÈÄâÂèñ‰∏Ä‰∫õËÑèÈ°µÂà∑Êñ∞Á£ÅÁõòÂà∞ÁºìÂ≠òÔºàÁî±Page Cleaner ThreadÂÆåÊàêÔºâ„ÄÇ</li>
<li>Dirty Page too much CheckpointÔºöÂç≥ËÑèÈ°µÊï∞ÈáèÂ§™Â§öÔºåÂØºËá¥Âº∫Âà∂ËøõË°åCheckpoint„ÄÇÁî±ÂèÇÊï∞<code>innodb_max_dirty_pages_pt</code>Êù•ÊéßÂà∂ÔºåÈªòËÆ§75ÔºàÂç≥75%Ôºâ„ÄÇÂΩìËÑèÈ°µÊï∞ÈáèÂç†ÊçÆ75%ÁºìÂÜ≤Ê±†Êó∂ÔºåÂà∑Êñ∞‰∏ÄÈÉ®ÂàÜËÑèÈ°µÂà∞Á£ÅÁõò„ÄÇÔºâ</li>
</ul>
</li>
</ul>
<h2 id="ÊÖ¢Êü•ËØ¢Êó•Âøó"><a href="#ÊÖ¢Êü•ËØ¢Êó•Âøó" class="headerlink" title="ÊÖ¢Êü•ËØ¢Êó•Âøó"></a>ÊÖ¢Êü•ËØ¢Êó•Âøó</h2><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/58011817">https://zhuanlan.zhihu.com/p/58011817</a></p>
<p> MySQLÁöÑÊÖ¢Êü•ËØ¢Êó•ÂøóÊòØMySQLÊèê‰æõÁöÑ‰∏ÄÁßçÊó•ÂøóËÆ∞ÂΩïÔºåÂÆÉÁî®Êù•ËÆ∞ÂΩïÂú®MySQL‰∏≠ÂìçÂ∫îÊó∂Èó¥Ë∂ÖËøáÈòÄÂÄºÁöÑËØ≠Âè•ÔºåÂÖ∑‰ΩìÊåáËøêË°åÊó∂Èó¥Ë∂ÖËøálong_query_timeÂÄºÁöÑSQLÔºåÂàô‰ºöË¢´ËÆ∞ÂΩïÂà∞ÊÖ¢Êü•ËØ¢Êó•Âøó‰∏≠„ÄÇlong_query_timeÁöÑÈªòËÆ§ÂÄº‰∏∫10ÔºåÊÑèÊÄùÊòØËøêË°å10S‰ª•‰∏äÁöÑËØ≠Âè•„ÄÇÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåMysqlÊï∞ÊçÆÂ∫ìÂπ∂‰∏çÂêØÂä®ÊÖ¢Êü•ËØ¢Êó•ÂøóÔºåÈúÄË¶ÅÊàë‰ª¨ÊâãÂä®Êù•ËÆæÁΩÆËøô‰∏™ÂèÇÊï∞ÔºåÂΩìÁÑ∂ÔºåÂ¶ÇÊûú‰∏çÊòØË∞É‰ºòÈúÄË¶ÅÁöÑËØùÔºå‰∏ÄËà¨‰∏çÂª∫ËÆÆÂêØÂä®ËØ•ÂèÇÊï∞ÔºåÂõ†‰∏∫ÂºÄÂêØÊÖ¢Êü•ËØ¢Êó•Âøó‰ºöÊàñÂ§öÊàñÂ∞ëÂ∏¶Êù•‰∏ÄÂÆöÁöÑÊÄßËÉΩÂΩ±Âìç„ÄÇÊÖ¢Êü•ËØ¢Êó•ÂøóÊîØÊåÅÂ∞ÜÊó•ÂøóËÆ∞ÂΩïÂÜôÂÖ•Êñá‰ª∂Ôºå‰πüÊîØÊåÅÂ∞ÜÊó•ÂøóËÆ∞ÂΩïÂÜôÂÖ•Êï∞ÊçÆÂ∫ìË°®„ÄÇ</p>
<h3 id="Mysql-‰ªÄ‰πàÊÉÖÂÜµ‰ºöÈÄ†ÊàêÊÖ¢Êü•"><a href="#Mysql-‰ªÄ‰πàÊÉÖÂÜµ‰ºöÈÄ†ÊàêÊÖ¢Êü•" class="headerlink" title="Mysql ‰ªÄ‰πàÊÉÖÂÜµ‰ºöÈÄ†ÊàêÊÖ¢Êü•"></a>Mysql ‰ªÄ‰πàÊÉÖÂÜµ‰ºöÈÄ†ÊàêÊÖ¢Êü•</h3><ul>
<li>ÁΩëÁªúÔºåÂêÑ‰∏™ËäÇÁÇπ‰πãÈó¥ÁöÑÁΩëÁªú</li>
<li>OSÁ≥ªÁªü ÔºåÂç≥Êï∞ÊçÆÂ∫ìÊúçÂä°Âô®</li>
<li>MySQLÊï∞ÊçÆÂ∫ìÊú¨Ë∫´</li>
</ul>
<ol>
<li>ÁΩëÁªúÂ±ÇÈù¢<ol>
<li>ÁΩëÁªú‰∏¢ÂåÖÔºåÈáç‰º†</li>
<li>ÁΩëÂç°Êª°ÔºåÊØîÂ¶ÇÂ§ßÂ≠óÊÆµ</li>
<li>ÁΩëÁªúÈìæË∑ØÈïø</li>
</ol>
</li>
<li>ÂèóIOÂΩ±Âìç<ol>
<li>Á£ÅÁõòioË¢´ÂÖ∂‰ªñ‰ªªÂä°Âç†Áî®</li>
<li>RAID Âç° ÂÖÖÊîæÁîµÔºåÈáçÁΩÆ</li>
<li>ioË∞ÉÂ∫¶ÁÆóÊ≥ï</li>
</ol>
</li>
<li>cpu Á±ªÂûã</li>
<li>Êï∞ÊçÆÂ∫ìÂ±ÇÈù¢<ol>
<li><strong>Ê≤°ÊúâÁ¥¢ÂºïÔºåÊàñËÄÖÁ¥¢Âºï‰ΩøÁî®‰∏çÊ≠£Á°Æ</strong></li>
<li>ÈöêÂºèËΩ¨Êç¢</li>
<li>ÊâßË°åËÆ°ÂàíÈîôËØØ</li>
<li><strong>Êï∞ÊçÆÈáèÂ§ß</strong></li>
<li>MetaData Lock ÈîÅÁ≠âÂæÖ</li>
<li>Âπ∂ÂèëÊõ¥Êñ∞Âêå‰∏ÄË°åËÆ∞ÂΩï</li>
<li><strong>Êï∞ÊçÆÂàÜÂ∏É‰∏çÂùáÂåÄ</strong></li>
<li>sqlÂßøÂäø‰∏çÂêàÁêÜ</li>
<li>Ë°®ÁªìÊûÑËÆæËÆ°ÈóÆÈ¢ò</li>
<li><strong>innodb Âà∑ËÑèÈ°µ</strong></li>
<li>undo Ê≤°ÊúâË¢´purgeÂõûÊî∂</li>
</ol>
</li>
</ol>
<p><a target="_blank" rel="noopener" href="https://www.infoq.cn/article/xw54gb1oe6fpxiggch19">https://www.infoq.cn/article/xw54gb1oe6fpxiggch19</a></p>
<h3 id="Â¶Ç‰ΩïÊü•ÁúãÊÖ¢Êü•ËØ¢"><a href="#Â¶Ç‰ΩïÊü•ÁúãÊÖ¢Êü•ËØ¢" class="headerlink" title="Â¶Ç‰ΩïÊü•ÁúãÊÖ¢Êü•ËØ¢"></a>Â¶Ç‰ΩïÊü•ÁúãÊÖ¢Êü•ËØ¢</h3><p>ÂºÄÂêØÊÖ¢Êü•ËØ¢Êó•Âøó<br>mysql&gt; set global slow_query_log=1;<br>ÂÆö‰πâÊó∂Èó¥SQLÊü•ËØ¢ÁöÑË∂ÖÊó∂Êó∂Èó¥<br>mysql&gt; set global long_query_time = 0.005;<br>Êü•ÁúãÊÖ¢Êü•ËØ¢Êó•ÂøóÁöÑ‰øùÂ≠òË∑ØÂæÑ<br>mysql&gt; show global variables like ‚Äòslow_query_log_file‚Äô;<br>Êü•ÁúãÊÖ¢Êü•ËØ¢<br>cat /var/log/mysql/slow.log</p>
<h3 id="Â¶Ç‰ΩïÂ§ÑÁêÜÊÖ¢Êü•ËØ¢"><a href="#Â¶Ç‰ΩïÂ§ÑÁêÜÊÖ¢Êü•ËØ¢" class="headerlink" title="Â¶Ç‰ΩïÂ§ÑÁêÜÊÖ¢Êü•ËØ¢"></a>Â¶Ç‰ΩïÂ§ÑÁêÜÊÖ¢Êü•ËØ¢</h3><p>sqlÂèäÁ¥¢Âºï‰ºòÂåñ„ÄÇ </p>
<p>Êï∞ÊçÆÂ∫ìË°®ÁªìÊûÑÔºåÊ†πÊçÆÊï∞ÊçÆËÆæËÆ°Êü•ËØ¢ÊúÄ‰ºòÁöÑË°®ÁªìÊûÑ„ÄÇ</p>
<p>Á≥ªÁªüÈÖçÁΩÆ‰ºòÂåñÔºåÂØπÊâìÂºÄÊñá‰ª∂Êï∞ÂíåÂÆâÂÖ®ÁöÑÈôêÂà∂„ÄÇ </p>
<p>Á°¨‰ª∂ÔºåÈÄâÊã©ÊúÄÈÄÇÂêàÊï∞ÊçÆÂ∫ìÁöÑcpuÔºåÊõ¥Âø´ÁöÑIO,Êõ¥Â§ßÁöÑÂÜÖÂ≠òÔºåcpu‰∏çÊòØË∂äÂ§öË∂äÂ•ΩÔºå IOÂπ∂‰∏çËÉΩÂáèÂ∞ëÈîÅÁöÑÊú∫Âà∂Ôºå‰πüÂ∞±ÊòØ‰∏çËÉΩÂáèÂ∞ëÈòªÂ°ûÔºåÊâÄ‰ª•ËØ¥Á°¨‰ª∂ÁöÑ‰ºòÂåñÊàêÊú¨Ë∂äÈ´òÔºåÊïàÊûúÊúÄÂ∑Æ„ÄÇ</p>

  
  
  <div class="footer">
      <script src="//m.servedby-buysellads.com/monetization.js" type="text/javascript"></script>
<div id="bsa-native"></div>
<script>
_bsa.init('custom', 'CKYD62QM', 'placement:vuejsorg',
  {
    target: '#bsa-native',
    template: '<a class="native-box" href="##statlink##"><div class="native-sponsor">Sponsor</div><div class="native-text"><strong>##company##</strong> ‚Äî ##description##</div></a>'
  }
);
</script>


    Caught a mistake or want to contribute to the documentation?
    <a href="https://github.com/vuejs/vuejs.org/blob/master/src/mysql/mysql-logs.md" rel="noopener" target="_blank">
      Edit this on GitHub!
    </a>
    <!-- Deployed on
    <a href="https://url.netlify.com/HJ8X2mxP8" rel="noopener" target="_blank">
      Netlify
    </a>. -->
  </div>
</div>

      </div>
      <script src="/js/smooth-scroll.min.js"></script>
    

    <!-- main custom script for sidebars, version selects etc. -->
    <script src="/js/css.escape.js"></script>
    <script src="/js/common.js"></script>

    <!-- search -->
    <link href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel='stylesheet' type='text/css'>
    
<link rel="stylesheet" href="/css/search.css">

    <script src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script>
    <script>
    [
      '#search-query-nav',
      '#search-query-sidebar',
      '#search-query-menu'
    ].forEach(function (selector) {
      if (!document.querySelector(selector)) return
      // search index defaults to v2
      var match = window.location.pathname.match(/^\/(v\d+)/)
      var version = match ? match[1] : 'v2'
      docsearch({
      appId: 'BH4D9OD16A',
      apiKey: '85cc3221c9f23bfbaa4e3913dd7625ea',
      indexName: 'vuejs',
      inputSelector: selector,
      algoliaOptions: { facetFilters: ["version:" + version] },
      autocompleteOptions: { hint: false, appendTo: 'body'}
      })
    })
    </script>
  </body>
</html>
